(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&l(f)}).observe(document,{childList:!0,subtree:!0});function a(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function l(o){if(o.ep)return;o.ep=!0;const u=a(o);fetch(o.href,u)}})();function Xm(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}function Zm(c){if(Object.prototype.hasOwnProperty.call(c,"__esModule"))return c;var n=c.default;if(typeof n=="function"){var a=function l(){return this instanceof l?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};a.prototype=n.prototype}else a={};return Object.defineProperty(a,"__esModule",{value:!0}),Object.keys(c).forEach(function(l){var o=Object.getOwnPropertyDescriptor(c,l);Object.defineProperty(a,l,o.get?o:{enumerable:!0,get:function(){return c[l]}})}),a}var po={exports:{}},Bn={},go={exports:{}},Re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Iu;function ep(){if(Iu)return Re;Iu=1;var c=Symbol.for("react.element"),n=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),f=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),j=Symbol.iterator;function C(N){return N===null||typeof N!="object"?null:(N=j&&N[j]||N["@@iterator"],typeof N=="function"?N:null)}var D={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U=Object.assign,V={};function q(N,v,K){this.props=N,this.context=v,this.refs=V,this.updater=K||D}q.prototype.isReactComponent={},q.prototype.setState=function(N,v){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,v,"setState")},q.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function I(){}I.prototype=q.prototype;function ie(N,v,K){this.props=N,this.context=v,this.refs=V,this.updater=K||D}var M=ie.prototype=new I;M.constructor=ie,U(M,q.prototype),M.isPureReactComponent=!0;var X=Array.isArray,B=Object.prototype.hasOwnProperty,se={current:null},pe={key:!0,ref:!0,__self:!0,__source:!0};function F(N,v,K){var Z,S={},H=null,ce=null;if(v!=null)for(Z in v.ref!==void 0&&(ce=v.ref),v.key!==void 0&&(H=""+v.key),v)B.call(v,Z)&&!pe.hasOwnProperty(Z)&&(S[Z]=v[Z]);var Ce=arguments.length-2;if(Ce===1)S.children=K;else if(1<Ce){for(var Ae=Array(Ce),$e=0;$e<Ce;$e++)Ae[$e]=arguments[$e+2];S.children=Ae}if(N&&N.defaultProps)for(Z in Ce=N.defaultProps,Ce)S[Z]===void 0&&(S[Z]=Ce[Z]);return{$$typeof:c,type:N,key:H,ref:ce,props:S,_owner:se.current}}function ne(N,v){return{$$typeof:c,type:N.type,key:v,ref:N.ref,props:N.props,_owner:N._owner}}function oe(N){return typeof N=="object"&&N!==null&&N.$$typeof===c}function Ne(N){var v={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(K){return v[K]})}var Se=/\/+/g;function te(N,v){return typeof N=="object"&&N!==null&&N.key!=null?Ne(""+N.key):v.toString(36)}function ae(N,v,K,Z,S){var H=typeof N;(H==="undefined"||H==="boolean")&&(N=null);var ce=!1;if(N===null)ce=!0;else switch(H){case"string":case"number":ce=!0;break;case"object":switch(N.$$typeof){case c:case n:ce=!0}}if(ce)return ce=N,S=S(ce),N=Z===""?"."+te(ce,0):Z,X(S)?(K="",N!=null&&(K=N.replace(Se,"$&/")+"/"),ae(S,v,K,"",function($e){return $e})):S!=null&&(oe(S)&&(S=ne(S,K+(!S.key||ce&&ce.key===S.key?"":(""+S.key).replace(Se,"$&/")+"/")+N)),v.push(S)),1;if(ce=0,Z=Z===""?".":Z+":",X(N))for(var Ce=0;Ce<N.length;Ce++){H=N[Ce];var Ae=Z+te(H,Ce);ce+=ae(H,v,K,Ae,S)}else if(Ae=C(N),typeof Ae=="function")for(N=Ae.call(N),Ce=0;!(H=N.next()).done;)H=H.value,Ae=Z+te(H,Ce++),ce+=ae(H,v,K,Ae,S);else if(H==="object")throw v=String(N),Error("Objects are not valid as a React child (found: "+(v==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":v)+"). If you meant to render a collection of children, use an array instead.");return ce}function le(N,v,K){if(N==null)return N;var Z=[],S=0;return ae(N,Z,"","",function(H){return v.call(K,H,S++)}),Z}function ye(N){if(N._status===-1){var v=N._result;v=v(),v.then(function(K){(N._status===0||N._status===-1)&&(N._status=1,N._result=K)},function(K){(N._status===0||N._status===-1)&&(N._status=2,N._result=K)}),N._status===-1&&(N._status=0,N._result=v)}if(N._status===1)return N._result.default;throw N._result}var je={current:null},W={transition:null},$={ReactCurrentDispatcher:je,ReactCurrentBatchConfig:W,ReactCurrentOwner:se};function O(){throw Error("act(...) is not supported in production builds of React.")}return Re.Children={map:le,forEach:function(N,v,K){le(N,function(){v.apply(this,arguments)},K)},count:function(N){var v=0;return le(N,function(){v++}),v},toArray:function(N){return le(N,function(v){return v})||[]},only:function(N){if(!oe(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},Re.Component=q,Re.Fragment=a,Re.Profiler=o,Re.PureComponent=ie,Re.StrictMode=l,Re.Suspense=g,Re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$,Re.act=O,Re.cloneElement=function(N,v,K){if(N==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+N+".");var Z=U({},N.props),S=N.key,H=N.ref,ce=N._owner;if(v!=null){if(v.ref!==void 0&&(H=v.ref,ce=se.current),v.key!==void 0&&(S=""+v.key),N.type&&N.type.defaultProps)var Ce=N.type.defaultProps;for(Ae in v)B.call(v,Ae)&&!pe.hasOwnProperty(Ae)&&(Z[Ae]=v[Ae]===void 0&&Ce!==void 0?Ce[Ae]:v[Ae])}var Ae=arguments.length-2;if(Ae===1)Z.children=K;else if(1<Ae){Ce=Array(Ae);for(var $e=0;$e<Ae;$e++)Ce[$e]=arguments[$e+2];Z.children=Ce}return{$$typeof:c,type:N.type,key:S,ref:H,props:Z,_owner:ce}},Re.createContext=function(N){return N={$$typeof:f,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},N.Provider={$$typeof:u,_context:N},N.Consumer=N},Re.createElement=F,Re.createFactory=function(N){var v=F.bind(null,N);return v.type=N,v},Re.createRef=function(){return{current:null}},Re.forwardRef=function(N){return{$$typeof:p,render:N}},Re.isValidElement=oe,Re.lazy=function(N){return{$$typeof:y,_payload:{_status:-1,_result:N},_init:ye}},Re.memo=function(N,v){return{$$typeof:x,type:N,compare:v===void 0?null:v}},Re.startTransition=function(N){var v=W.transition;W.transition={};try{N()}finally{W.transition=v}},Re.unstable_act=O,Re.useCallback=function(N,v){return je.current.useCallback(N,v)},Re.useContext=function(N){return je.current.useContext(N)},Re.useDebugValue=function(){},Re.useDeferredValue=function(N){return je.current.useDeferredValue(N)},Re.useEffect=function(N,v){return je.current.useEffect(N,v)},Re.useId=function(){return je.current.useId()},Re.useImperativeHandle=function(N,v,K){return je.current.useImperativeHandle(N,v,K)},Re.useInsertionEffect=function(N,v){return je.current.useInsertionEffect(N,v)},Re.useLayoutEffect=function(N,v){return je.current.useLayoutEffect(N,v)},Re.useMemo=function(N,v){return je.current.useMemo(N,v)},Re.useReducer=function(N,v,K){return je.current.useReducer(N,v,K)},Re.useRef=function(N){return je.current.useRef(N)},Re.useState=function(N){return je.current.useState(N)},Re.useSyncExternalStore=function(N,v,K){return je.current.useSyncExternalStore(N,v,K)},Re.useTransition=function(){return je.current.useTransition()},Re.version="18.3.1",Re}var Ou;function zo(){return Ou||(Ou=1,go.exports=ep()),go.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ru;function tp(){if(Ru)return Bn;Ru=1;var c=zo(),n=Symbol.for("react.element"),a=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,o=c.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function f(p,g,x){var y,j={},C=null,D=null;x!==void 0&&(C=""+x),g.key!==void 0&&(C=""+g.key),g.ref!==void 0&&(D=g.ref);for(y in g)l.call(g,y)&&!u.hasOwnProperty(y)&&(j[y]=g[y]);if(p&&p.defaultProps)for(y in g=p.defaultProps,g)j[y]===void 0&&(j[y]=g[y]);return{$$typeof:n,type:p,key:C,ref:D,props:j,_owner:o.current}}return Bn.Fragment=a,Bn.jsx=f,Bn.jsxs=f,Bn}var Mu;function rp(){return Mu||(Mu=1,po.exports=tp()),po.exports}var r=rp(),P=zo(),ui={},xo={exports:{}},At={},yo={exports:{}},vo={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lu;function sp(){return Lu||(Lu=1,function(c){function n(W,$){var O=W.length;W.push($);e:for(;0<O;){var N=O-1>>>1,v=W[N];if(0<o(v,$))W[N]=$,W[O]=v,O=N;else break e}}function a(W){return W.length===0?null:W[0]}function l(W){if(W.length===0)return null;var $=W[0],O=W.pop();if(O!==$){W[0]=O;e:for(var N=0,v=W.length,K=v>>>1;N<K;){var Z=2*(N+1)-1,S=W[Z],H=Z+1,ce=W[H];if(0>o(S,O))H<v&&0>o(ce,S)?(W[N]=ce,W[H]=O,N=H):(W[N]=S,W[Z]=O,N=Z);else if(H<v&&0>o(ce,O))W[N]=ce,W[H]=O,N=H;else break e}}return $}function o(W,$){var O=W.sortIndex-$.sortIndex;return O!==0?O:W.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;c.unstable_now=function(){return u.now()}}else{var f=Date,p=f.now();c.unstable_now=function(){return f.now()-p}}var g=[],x=[],y=1,j=null,C=3,D=!1,U=!1,V=!1,q=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,ie=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function M(W){for(var $=a(x);$!==null;){if($.callback===null)l(x);else if($.startTime<=W)l(x),$.sortIndex=$.expirationTime,n(g,$);else break;$=a(x)}}function X(W){if(V=!1,M(W),!U)if(a(g)!==null)U=!0,ye(B);else{var $=a(x);$!==null&&je(X,$.startTime-W)}}function B(W,$){U=!1,V&&(V=!1,I(F),F=-1),D=!0;var O=C;try{for(M($),j=a(g);j!==null&&(!(j.expirationTime>$)||W&&!Ne());){var N=j.callback;if(typeof N=="function"){j.callback=null,C=j.priorityLevel;var v=N(j.expirationTime<=$);$=c.unstable_now(),typeof v=="function"?j.callback=v:j===a(g)&&l(g),M($)}else l(g);j=a(g)}if(j!==null)var K=!0;else{var Z=a(x);Z!==null&&je(X,Z.startTime-$),K=!1}return K}finally{j=null,C=O,D=!1}}var se=!1,pe=null,F=-1,ne=5,oe=-1;function Ne(){return!(c.unstable_now()-oe<ne)}function Se(){if(pe!==null){var W=c.unstable_now();oe=W;var $=!0;try{$=pe(!0,W)}finally{$?te():(se=!1,pe=null)}}else se=!1}var te;if(typeof ie=="function")te=function(){ie(Se)};else if(typeof MessageChannel<"u"){var ae=new MessageChannel,le=ae.port2;ae.port1.onmessage=Se,te=function(){le.postMessage(null)}}else te=function(){q(Se,0)};function ye(W){pe=W,se||(se=!0,te())}function je(W,$){F=q(function(){W(c.unstable_now())},$)}c.unstable_IdlePriority=5,c.unstable_ImmediatePriority=1,c.unstable_LowPriority=4,c.unstable_NormalPriority=3,c.unstable_Profiling=null,c.unstable_UserBlockingPriority=2,c.unstable_cancelCallback=function(W){W.callback=null},c.unstable_continueExecution=function(){U||D||(U=!0,ye(B))},c.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ne=0<W?Math.floor(1e3/W):5},c.unstable_getCurrentPriorityLevel=function(){return C},c.unstable_getFirstCallbackNode=function(){return a(g)},c.unstable_next=function(W){switch(C){case 1:case 2:case 3:var $=3;break;default:$=C}var O=C;C=$;try{return W()}finally{C=O}},c.unstable_pauseExecution=function(){},c.unstable_requestPaint=function(){},c.unstable_runWithPriority=function(W,$){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var O=C;C=W;try{return $()}finally{C=O}},c.unstable_scheduleCallback=function(W,$,O){var N=c.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?N+O:N):O=N,W){case 1:var v=-1;break;case 2:v=250;break;case 5:v=1073741823;break;case 4:v=1e4;break;default:v=5e3}return v=O+v,W={id:y++,callback:$,priorityLevel:W,startTime:O,expirationTime:v,sortIndex:-1},O>N?(W.sortIndex=O,n(x,W),a(g)===null&&W===a(x)&&(V?(I(F),F=-1):V=!0,je(X,O-N))):(W.sortIndex=v,n(g,W),U||D||(U=!0,ye(B))),W},c.unstable_shouldYield=Ne,c.unstable_wrapCallback=function(W){var $=C;return function(){var O=C;C=$;try{return W.apply(this,arguments)}finally{C=O}}}}(vo)),vo}var $u;function np(){return $u||($u=1,yo.exports=sp()),yo.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uu;function ap(){if(Uu)return At;Uu=1;var c=zo(),n=np();function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var l=new Set,o={};function u(e,t){f(e,t),f(e+"Capture",t)}function f(e,t){for(o[e]=t,e=0;e<t.length;e++)l.add(t[e])}var p=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,x=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,y={},j={};function C(e){return g.call(j,e)?!0:g.call(y,e)?!1:x.test(e)?j[e]=!0:(y[e]=!0,!1)}function D(e,t,s,i){if(s!==null&&s.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:s!==null?!s.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function U(e,t,s,i){if(t===null||typeof t>"u"||D(e,t,s,i))return!0;if(i)return!1;if(s!==null)switch(s.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function V(e,t,s,i,d,h,m){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=d,this.mustUseProperty=s,this.propertyName=e,this.type=t,this.sanitizeURL=h,this.removeEmptyString=m}var q={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){q[e]=new V(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];q[t]=new V(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){q[e]=new V(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){q[e]=new V(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){q[e]=new V(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){q[e]=new V(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){q[e]=new V(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){q[e]=new V(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){q[e]=new V(e,5,!1,e.toLowerCase(),null,!1,!1)});var I=/[\-:]([a-z])/g;function ie(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(I,ie);q[t]=new V(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(I,ie);q[t]=new V(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(I,ie);q[t]=new V(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){q[e]=new V(e,1,!1,e.toLowerCase(),null,!1,!1)}),q.xlinkHref=new V("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){q[e]=new V(e,1,!1,e.toLowerCase(),null,!0,!0)});function M(e,t,s,i){var d=q.hasOwnProperty(t)?q[t]:null;(d!==null?d.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(U(t,s,d,i)&&(s=null),i||d===null?C(t)&&(s===null?e.removeAttribute(t):e.setAttribute(t,""+s)):d.mustUseProperty?e[d.propertyName]=s===null?d.type===3?!1:"":s:(t=d.attributeName,i=d.attributeNamespace,s===null?e.removeAttribute(t):(d=d.type,s=d===3||d===4&&s===!0?"":""+s,i?e.setAttributeNS(i,t,s):e.setAttribute(t,s))))}var X=c.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,B=Symbol.for("react.element"),se=Symbol.for("react.portal"),pe=Symbol.for("react.fragment"),F=Symbol.for("react.strict_mode"),ne=Symbol.for("react.profiler"),oe=Symbol.for("react.provider"),Ne=Symbol.for("react.context"),Se=Symbol.for("react.forward_ref"),te=Symbol.for("react.suspense"),ae=Symbol.for("react.suspense_list"),le=Symbol.for("react.memo"),ye=Symbol.for("react.lazy"),je=Symbol.for("react.offscreen"),W=Symbol.iterator;function $(e){return e===null||typeof e!="object"?null:(e=W&&e[W]||e["@@iterator"],typeof e=="function"?e:null)}var O=Object.assign,N;function v(e){if(N===void 0)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);N=t&&t[1]||""}return`
`+N+e}var K=!1;function Z(e,t){if(!e||K)return"";K=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(R){var i=R}Reflect.construct(e,[],t)}else{try{t.call()}catch(R){i=R}e.call(t.prototype)}else{try{throw Error()}catch(R){i=R}e()}}catch(R){if(R&&i&&typeof R.stack=="string"){for(var d=R.stack.split(`
`),h=i.stack.split(`
`),m=d.length-1,b=h.length-1;1<=m&&0<=b&&d[m]!==h[b];)b--;for(;1<=m&&0<=b;m--,b--)if(d[m]!==h[b]){if(m!==1||b!==1)do if(m--,b--,0>b||d[m]!==h[b]){var _=`
`+d[m].replace(" at new "," at ");return e.displayName&&_.includes("<anonymous>")&&(_=_.replace("<anonymous>",e.displayName)),_}while(1<=m&&0<=b);break}}}finally{K=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?v(e):""}function S(e){switch(e.tag){case 5:return v(e.type);case 16:return v("Lazy");case 13:return v("Suspense");case 19:return v("SuspenseList");case 0:case 2:case 15:return e=Z(e.type,!1),e;case 11:return e=Z(e.type.render,!1),e;case 1:return e=Z(e.type,!0),e;default:return""}}function H(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case pe:return"Fragment";case se:return"Portal";case ne:return"Profiler";case F:return"StrictMode";case te:return"Suspense";case ae:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Ne:return(e.displayName||"Context")+".Consumer";case oe:return(e._context.displayName||"Context")+".Provider";case Se:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case le:return t=e.displayName||null,t!==null?t:H(e.type)||"Memo";case ye:t=e._payload,e=e._init;try{return H(e(t))}catch{}}return null}function ce(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return H(t);case 8:return t===F?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ce(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ae(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function $e(e){var t=Ae(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var d=s.get,h=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return d.call(this)},set:function(m){i=""+m,h.call(this,m)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return i},setValue:function(m){i=""+m},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function L(e){e._valueTracker||(e._valueTracker=$e(e))}function Ie(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),i="";return e&&(i=Ae(e)?e.checked?"true":"false":e.value),e=i,e!==s?(t.setValue(e),!0):!1}function Pe(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Le(e,t){var s=t.checked;return O({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??e._wrapperState.initialChecked})}function it(e,t){var s=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;s=Ce(t.value!=null?t.value:s),e._wrapperState={initialChecked:i,initialValue:s,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function wt(e,t){t=t.checked,t!=null&&M(e,"checked",t,!1)}function bt(e,t){wt(e,t);var s=Ce(t.value),i=t.type;if(s!=null)i==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Wt(e,t.type,s):t.hasOwnProperty("defaultValue")&&Wt(e,t.type,Ce(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function lt(e,t,s){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,s||t===e.value||(e.value=t),e.defaultValue=t}s=e.name,s!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,s!==""&&(e.name=s)}function Wt(e,t,s){(t!=="number"||Pe(e.ownerDocument)!==e)&&(s==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var z=Array.isArray;function me(e,t,s,i){if(e=e.options,t){t={};for(var d=0;d<s.length;d++)t["$"+s[d]]=!0;for(s=0;s<e.length;s++)d=t.hasOwnProperty("$"+e[s].value),e[s].selected!==d&&(e[s].selected=d),d&&i&&(e[s].defaultSelected=!0)}else{for(s=""+Ce(s),t=null,d=0;d<e.length;d++){if(e[d].value===s){e[d].selected=!0,i&&(e[d].defaultSelected=!0);return}t!==null||e[d].disabled||(t=e[d])}t!==null&&(t.selected=!0)}}function Te(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(a(91));return O({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function he(e,t){var s=t.value;if(s==null){if(s=t.children,t=t.defaultValue,s!=null){if(t!=null)throw Error(a(92));if(z(s)){if(1<s.length)throw Error(a(93));s=s[0]}t=s}t==null&&(t=""),s=t}e._wrapperState={initialValue:Ce(s)}}function qe(e,t){var s=Ce(t.value),i=Ce(t.defaultValue);s!=null&&(s=""+s,s!==e.value&&(e.value=s),t.defaultValue==null&&e.defaultValue!==s&&(e.defaultValue=s)),i!=null&&(e.defaultValue=""+i)}function Je(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function w(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function E(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?w(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Q,de=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,s,i,d){MSApp.execUnsafeLocalFunction(function(){return e(t,s,i,d)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Q=Q||document.createElement("div"),Q.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Q.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ue(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=t;return}}e.textContent=t}var Oe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ze=["Webkit","ms","Moz","O"];Object.keys(Oe).forEach(function(e){ze.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Oe[t]=Oe[e]})});function Ot(e,t,s){return t==null||typeof t=="boolean"||t===""?"":s||typeof t!="number"||t===0||Oe.hasOwnProperty(e)&&Oe[e]?(""+t).trim():t+"px"}function Cr(e,t){e=e.style;for(var s in t)if(t.hasOwnProperty(s)){var i=s.indexOf("--")===0,d=Ot(s,t[s],i);s==="float"&&(s="cssFloat"),i?e.setProperty(s,d):e[s]=d}}var Jr=O({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ys(e,t){if(t){if(Jr[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(a(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(a(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(t.style!=null&&typeof t.style!="object")throw Error(a(62))}}function an(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vs=null;function jt(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var sr=null,fr=null,ws=null;function Yo(e){if(e=En(e)){if(typeof sr!="function")throw Error(a(280));var t=e.stateNode;t&&(t=Sa(t),sr(e.stateNode,e.type,t))}}function Jo(e){fr?ws?ws.push(e):ws=[e]:fr=e}function Xo(){if(fr){var e=fr,t=ws;if(ws=fr=null,Yo(e),t)for(e=0;e<t.length;e++)Yo(t[e])}}function Zo(e,t){return e(t)}function ec(){}var Di=!1;function tc(e,t,s){if(Di)return e(t,s);Di=!0;try{return Zo(e,t,s)}finally{Di=!1,(fr!==null||ws!==null)&&(ec(),Xo())}}function ln(e,t){var s=e.stateNode;if(s===null)return null;var i=Sa(s);if(i===null)return null;s=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(a(231,t,typeof s));return s}var Ai=!1;if(p)try{var on={};Object.defineProperty(on,"passive",{get:function(){Ai=!0}}),window.addEventListener("test",on,on),window.removeEventListener("test",on,on)}catch{Ai=!1}function sf(e,t,s,i,d,h,m,b,_){var R=Array.prototype.slice.call(arguments,3);try{t.apply(s,R)}catch(Y){this.onError(Y)}}var cn=!1,na=null,aa=!1,Ii=null,nf={onError:function(e){cn=!0,na=e}};function af(e,t,s,i,d,h,m,b,_){cn=!1,na=null,sf.apply(nf,arguments)}function lf(e,t,s,i,d,h,m,b,_){if(af.apply(this,arguments),cn){if(cn){var R=na;cn=!1,na=null}else throw Error(a(198));aa||(aa=!0,Ii=R)}}function Xr(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(s=t.return),e=t.return;while(e)}return t.tag===3?s:null}function rc(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function sc(e){if(Xr(e)!==e)throw Error(a(188))}function of(e){var t=e.alternate;if(!t){if(t=Xr(e),t===null)throw Error(a(188));return t!==e?null:e}for(var s=e,i=t;;){var d=s.return;if(d===null)break;var h=d.alternate;if(h===null){if(i=d.return,i!==null){s=i;continue}break}if(d.child===h.child){for(h=d.child;h;){if(h===s)return sc(d),e;if(h===i)return sc(d),t;h=h.sibling}throw Error(a(188))}if(s.return!==i.return)s=d,i=h;else{for(var m=!1,b=d.child;b;){if(b===s){m=!0,s=d,i=h;break}if(b===i){m=!0,i=d,s=h;break}b=b.sibling}if(!m){for(b=h.child;b;){if(b===s){m=!0,s=h,i=d;break}if(b===i){m=!0,i=h,s=d;break}b=b.sibling}if(!m)throw Error(a(189))}}if(s.alternate!==i)throw Error(a(190))}if(s.tag!==3)throw Error(a(188));return s.stateNode.current===s?e:t}function nc(e){return e=of(e),e!==null?ac(e):null}function ac(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=ac(e);if(t!==null)return t;e=e.sibling}return null}var ic=n.unstable_scheduleCallback,lc=n.unstable_cancelCallback,cf=n.unstable_shouldYield,df=n.unstable_requestPaint,Ze=n.unstable_now,uf=n.unstable_getCurrentPriorityLevel,Oi=n.unstable_ImmediatePriority,oc=n.unstable_UserBlockingPriority,ia=n.unstable_NormalPriority,hf=n.unstable_LowPriority,cc=n.unstable_IdlePriority,la=null,nr=null;function ff(e){if(nr&&typeof nr.onCommitFiberRoot=="function")try{nr.onCommitFiberRoot(la,e,void 0,(e.current.flags&128)===128)}catch{}}var Kt=Math.clz32?Math.clz32:gf,mf=Math.log,pf=Math.LN2;function gf(e){return e>>>=0,e===0?32:31-(mf(e)/pf|0)|0}var oa=64,ca=4194304;function dn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function da(e,t){var s=e.pendingLanes;if(s===0)return 0;var i=0,d=e.suspendedLanes,h=e.pingedLanes,m=s&268435455;if(m!==0){var b=m&~d;b!==0?i=dn(b):(h&=m,h!==0&&(i=dn(h)))}else m=s&~d,m!==0?i=dn(m):h!==0&&(i=dn(h));if(i===0)return 0;if(t!==0&&t!==i&&(t&d)===0&&(d=i&-i,h=t&-t,d>=h||d===16&&(h&4194240)!==0))return t;if((i&4)!==0&&(i|=s&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)s=31-Kt(t),d=1<<s,i|=e[s],t&=~d;return i}function xf(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yf(e,t){for(var s=e.suspendedLanes,i=e.pingedLanes,d=e.expirationTimes,h=e.pendingLanes;0<h;){var m=31-Kt(h),b=1<<m,_=d[m];_===-1?((b&s)===0||(b&i)!==0)&&(d[m]=xf(b,t)):_<=t&&(e.expiredLanes|=b),h&=~b}}function Ri(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function dc(){var e=oa;return oa<<=1,(oa&4194240)===0&&(oa=64),e}function Mi(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function un(e,t,s){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Kt(t),e[t]=s}function vf(e,t){var s=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<s;){var d=31-Kt(s),h=1<<d;t[d]=0,i[d]=-1,e[d]=-1,s&=~h}}function Li(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var i=31-Kt(s),d=1<<i;d&t|e[i]&t&&(e[i]|=t),s&=~d}}var Be=0;function uc(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var hc,$i,fc,mc,pc,Ui=!1,ua=[],Er=null,Tr=null,Pr=null,hn=new Map,fn=new Map,Dr=[],wf="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function gc(e,t){switch(e){case"focusin":case"focusout":Er=null;break;case"dragenter":case"dragleave":Tr=null;break;case"mouseover":case"mouseout":Pr=null;break;case"pointerover":case"pointerout":hn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":fn.delete(t.pointerId)}}function mn(e,t,s,i,d,h){return e===null||e.nativeEvent!==h?(e={blockedOn:t,domEventName:s,eventSystemFlags:i,nativeEvent:h,targetContainers:[d]},t!==null&&(t=En(t),t!==null&&$i(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,d!==null&&t.indexOf(d)===-1&&t.push(d),e)}function bf(e,t,s,i,d){switch(t){case"focusin":return Er=mn(Er,e,t,s,i,d),!0;case"dragenter":return Tr=mn(Tr,e,t,s,i,d),!0;case"mouseover":return Pr=mn(Pr,e,t,s,i,d),!0;case"pointerover":var h=d.pointerId;return hn.set(h,mn(hn.get(h)||null,e,t,s,i,d)),!0;case"gotpointercapture":return h=d.pointerId,fn.set(h,mn(fn.get(h)||null,e,t,s,i,d)),!0}return!1}function xc(e){var t=Zr(e.target);if(t!==null){var s=Xr(t);if(s!==null){if(t=s.tag,t===13){if(t=rc(s),t!==null){e.blockedOn=t,pc(e.priority,function(){fc(s)});return}}else if(t===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ha(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var s=zi(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(s===null){s=e.nativeEvent;var i=new s.constructor(s.type,s);vs=i,s.target.dispatchEvent(i),vs=null}else return t=En(s),t!==null&&$i(t),e.blockedOn=s,!1;t.shift()}return!0}function yc(e,t,s){ha(e)&&s.delete(t)}function jf(){Ui=!1,Er!==null&&ha(Er)&&(Er=null),Tr!==null&&ha(Tr)&&(Tr=null),Pr!==null&&ha(Pr)&&(Pr=null),hn.forEach(yc),fn.forEach(yc)}function pn(e,t){e.blockedOn===t&&(e.blockedOn=null,Ui||(Ui=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,jf)))}function gn(e){function t(d){return pn(d,e)}if(0<ua.length){pn(ua[0],e);for(var s=1;s<ua.length;s++){var i=ua[s];i.blockedOn===e&&(i.blockedOn=null)}}for(Er!==null&&pn(Er,e),Tr!==null&&pn(Tr,e),Pr!==null&&pn(Pr,e),hn.forEach(t),fn.forEach(t),s=0;s<Dr.length;s++)i=Dr[s],i.blockedOn===e&&(i.blockedOn=null);for(;0<Dr.length&&(s=Dr[0],s.blockedOn===null);)xc(s),s.blockedOn===null&&Dr.shift()}var bs=X.ReactCurrentBatchConfig,fa=!0;function Nf(e,t,s,i){var d=Be,h=bs.transition;bs.transition=null;try{Be=1,Fi(e,t,s,i)}finally{Be=d,bs.transition=h}}function _f(e,t,s,i){var d=Be,h=bs.transition;bs.transition=null;try{Be=4,Fi(e,t,s,i)}finally{Be=d,bs.transition=h}}function Fi(e,t,s,i){if(fa){var d=zi(e,t,s,i);if(d===null)nl(e,t,i,ma,s),gc(e,i);else if(bf(d,e,t,s,i))i.stopPropagation();else if(gc(e,i),t&4&&-1<wf.indexOf(e)){for(;d!==null;){var h=En(d);if(h!==null&&hc(h),h=zi(e,t,s,i),h===null&&nl(e,t,i,ma,s),h===d)break;d=h}d!==null&&i.stopPropagation()}else nl(e,t,i,null,s)}}var ma=null;function zi(e,t,s,i){if(ma=null,e=jt(i),e=Zr(e),e!==null)if(t=Xr(e),t===null)e=null;else if(s=t.tag,s===13){if(e=rc(t),e!==null)return e;e=null}else if(s===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ma=e,null}function vc(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(uf()){case Oi:return 1;case oc:return 4;case ia:case hf:return 16;case cc:return 536870912;default:return 16}default:return 16}}var Ar=null,qi=null,pa=null;function wc(){if(pa)return pa;var e,t=qi,s=t.length,i,d="value"in Ar?Ar.value:Ar.textContent,h=d.length;for(e=0;e<s&&t[e]===d[e];e++);var m=s-e;for(i=1;i<=m&&t[s-i]===d[h-i];i++);return pa=d.slice(e,1<i?1-i:void 0)}function ga(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function xa(){return!0}function bc(){return!1}function Rt(e){function t(s,i,d,h,m){this._reactName=s,this._targetInst=d,this.type=i,this.nativeEvent=h,this.target=m,this.currentTarget=null;for(var b in e)e.hasOwnProperty(b)&&(s=e[b],this[b]=s?s(h):h[b]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?xa:bc,this.isPropagationStopped=bc,this}return O(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=xa)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=xa)},persist:function(){},isPersistent:xa}),t}var js={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bi=Rt(js),xn=O({},js,{view:0,detail:0}),kf=Rt(xn),Vi,Hi,yn,ya=O({},xn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ki,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==yn&&(yn&&e.type==="mousemove"?(Vi=e.screenX-yn.screenX,Hi=e.screenY-yn.screenY):Hi=Vi=0,yn=e),Vi)},movementY:function(e){return"movementY"in e?e.movementY:Hi}}),jc=Rt(ya),Sf=O({},ya,{dataTransfer:0}),Cf=Rt(Sf),Ef=O({},xn,{relatedTarget:0}),Wi=Rt(Ef),Tf=O({},js,{animationName:0,elapsedTime:0,pseudoElement:0}),Pf=Rt(Tf),Df=O({},js,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Af=Rt(Df),If=O({},js,{data:0}),Nc=Rt(If),Of={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Rf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Mf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Lf(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Mf[e])?!!t[e]:!1}function Ki(){return Lf}var $f=O({},xn,{key:function(e){if(e.key){var t=Of[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ga(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Rf[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ki,charCode:function(e){return e.type==="keypress"?ga(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ga(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Uf=Rt($f),Ff=O({},ya,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_c=Rt(Ff),zf=O({},xn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ki}),qf=Rt(zf),Bf=O({},js,{propertyName:0,elapsedTime:0,pseudoElement:0}),Vf=Rt(Bf),Hf=O({},ya,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Wf=Rt(Hf),Kf=[9,13,27,32],Qi=p&&"CompositionEvent"in window,vn=null;p&&"documentMode"in document&&(vn=document.documentMode);var Qf=p&&"TextEvent"in window&&!vn,kc=p&&(!Qi||vn&&8<vn&&11>=vn),Sc=" ",Cc=!1;function Ec(e,t){switch(e){case"keyup":return Kf.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Tc(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ns=!1;function Gf(e,t){switch(e){case"compositionend":return Tc(t);case"keypress":return t.which!==32?null:(Cc=!0,Sc);case"textInput":return e=t.data,e===Sc&&Cc?null:e;default:return null}}function Yf(e,t){if(Ns)return e==="compositionend"||!Qi&&Ec(e,t)?(e=wc(),pa=qi=Ar=null,Ns=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return kc&&t.locale!=="ko"?null:t.data;default:return null}}var Jf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Jf[e.type]:t==="textarea"}function Dc(e,t,s,i){Jo(i),t=Na(t,"onChange"),0<t.length&&(s=new Bi("onChange","change",null,s,i),e.push({event:s,listeners:t}))}var wn=null,bn=null;function Xf(e){Gc(e,0)}function va(e){var t=Es(e);if(Ie(t))return e}function Zf(e,t){if(e==="change")return t}var Ac=!1;if(p){var Gi;if(p){var Yi="oninput"in document;if(!Yi){var Ic=document.createElement("div");Ic.setAttribute("oninput","return;"),Yi=typeof Ic.oninput=="function"}Gi=Yi}else Gi=!1;Ac=Gi&&(!document.documentMode||9<document.documentMode)}function Oc(){wn&&(wn.detachEvent("onpropertychange",Rc),bn=wn=null)}function Rc(e){if(e.propertyName==="value"&&va(bn)){var t=[];Dc(t,bn,e,jt(e)),tc(Xf,t)}}function em(e,t,s){e==="focusin"?(Oc(),wn=t,bn=s,wn.attachEvent("onpropertychange",Rc)):e==="focusout"&&Oc()}function tm(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return va(bn)}function rm(e,t){if(e==="click")return va(t)}function sm(e,t){if(e==="input"||e==="change")return va(t)}function nm(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Qt=typeof Object.is=="function"?Object.is:nm;function jn(e,t){if(Qt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var s=Object.keys(e),i=Object.keys(t);if(s.length!==i.length)return!1;for(i=0;i<s.length;i++){var d=s[i];if(!g.call(t,d)||!Qt(e[d],t[d]))return!1}return!0}function Mc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Lc(e,t){var s=Mc(e);e=0;for(var i;s;){if(s.nodeType===3){if(i=e+s.textContent.length,e<=t&&i>=t)return{node:s,offset:t-e};e=i}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Mc(s)}}function $c(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?$c(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Uc(){for(var e=window,t=Pe();t instanceof e.HTMLIFrameElement;){try{var s=typeof t.contentWindow.location.href=="string"}catch{s=!1}if(s)e=t.contentWindow;else break;t=Pe(e.document)}return t}function Ji(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function am(e){var t=Uc(),s=e.focusedElem,i=e.selectionRange;if(t!==s&&s&&s.ownerDocument&&$c(s.ownerDocument.documentElement,s)){if(i!==null&&Ji(s)){if(t=i.start,e=i.end,e===void 0&&(e=t),"selectionStart"in s)s.selectionStart=t,s.selectionEnd=Math.min(e,s.value.length);else if(e=(t=s.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var d=s.textContent.length,h=Math.min(i.start,d);i=i.end===void 0?h:Math.min(i.end,d),!e.extend&&h>i&&(d=i,i=h,h=d),d=Lc(s,h);var m=Lc(s,i);d&&m&&(e.rangeCount!==1||e.anchorNode!==d.node||e.anchorOffset!==d.offset||e.focusNode!==m.node||e.focusOffset!==m.offset)&&(t=t.createRange(),t.setStart(d.node,d.offset),e.removeAllRanges(),h>i?(e.addRange(t),e.extend(m.node,m.offset)):(t.setEnd(m.node,m.offset),e.addRange(t)))}}for(t=[],e=s;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<t.length;s++)e=t[s],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var im=p&&"documentMode"in document&&11>=document.documentMode,_s=null,Xi=null,Nn=null,Zi=!1;function Fc(e,t,s){var i=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Zi||_s==null||_s!==Pe(i)||(i=_s,"selectionStart"in i&&Ji(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Nn&&jn(Nn,i)||(Nn=i,i=Na(Xi,"onSelect"),0<i.length&&(t=new Bi("onSelect","select",null,t,s),e.push({event:t,listeners:i}),t.target=_s)))}function wa(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var ks={animationend:wa("Animation","AnimationEnd"),animationiteration:wa("Animation","AnimationIteration"),animationstart:wa("Animation","AnimationStart"),transitionend:wa("Transition","TransitionEnd")},el={},zc={};p&&(zc=document.createElement("div").style,"AnimationEvent"in window||(delete ks.animationend.animation,delete ks.animationiteration.animation,delete ks.animationstart.animation),"TransitionEvent"in window||delete ks.transitionend.transition);function ba(e){if(el[e])return el[e];if(!ks[e])return e;var t=ks[e],s;for(s in t)if(t.hasOwnProperty(s)&&s in zc)return el[e]=t[s];return e}var qc=ba("animationend"),Bc=ba("animationiteration"),Vc=ba("animationstart"),Hc=ba("transitionend"),Wc=new Map,Kc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ir(e,t){Wc.set(e,t),u(t,[e])}for(var tl=0;tl<Kc.length;tl++){var rl=Kc[tl],lm=rl.toLowerCase(),om=rl[0].toUpperCase()+rl.slice(1);Ir(lm,"on"+om)}Ir(qc,"onAnimationEnd"),Ir(Bc,"onAnimationIteration"),Ir(Vc,"onAnimationStart"),Ir("dblclick","onDoubleClick"),Ir("focusin","onFocus"),Ir("focusout","onBlur"),Ir(Hc,"onTransitionEnd"),f("onMouseEnter",["mouseout","mouseover"]),f("onMouseLeave",["mouseout","mouseover"]),f("onPointerEnter",["pointerout","pointerover"]),f("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _n="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cm=new Set("cancel close invalid load scroll toggle".split(" ").concat(_n));function Qc(e,t,s){var i=e.type||"unknown-event";e.currentTarget=s,lf(i,t,void 0,e),e.currentTarget=null}function Gc(e,t){t=(t&4)!==0;for(var s=0;s<e.length;s++){var i=e[s],d=i.event;i=i.listeners;e:{var h=void 0;if(t)for(var m=i.length-1;0<=m;m--){var b=i[m],_=b.instance,R=b.currentTarget;if(b=b.listener,_!==h&&d.isPropagationStopped())break e;Qc(d,b,R),h=_}else for(m=0;m<i.length;m++){if(b=i[m],_=b.instance,R=b.currentTarget,b=b.listener,_!==h&&d.isPropagationStopped())break e;Qc(d,b,R),h=_}}}if(aa)throw e=Ii,aa=!1,Ii=null,e}function We(e,t){var s=t[dl];s===void 0&&(s=t[dl]=new Set);var i=e+"__bubble";s.has(i)||(Yc(t,e,2,!1),s.add(i))}function sl(e,t,s){var i=0;t&&(i|=4),Yc(s,e,i,t)}var ja="_reactListening"+Math.random().toString(36).slice(2);function kn(e){if(!e[ja]){e[ja]=!0,l.forEach(function(s){s!=="selectionchange"&&(cm.has(s)||sl(s,!1,e),sl(s,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ja]||(t[ja]=!0,sl("selectionchange",!1,t))}}function Yc(e,t,s,i){switch(vc(t)){case 1:var d=Nf;break;case 4:d=_f;break;default:d=Fi}s=d.bind(null,t,s,e),d=void 0,!Ai||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(d=!0),i?d!==void 0?e.addEventListener(t,s,{capture:!0,passive:d}):e.addEventListener(t,s,!0):d!==void 0?e.addEventListener(t,s,{passive:d}):e.addEventListener(t,s,!1)}function nl(e,t,s,i,d){var h=i;if((t&1)===0&&(t&2)===0&&i!==null)e:for(;;){if(i===null)return;var m=i.tag;if(m===3||m===4){var b=i.stateNode.containerInfo;if(b===d||b.nodeType===8&&b.parentNode===d)break;if(m===4)for(m=i.return;m!==null;){var _=m.tag;if((_===3||_===4)&&(_=m.stateNode.containerInfo,_===d||_.nodeType===8&&_.parentNode===d))return;m=m.return}for(;b!==null;){if(m=Zr(b),m===null)return;if(_=m.tag,_===5||_===6){i=h=m;continue e}b=b.parentNode}}i=i.return}tc(function(){var R=h,Y=jt(s),J=[];e:{var G=Wc.get(e);if(G!==void 0){var fe=Bi,xe=e;switch(e){case"keypress":if(ga(s)===0)break e;case"keydown":case"keyup":fe=Uf;break;case"focusin":xe="focus",fe=Wi;break;case"focusout":xe="blur",fe=Wi;break;case"beforeblur":case"afterblur":fe=Wi;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":fe=jc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":fe=Cf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":fe=qf;break;case qc:case Bc:case Vc:fe=Pf;break;case Hc:fe=Vf;break;case"scroll":fe=kf;break;case"wheel":fe=Wf;break;case"copy":case"cut":case"paste":fe=Af;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":fe=_c}var ve=(t&4)!==0,et=!ve&&e==="scroll",T=ve?G!==null?G+"Capture":null:G;ve=[];for(var k=R,A;k!==null;){A=k;var ee=A.stateNode;if(A.tag===5&&ee!==null&&(A=ee,T!==null&&(ee=ln(k,T),ee!=null&&ve.push(Sn(k,ee,A)))),et)break;k=k.return}0<ve.length&&(G=new fe(G,xe,null,s,Y),J.push({event:G,listeners:ve}))}}if((t&7)===0){e:{if(G=e==="mouseover"||e==="pointerover",fe=e==="mouseout"||e==="pointerout",G&&s!==vs&&(xe=s.relatedTarget||s.fromElement)&&(Zr(xe)||xe[mr]))break e;if((fe||G)&&(G=Y.window===Y?Y:(G=Y.ownerDocument)?G.defaultView||G.parentWindow:window,fe?(xe=s.relatedTarget||s.toElement,fe=R,xe=xe?Zr(xe):null,xe!==null&&(et=Xr(xe),xe!==et||xe.tag!==5&&xe.tag!==6)&&(xe=null)):(fe=null,xe=R),fe!==xe)){if(ve=jc,ee="onMouseLeave",T="onMouseEnter",k="mouse",(e==="pointerout"||e==="pointerover")&&(ve=_c,ee="onPointerLeave",T="onPointerEnter",k="pointer"),et=fe==null?G:Es(fe),A=xe==null?G:Es(xe),G=new ve(ee,k+"leave",fe,s,Y),G.target=et,G.relatedTarget=A,ee=null,Zr(Y)===R&&(ve=new ve(T,k+"enter",xe,s,Y),ve.target=A,ve.relatedTarget=et,ee=ve),et=ee,fe&&xe)t:{for(ve=fe,T=xe,k=0,A=ve;A;A=Ss(A))k++;for(A=0,ee=T;ee;ee=Ss(ee))A++;for(;0<k-A;)ve=Ss(ve),k--;for(;0<A-k;)T=Ss(T),A--;for(;k--;){if(ve===T||T!==null&&ve===T.alternate)break t;ve=Ss(ve),T=Ss(T)}ve=null}else ve=null;fe!==null&&Jc(J,G,fe,ve,!1),xe!==null&&et!==null&&Jc(J,et,xe,ve,!0)}}e:{if(G=R?Es(R):window,fe=G.nodeName&&G.nodeName.toLowerCase(),fe==="select"||fe==="input"&&G.type==="file")var we=Zf;else if(Pc(G))if(Ac)we=sm;else{we=tm;var _e=em}else(fe=G.nodeName)&&fe.toLowerCase()==="input"&&(G.type==="checkbox"||G.type==="radio")&&(we=rm);if(we&&(we=we(e,R))){Dc(J,we,s,Y);break e}_e&&_e(e,G,R),e==="focusout"&&(_e=G._wrapperState)&&_e.controlled&&G.type==="number"&&Wt(G,"number",G.value)}switch(_e=R?Es(R):window,e){case"focusin":(Pc(_e)||_e.contentEditable==="true")&&(_s=_e,Xi=R,Nn=null);break;case"focusout":Nn=Xi=_s=null;break;case"mousedown":Zi=!0;break;case"contextmenu":case"mouseup":case"dragend":Zi=!1,Fc(J,s,Y);break;case"selectionchange":if(im)break;case"keydown":case"keyup":Fc(J,s,Y)}var ke;if(Qi)e:{switch(e){case"compositionstart":var Ee="onCompositionStart";break e;case"compositionend":Ee="onCompositionEnd";break e;case"compositionupdate":Ee="onCompositionUpdate";break e}Ee=void 0}else Ns?Ec(e,s)&&(Ee="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(Ee="onCompositionStart");Ee&&(kc&&s.locale!=="ko"&&(Ns||Ee!=="onCompositionStart"?Ee==="onCompositionEnd"&&Ns&&(ke=wc()):(Ar=Y,qi="value"in Ar?Ar.value:Ar.textContent,Ns=!0)),_e=Na(R,Ee),0<_e.length&&(Ee=new Nc(Ee,e,null,s,Y),J.push({event:Ee,listeners:_e}),ke?Ee.data=ke:(ke=Tc(s),ke!==null&&(Ee.data=ke)))),(ke=Qf?Gf(e,s):Yf(e,s))&&(R=Na(R,"onBeforeInput"),0<R.length&&(Y=new Nc("onBeforeInput","beforeinput",null,s,Y),J.push({event:Y,listeners:R}),Y.data=ke))}Gc(J,t)})}function Sn(e,t,s){return{instance:e,listener:t,currentTarget:s}}function Na(e,t){for(var s=t+"Capture",i=[];e!==null;){var d=e,h=d.stateNode;d.tag===5&&h!==null&&(d=h,h=ln(e,s),h!=null&&i.unshift(Sn(e,h,d)),h=ln(e,t),h!=null&&i.push(Sn(e,h,d))),e=e.return}return i}function Ss(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Jc(e,t,s,i,d){for(var h=t._reactName,m=[];s!==null&&s!==i;){var b=s,_=b.alternate,R=b.stateNode;if(_!==null&&_===i)break;b.tag===5&&R!==null&&(b=R,d?(_=ln(s,h),_!=null&&m.unshift(Sn(s,_,b))):d||(_=ln(s,h),_!=null&&m.push(Sn(s,_,b)))),s=s.return}m.length!==0&&e.push({event:t,listeners:m})}var dm=/\r\n?/g,um=/\u0000|\uFFFD/g;function Xc(e){return(typeof e=="string"?e:""+e).replace(dm,`
`).replace(um,"")}function _a(e,t,s){if(t=Xc(t),Xc(e)!==t&&s)throw Error(a(425))}function ka(){}var al=null,il=null;function ll(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ol=typeof setTimeout=="function"?setTimeout:void 0,hm=typeof clearTimeout=="function"?clearTimeout:void 0,Zc=typeof Promise=="function"?Promise:void 0,fm=typeof queueMicrotask=="function"?queueMicrotask:typeof Zc<"u"?function(e){return Zc.resolve(null).then(e).catch(mm)}:ol;function mm(e){setTimeout(function(){throw e})}function cl(e,t){var s=t,i=0;do{var d=s.nextSibling;if(e.removeChild(s),d&&d.nodeType===8)if(s=d.data,s==="/$"){if(i===0){e.removeChild(d),gn(t);return}i--}else s!=="$"&&s!=="$?"&&s!=="$!"||i++;s=d}while(s);gn(t)}function Or(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function ed(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(t===0)return e;t--}else s==="/$"&&t++}e=e.previousSibling}return null}var Cs=Math.random().toString(36).slice(2),ar="__reactFiber$"+Cs,Cn="__reactProps$"+Cs,mr="__reactContainer$"+Cs,dl="__reactEvents$"+Cs,pm="__reactListeners$"+Cs,gm="__reactHandles$"+Cs;function Zr(e){var t=e[ar];if(t)return t;for(var s=e.parentNode;s;){if(t=s[mr]||s[ar]){if(s=t.alternate,t.child!==null||s!==null&&s.child!==null)for(e=ed(e);e!==null;){if(s=e[ar])return s;e=ed(e)}return t}e=s,s=e.parentNode}return null}function En(e){return e=e[ar]||e[mr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Es(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(a(33))}function Sa(e){return e[Cn]||null}var ul=[],Ts=-1;function Rr(e){return{current:e}}function Ke(e){0>Ts||(e.current=ul[Ts],ul[Ts]=null,Ts--)}function Ve(e,t){Ts++,ul[Ts]=e.current,e.current=t}var Mr={},pt=Rr(Mr),Ct=Rr(!1),es=Mr;function Ps(e,t){var s=e.type.contextTypes;if(!s)return Mr;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var d={},h;for(h in s)d[h]=t[h];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=d),d}function Et(e){return e=e.childContextTypes,e!=null}function Ca(){Ke(Ct),Ke(pt)}function td(e,t,s){if(pt.current!==Mr)throw Error(a(168));Ve(pt,t),Ve(Ct,s)}function rd(e,t,s){var i=e.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return s;i=i.getChildContext();for(var d in i)if(!(d in t))throw Error(a(108,ce(e)||"Unknown",d));return O({},s,i)}function Ea(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Mr,es=pt.current,Ve(pt,e),Ve(Ct,Ct.current),!0}function sd(e,t,s){var i=e.stateNode;if(!i)throw Error(a(169));s?(e=rd(e,t,es),i.__reactInternalMemoizedMergedChildContext=e,Ke(Ct),Ke(pt),Ve(pt,e)):Ke(Ct),Ve(Ct,s)}var pr=null,Ta=!1,hl=!1;function nd(e){pr===null?pr=[e]:pr.push(e)}function xm(e){Ta=!0,nd(e)}function Lr(){if(!hl&&pr!==null){hl=!0;var e=0,t=Be;try{var s=pr;for(Be=1;e<s.length;e++){var i=s[e];do i=i(!0);while(i!==null)}pr=null,Ta=!1}catch(d){throw pr!==null&&(pr=pr.slice(e+1)),ic(Oi,Lr),d}finally{Be=t,hl=!1}}return null}var Ds=[],As=0,Pa=null,Da=0,Ut=[],Ft=0,ts=null,gr=1,xr="";function rs(e,t){Ds[As++]=Da,Ds[As++]=Pa,Pa=e,Da=t}function ad(e,t,s){Ut[Ft++]=gr,Ut[Ft++]=xr,Ut[Ft++]=ts,ts=e;var i=gr;e=xr;var d=32-Kt(i)-1;i&=~(1<<d),s+=1;var h=32-Kt(t)+d;if(30<h){var m=d-d%5;h=(i&(1<<m)-1).toString(32),i>>=m,d-=m,gr=1<<32-Kt(t)+d|s<<d|i,xr=h+e}else gr=1<<h|s<<d|i,xr=e}function fl(e){e.return!==null&&(rs(e,1),ad(e,1,0))}function ml(e){for(;e===Pa;)Pa=Ds[--As],Ds[As]=null,Da=Ds[--As],Ds[As]=null;for(;e===ts;)ts=Ut[--Ft],Ut[Ft]=null,xr=Ut[--Ft],Ut[Ft]=null,gr=Ut[--Ft],Ut[Ft]=null}var Mt=null,Lt=null,Qe=!1,Gt=null;function id(e,t){var s=Vt(5,null,null,0);s.elementType="DELETED",s.stateNode=t,s.return=e,t=e.deletions,t===null?(e.deletions=[s],e.flags|=16):t.push(s)}function ld(e,t){switch(e.tag){case 5:var s=e.type;return t=t.nodeType!==1||s.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Mt=e,Lt=Or(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Mt=e,Lt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(s=ts!==null?{id:gr,overflow:xr}:null,e.memoizedState={dehydrated:t,treeContext:s,retryLane:1073741824},s=Vt(18,null,null,0),s.stateNode=t,s.return=e,e.child=s,Mt=e,Lt=null,!0):!1;default:return!1}}function pl(e){return(e.mode&1)!==0&&(e.flags&128)===0}function gl(e){if(Qe){var t=Lt;if(t){var s=t;if(!ld(e,t)){if(pl(e))throw Error(a(418));t=Or(s.nextSibling);var i=Mt;t&&ld(e,t)?id(i,s):(e.flags=e.flags&-4097|2,Qe=!1,Mt=e)}}else{if(pl(e))throw Error(a(418));e.flags=e.flags&-4097|2,Qe=!1,Mt=e}}}function od(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Mt=e}function Aa(e){if(e!==Mt)return!1;if(!Qe)return od(e),Qe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ll(e.type,e.memoizedProps)),t&&(t=Lt)){if(pl(e))throw cd(),Error(a(418));for(;t;)id(e,t),t=Or(t.nextSibling)}if(od(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"){if(t===0){Lt=Or(e.nextSibling);break e}t--}else s!=="$"&&s!=="$!"&&s!=="$?"||t++}e=e.nextSibling}Lt=null}}else Lt=Mt?Or(e.stateNode.nextSibling):null;return!0}function cd(){for(var e=Lt;e;)e=Or(e.nextSibling)}function Is(){Lt=Mt=null,Qe=!1}function xl(e){Gt===null?Gt=[e]:Gt.push(e)}var ym=X.ReactCurrentBatchConfig;function Tn(e,t,s){if(e=s.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(a(309));var i=s.stateNode}if(!i)throw Error(a(147,e));var d=i,h=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===h?t.ref:(t=function(m){var b=d.refs;m===null?delete b[h]:b[h]=m},t._stringRef=h,t)}if(typeof e!="string")throw Error(a(284));if(!s._owner)throw Error(a(290,e))}return e}function Ia(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function dd(e){var t=e._init;return t(e._payload)}function ud(e){function t(T,k){if(e){var A=T.deletions;A===null?(T.deletions=[k],T.flags|=16):A.push(k)}}function s(T,k){if(!e)return null;for(;k!==null;)t(T,k),k=k.sibling;return null}function i(T,k){for(T=new Map;k!==null;)k.key!==null?T.set(k.key,k):T.set(k.index,k),k=k.sibling;return T}function d(T,k){return T=Hr(T,k),T.index=0,T.sibling=null,T}function h(T,k,A){return T.index=A,e?(A=T.alternate,A!==null?(A=A.index,A<k?(T.flags|=2,k):A):(T.flags|=2,k)):(T.flags|=1048576,k)}function m(T){return e&&T.alternate===null&&(T.flags|=2),T}function b(T,k,A,ee){return k===null||k.tag!==6?(k=oo(A,T.mode,ee),k.return=T,k):(k=d(k,A),k.return=T,k)}function _(T,k,A,ee){var we=A.type;return we===pe?Y(T,k,A.props.children,ee,A.key):k!==null&&(k.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===ye&&dd(we)===k.type)?(ee=d(k,A.props),ee.ref=Tn(T,k,A),ee.return=T,ee):(ee=si(A.type,A.key,A.props,null,T.mode,ee),ee.ref=Tn(T,k,A),ee.return=T,ee)}function R(T,k,A,ee){return k===null||k.tag!==4||k.stateNode.containerInfo!==A.containerInfo||k.stateNode.implementation!==A.implementation?(k=co(A,T.mode,ee),k.return=T,k):(k=d(k,A.children||[]),k.return=T,k)}function Y(T,k,A,ee,we){return k===null||k.tag!==7?(k=ds(A,T.mode,ee,we),k.return=T,k):(k=d(k,A),k.return=T,k)}function J(T,k,A){if(typeof k=="string"&&k!==""||typeof k=="number")return k=oo(""+k,T.mode,A),k.return=T,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case B:return A=si(k.type,k.key,k.props,null,T.mode,A),A.ref=Tn(T,null,k),A.return=T,A;case se:return k=co(k,T.mode,A),k.return=T,k;case ye:var ee=k._init;return J(T,ee(k._payload),A)}if(z(k)||$(k))return k=ds(k,T.mode,A,null),k.return=T,k;Ia(T,k)}return null}function G(T,k,A,ee){var we=k!==null?k.key:null;if(typeof A=="string"&&A!==""||typeof A=="number")return we!==null?null:b(T,k,""+A,ee);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case B:return A.key===we?_(T,k,A,ee):null;case se:return A.key===we?R(T,k,A,ee):null;case ye:return we=A._init,G(T,k,we(A._payload),ee)}if(z(A)||$(A))return we!==null?null:Y(T,k,A,ee,null);Ia(T,A)}return null}function fe(T,k,A,ee,we){if(typeof ee=="string"&&ee!==""||typeof ee=="number")return T=T.get(A)||null,b(k,T,""+ee,we);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case B:return T=T.get(ee.key===null?A:ee.key)||null,_(k,T,ee,we);case se:return T=T.get(ee.key===null?A:ee.key)||null,R(k,T,ee,we);case ye:var _e=ee._init;return fe(T,k,A,_e(ee._payload),we)}if(z(ee)||$(ee))return T=T.get(A)||null,Y(k,T,ee,we,null);Ia(k,ee)}return null}function xe(T,k,A,ee){for(var we=null,_e=null,ke=k,Ee=k=0,dt=null;ke!==null&&Ee<A.length;Ee++){ke.index>Ee?(dt=ke,ke=null):dt=ke.sibling;var Fe=G(T,ke,A[Ee],ee);if(Fe===null){ke===null&&(ke=dt);break}e&&ke&&Fe.alternate===null&&t(T,ke),k=h(Fe,k,Ee),_e===null?we=Fe:_e.sibling=Fe,_e=Fe,ke=dt}if(Ee===A.length)return s(T,ke),Qe&&rs(T,Ee),we;if(ke===null){for(;Ee<A.length;Ee++)ke=J(T,A[Ee],ee),ke!==null&&(k=h(ke,k,Ee),_e===null?we=ke:_e.sibling=ke,_e=ke);return Qe&&rs(T,Ee),we}for(ke=i(T,ke);Ee<A.length;Ee++)dt=fe(ke,T,Ee,A[Ee],ee),dt!==null&&(e&&dt.alternate!==null&&ke.delete(dt.key===null?Ee:dt.key),k=h(dt,k,Ee),_e===null?we=dt:_e.sibling=dt,_e=dt);return e&&ke.forEach(function(Wr){return t(T,Wr)}),Qe&&rs(T,Ee),we}function ve(T,k,A,ee){var we=$(A);if(typeof we!="function")throw Error(a(150));if(A=we.call(A),A==null)throw Error(a(151));for(var _e=we=null,ke=k,Ee=k=0,dt=null,Fe=A.next();ke!==null&&!Fe.done;Ee++,Fe=A.next()){ke.index>Ee?(dt=ke,ke=null):dt=ke.sibling;var Wr=G(T,ke,Fe.value,ee);if(Wr===null){ke===null&&(ke=dt);break}e&&ke&&Wr.alternate===null&&t(T,ke),k=h(Wr,k,Ee),_e===null?we=Wr:_e.sibling=Wr,_e=Wr,ke=dt}if(Fe.done)return s(T,ke),Qe&&rs(T,Ee),we;if(ke===null){for(;!Fe.done;Ee++,Fe=A.next())Fe=J(T,Fe.value,ee),Fe!==null&&(k=h(Fe,k,Ee),_e===null?we=Fe:_e.sibling=Fe,_e=Fe);return Qe&&rs(T,Ee),we}for(ke=i(T,ke);!Fe.done;Ee++,Fe=A.next())Fe=fe(ke,T,Ee,Fe.value,ee),Fe!==null&&(e&&Fe.alternate!==null&&ke.delete(Fe.key===null?Ee:Fe.key),k=h(Fe,k,Ee),_e===null?we=Fe:_e.sibling=Fe,_e=Fe);return e&&ke.forEach(function(Jm){return t(T,Jm)}),Qe&&rs(T,Ee),we}function et(T,k,A,ee){if(typeof A=="object"&&A!==null&&A.type===pe&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case B:e:{for(var we=A.key,_e=k;_e!==null;){if(_e.key===we){if(we=A.type,we===pe){if(_e.tag===7){s(T,_e.sibling),k=d(_e,A.props.children),k.return=T,T=k;break e}}else if(_e.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===ye&&dd(we)===_e.type){s(T,_e.sibling),k=d(_e,A.props),k.ref=Tn(T,_e,A),k.return=T,T=k;break e}s(T,_e);break}else t(T,_e);_e=_e.sibling}A.type===pe?(k=ds(A.props.children,T.mode,ee,A.key),k.return=T,T=k):(ee=si(A.type,A.key,A.props,null,T.mode,ee),ee.ref=Tn(T,k,A),ee.return=T,T=ee)}return m(T);case se:e:{for(_e=A.key;k!==null;){if(k.key===_e)if(k.tag===4&&k.stateNode.containerInfo===A.containerInfo&&k.stateNode.implementation===A.implementation){s(T,k.sibling),k=d(k,A.children||[]),k.return=T,T=k;break e}else{s(T,k);break}else t(T,k);k=k.sibling}k=co(A,T.mode,ee),k.return=T,T=k}return m(T);case ye:return _e=A._init,et(T,k,_e(A._payload),ee)}if(z(A))return xe(T,k,A,ee);if($(A))return ve(T,k,A,ee);Ia(T,A)}return typeof A=="string"&&A!==""||typeof A=="number"?(A=""+A,k!==null&&k.tag===6?(s(T,k.sibling),k=d(k,A),k.return=T,T=k):(s(T,k),k=oo(A,T.mode,ee),k.return=T,T=k),m(T)):s(T,k)}return et}var Os=ud(!0),hd=ud(!1),Oa=Rr(null),Ra=null,Rs=null,yl=null;function vl(){yl=Rs=Ra=null}function wl(e){var t=Oa.current;Ke(Oa),e._currentValue=t}function bl(e,t,s){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===s)break;e=e.return}}function Ms(e,t){Ra=e,yl=Rs=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(Tt=!0),e.firstContext=null)}function zt(e){var t=e._currentValue;if(yl!==e)if(e={context:e,memoizedValue:t,next:null},Rs===null){if(Ra===null)throw Error(a(308));Rs=e,Ra.dependencies={lanes:0,firstContext:e}}else Rs=Rs.next=e;return t}var ss=null;function jl(e){ss===null?ss=[e]:ss.push(e)}function fd(e,t,s,i){var d=t.interleaved;return d===null?(s.next=s,jl(t)):(s.next=d.next,d.next=s),t.interleaved=s,yr(e,i)}function yr(e,t){e.lanes|=t;var s=e.alternate;for(s!==null&&(s.lanes|=t),s=e,e=e.return;e!==null;)e.childLanes|=t,s=e.alternate,s!==null&&(s.childLanes|=t),s=e,e=e.return;return s.tag===3?s.stateNode:null}var $r=!1;function Nl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function md(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function vr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ur(e,t,s){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,(Ue&2)!==0){var d=i.pending;return d===null?t.next=t:(t.next=d.next,d.next=t),i.pending=t,yr(e,s)}return d=i.interleaved,d===null?(t.next=t,jl(i)):(t.next=d.next,d.next=t),i.interleaved=t,yr(e,s)}function Ma(e,t,s){if(t=t.updateQueue,t!==null&&(t=t.shared,(s&4194240)!==0)){var i=t.lanes;i&=e.pendingLanes,s|=i,t.lanes=s,Li(e,s)}}function pd(e,t){var s=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,s===i)){var d=null,h=null;if(s=s.firstBaseUpdate,s!==null){do{var m={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};h===null?d=h=m:h=h.next=m,s=s.next}while(s!==null);h===null?d=h=t:h=h.next=t}else d=h=t;s={baseState:i.baseState,firstBaseUpdate:d,lastBaseUpdate:h,shared:i.shared,effects:i.effects},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}function La(e,t,s,i){var d=e.updateQueue;$r=!1;var h=d.firstBaseUpdate,m=d.lastBaseUpdate,b=d.shared.pending;if(b!==null){d.shared.pending=null;var _=b,R=_.next;_.next=null,m===null?h=R:m.next=R,m=_;var Y=e.alternate;Y!==null&&(Y=Y.updateQueue,b=Y.lastBaseUpdate,b!==m&&(b===null?Y.firstBaseUpdate=R:b.next=R,Y.lastBaseUpdate=_))}if(h!==null){var J=d.baseState;m=0,Y=R=_=null,b=h;do{var G=b.lane,fe=b.eventTime;if((i&G)===G){Y!==null&&(Y=Y.next={eventTime:fe,lane:0,tag:b.tag,payload:b.payload,callback:b.callback,next:null});e:{var xe=e,ve=b;switch(G=t,fe=s,ve.tag){case 1:if(xe=ve.payload,typeof xe=="function"){J=xe.call(fe,J,G);break e}J=xe;break e;case 3:xe.flags=xe.flags&-65537|128;case 0:if(xe=ve.payload,G=typeof xe=="function"?xe.call(fe,J,G):xe,G==null)break e;J=O({},J,G);break e;case 2:$r=!0}}b.callback!==null&&b.lane!==0&&(e.flags|=64,G=d.effects,G===null?d.effects=[b]:G.push(b))}else fe={eventTime:fe,lane:G,tag:b.tag,payload:b.payload,callback:b.callback,next:null},Y===null?(R=Y=fe,_=J):Y=Y.next=fe,m|=G;if(b=b.next,b===null){if(b=d.shared.pending,b===null)break;G=b,b=G.next,G.next=null,d.lastBaseUpdate=G,d.shared.pending=null}}while(!0);if(Y===null&&(_=J),d.baseState=_,d.firstBaseUpdate=R,d.lastBaseUpdate=Y,t=d.shared.interleaved,t!==null){d=t;do m|=d.lane,d=d.next;while(d!==t)}else h===null&&(d.shared.lanes=0);is|=m,e.lanes=m,e.memoizedState=J}}function gd(e,t,s){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],d=i.callback;if(d!==null){if(i.callback=null,i=s,typeof d!="function")throw Error(a(191,d));d.call(i)}}}var Pn={},ir=Rr(Pn),Dn=Rr(Pn),An=Rr(Pn);function ns(e){if(e===Pn)throw Error(a(174));return e}function _l(e,t){switch(Ve(An,t),Ve(Dn,e),Ve(ir,Pn),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:E(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=E(t,e)}Ke(ir),Ve(ir,t)}function Ls(){Ke(ir),Ke(Dn),Ke(An)}function xd(e){ns(An.current);var t=ns(ir.current),s=E(t,e.type);t!==s&&(Ve(Dn,e),Ve(ir,s))}function kl(e){Dn.current===e&&(Ke(ir),Ke(Dn))}var Ge=Rr(0);function $a(e){for(var t=e;t!==null;){if(t.tag===13){var s=t.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Sl=[];function Cl(){for(var e=0;e<Sl.length;e++)Sl[e]._workInProgressVersionPrimary=null;Sl.length=0}var Ua=X.ReactCurrentDispatcher,El=X.ReactCurrentBatchConfig,as=0,Ye=null,rt=null,ot=null,Fa=!1,In=!1,On=0,vm=0;function gt(){throw Error(a(321))}function Tl(e,t){if(t===null)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!Qt(e[s],t[s]))return!1;return!0}function Pl(e,t,s,i,d,h){if(as=h,Ye=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ua.current=e===null||e.memoizedState===null?Nm:_m,e=s(i,d),In){h=0;do{if(In=!1,On=0,25<=h)throw Error(a(301));h+=1,ot=rt=null,t.updateQueue=null,Ua.current=km,e=s(i,d)}while(In)}if(Ua.current=Ba,t=rt!==null&&rt.next!==null,as=0,ot=rt=Ye=null,Fa=!1,t)throw Error(a(300));return e}function Dl(){var e=On!==0;return On=0,e}function lr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ot===null?Ye.memoizedState=ot=e:ot=ot.next=e,ot}function qt(){if(rt===null){var e=Ye.alternate;e=e!==null?e.memoizedState:null}else e=rt.next;var t=ot===null?Ye.memoizedState:ot.next;if(t!==null)ot=t,rt=e;else{if(e===null)throw Error(a(310));rt=e,e={memoizedState:rt.memoizedState,baseState:rt.baseState,baseQueue:rt.baseQueue,queue:rt.queue,next:null},ot===null?Ye.memoizedState=ot=e:ot=ot.next=e}return ot}function Rn(e,t){return typeof t=="function"?t(e):t}function Al(e){var t=qt(),s=t.queue;if(s===null)throw Error(a(311));s.lastRenderedReducer=e;var i=rt,d=i.baseQueue,h=s.pending;if(h!==null){if(d!==null){var m=d.next;d.next=h.next,h.next=m}i.baseQueue=d=h,s.pending=null}if(d!==null){h=d.next,i=i.baseState;var b=m=null,_=null,R=h;do{var Y=R.lane;if((as&Y)===Y)_!==null&&(_=_.next={lane:0,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null}),i=R.hasEagerState?R.eagerState:e(i,R.action);else{var J={lane:Y,action:R.action,hasEagerState:R.hasEagerState,eagerState:R.eagerState,next:null};_===null?(b=_=J,m=i):_=_.next=J,Ye.lanes|=Y,is|=Y}R=R.next}while(R!==null&&R!==h);_===null?m=i:_.next=b,Qt(i,t.memoizedState)||(Tt=!0),t.memoizedState=i,t.baseState=m,t.baseQueue=_,s.lastRenderedState=i}if(e=s.interleaved,e!==null){d=e;do h=d.lane,Ye.lanes|=h,is|=h,d=d.next;while(d!==e)}else d===null&&(s.lanes=0);return[t.memoizedState,s.dispatch]}function Il(e){var t=qt(),s=t.queue;if(s===null)throw Error(a(311));s.lastRenderedReducer=e;var i=s.dispatch,d=s.pending,h=t.memoizedState;if(d!==null){s.pending=null;var m=d=d.next;do h=e(h,m.action),m=m.next;while(m!==d);Qt(h,t.memoizedState)||(Tt=!0),t.memoizedState=h,t.baseQueue===null&&(t.baseState=h),s.lastRenderedState=h}return[h,i]}function yd(){}function vd(e,t){var s=Ye,i=qt(),d=t(),h=!Qt(i.memoizedState,d);if(h&&(i.memoizedState=d,Tt=!0),i=i.queue,Ol(jd.bind(null,s,i,e),[e]),i.getSnapshot!==t||h||ot!==null&&ot.memoizedState.tag&1){if(s.flags|=2048,Mn(9,bd.bind(null,s,i,d,t),void 0,null),ct===null)throw Error(a(349));(as&30)!==0||wd(s,t,d)}return d}function wd(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},t=Ye.updateQueue,t===null?(t={lastEffect:null,stores:null},Ye.updateQueue=t,t.stores=[e]):(s=t.stores,s===null?t.stores=[e]:s.push(e))}function bd(e,t,s,i){t.value=s,t.getSnapshot=i,Nd(t)&&_d(e)}function jd(e,t,s){return s(function(){Nd(t)&&_d(e)})}function Nd(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!Qt(e,s)}catch{return!0}}function _d(e){var t=yr(e,1);t!==null&&Zt(t,e,1,-1)}function kd(e){var t=lr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Rn,lastRenderedState:e},t.queue=e,e=e.dispatch=jm.bind(null,Ye,e),[t.memoizedState,e]}function Mn(e,t,s,i){return e={tag:e,create:t,destroy:s,deps:i,next:null},t=Ye.updateQueue,t===null?(t={lastEffect:null,stores:null},Ye.updateQueue=t,t.lastEffect=e.next=e):(s=t.lastEffect,s===null?t.lastEffect=e.next=e:(i=s.next,s.next=e,e.next=i,t.lastEffect=e)),e}function Sd(){return qt().memoizedState}function za(e,t,s,i){var d=lr();Ye.flags|=e,d.memoizedState=Mn(1|t,s,void 0,i===void 0?null:i)}function qa(e,t,s,i){var d=qt();i=i===void 0?null:i;var h=void 0;if(rt!==null){var m=rt.memoizedState;if(h=m.destroy,i!==null&&Tl(i,m.deps)){d.memoizedState=Mn(t,s,h,i);return}}Ye.flags|=e,d.memoizedState=Mn(1|t,s,h,i)}function Cd(e,t){return za(8390656,8,e,t)}function Ol(e,t){return qa(2048,8,e,t)}function Ed(e,t){return qa(4,2,e,t)}function Td(e,t){return qa(4,4,e,t)}function Pd(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Dd(e,t,s){return s=s!=null?s.concat([e]):null,qa(4,4,Pd.bind(null,t,e),s)}function Rl(){}function Ad(e,t){var s=qt();t=t===void 0?null:t;var i=s.memoizedState;return i!==null&&t!==null&&Tl(t,i[1])?i[0]:(s.memoizedState=[e,t],e)}function Id(e,t){var s=qt();t=t===void 0?null:t;var i=s.memoizedState;return i!==null&&t!==null&&Tl(t,i[1])?i[0]:(e=e(),s.memoizedState=[e,t],e)}function Od(e,t,s){return(as&21)===0?(e.baseState&&(e.baseState=!1,Tt=!0),e.memoizedState=s):(Qt(s,t)||(s=dc(),Ye.lanes|=s,is|=s,e.baseState=!0),t)}function wm(e,t){var s=Be;Be=s!==0&&4>s?s:4,e(!0);var i=El.transition;El.transition={};try{e(!1),t()}finally{Be=s,El.transition=i}}function Rd(){return qt().memoizedState}function bm(e,t,s){var i=Br(e);if(s={lane:i,action:s,hasEagerState:!1,eagerState:null,next:null},Md(e))Ld(t,s);else if(s=fd(e,t,s,i),s!==null){var d=_t();Zt(s,e,i,d),$d(s,t,i)}}function jm(e,t,s){var i=Br(e),d={lane:i,action:s,hasEagerState:!1,eagerState:null,next:null};if(Md(e))Ld(t,d);else{var h=e.alternate;if(e.lanes===0&&(h===null||h.lanes===0)&&(h=t.lastRenderedReducer,h!==null))try{var m=t.lastRenderedState,b=h(m,s);if(d.hasEagerState=!0,d.eagerState=b,Qt(b,m)){var _=t.interleaved;_===null?(d.next=d,jl(t)):(d.next=_.next,_.next=d),t.interleaved=d;return}}catch{}finally{}s=fd(e,t,d,i),s!==null&&(d=_t(),Zt(s,e,i,d),$d(s,t,i))}}function Md(e){var t=e.alternate;return e===Ye||t!==null&&t===Ye}function Ld(e,t){In=Fa=!0;var s=e.pending;s===null?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function $d(e,t,s){if((s&4194240)!==0){var i=t.lanes;i&=e.pendingLanes,s|=i,t.lanes=s,Li(e,s)}}var Ba={readContext:zt,useCallback:gt,useContext:gt,useEffect:gt,useImperativeHandle:gt,useInsertionEffect:gt,useLayoutEffect:gt,useMemo:gt,useReducer:gt,useRef:gt,useState:gt,useDebugValue:gt,useDeferredValue:gt,useTransition:gt,useMutableSource:gt,useSyncExternalStore:gt,useId:gt,unstable_isNewReconciler:!1},Nm={readContext:zt,useCallback:function(e,t){return lr().memoizedState=[e,t===void 0?null:t],e},useContext:zt,useEffect:Cd,useImperativeHandle:function(e,t,s){return s=s!=null?s.concat([e]):null,za(4194308,4,Pd.bind(null,t,e),s)},useLayoutEffect:function(e,t){return za(4194308,4,e,t)},useInsertionEffect:function(e,t){return za(4,2,e,t)},useMemo:function(e,t){var s=lr();return t=t===void 0?null:t,e=e(),s.memoizedState=[e,t],e},useReducer:function(e,t,s){var i=lr();return t=s!==void 0?s(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=bm.bind(null,Ye,e),[i.memoizedState,e]},useRef:function(e){var t=lr();return e={current:e},t.memoizedState=e},useState:kd,useDebugValue:Rl,useDeferredValue:function(e){return lr().memoizedState=e},useTransition:function(){var e=kd(!1),t=e[0];return e=wm.bind(null,e[1]),lr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,s){var i=Ye,d=lr();if(Qe){if(s===void 0)throw Error(a(407));s=s()}else{if(s=t(),ct===null)throw Error(a(349));(as&30)!==0||wd(i,t,s)}d.memoizedState=s;var h={value:s,getSnapshot:t};return d.queue=h,Cd(jd.bind(null,i,h,e),[e]),i.flags|=2048,Mn(9,bd.bind(null,i,h,s,t),void 0,null),s},useId:function(){var e=lr(),t=ct.identifierPrefix;if(Qe){var s=xr,i=gr;s=(i&~(1<<32-Kt(i)-1)).toString(32)+s,t=":"+t+"R"+s,s=On++,0<s&&(t+="H"+s.toString(32)),t+=":"}else s=vm++,t=":"+t+"r"+s.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},_m={readContext:zt,useCallback:Ad,useContext:zt,useEffect:Ol,useImperativeHandle:Dd,useInsertionEffect:Ed,useLayoutEffect:Td,useMemo:Id,useReducer:Al,useRef:Sd,useState:function(){return Al(Rn)},useDebugValue:Rl,useDeferredValue:function(e){var t=qt();return Od(t,rt.memoizedState,e)},useTransition:function(){var e=Al(Rn)[0],t=qt().memoizedState;return[e,t]},useMutableSource:yd,useSyncExternalStore:vd,useId:Rd,unstable_isNewReconciler:!1},km={readContext:zt,useCallback:Ad,useContext:zt,useEffect:Ol,useImperativeHandle:Dd,useInsertionEffect:Ed,useLayoutEffect:Td,useMemo:Id,useReducer:Il,useRef:Sd,useState:function(){return Il(Rn)},useDebugValue:Rl,useDeferredValue:function(e){var t=qt();return rt===null?t.memoizedState=e:Od(t,rt.memoizedState,e)},useTransition:function(){var e=Il(Rn)[0],t=qt().memoizedState;return[e,t]},useMutableSource:yd,useSyncExternalStore:vd,useId:Rd,unstable_isNewReconciler:!1};function Yt(e,t){if(e&&e.defaultProps){t=O({},t),e=e.defaultProps;for(var s in e)t[s]===void 0&&(t[s]=e[s]);return t}return t}function Ml(e,t,s,i){t=e.memoizedState,s=s(i,t),s=s==null?t:O({},t,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var Va={isMounted:function(e){return(e=e._reactInternals)?Xr(e)===e:!1},enqueueSetState:function(e,t,s){e=e._reactInternals;var i=_t(),d=Br(e),h=vr(i,d);h.payload=t,s!=null&&(h.callback=s),t=Ur(e,h,d),t!==null&&(Zt(t,e,d,i),Ma(t,e,d))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var i=_t(),d=Br(e),h=vr(i,d);h.tag=1,h.payload=t,s!=null&&(h.callback=s),t=Ur(e,h,d),t!==null&&(Zt(t,e,d,i),Ma(t,e,d))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=_t(),i=Br(e),d=vr(s,i);d.tag=2,t!=null&&(d.callback=t),t=Ur(e,d,i),t!==null&&(Zt(t,e,i,s),Ma(t,e,i))}};function Ud(e,t,s,i,d,h,m){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,h,m):t.prototype&&t.prototype.isPureReactComponent?!jn(s,i)||!jn(d,h):!0}function Fd(e,t,s){var i=!1,d=Mr,h=t.contextType;return typeof h=="object"&&h!==null?h=zt(h):(d=Et(t)?es:pt.current,i=t.contextTypes,h=(i=i!=null)?Ps(e,d):Mr),t=new t(s,h),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Va,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=d,e.__reactInternalMemoizedMaskedChildContext=h),t}function zd(e,t,s,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(s,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(s,i),t.state!==e&&Va.enqueueReplaceState(t,t.state,null)}function Ll(e,t,s,i){var d=e.stateNode;d.props=s,d.state=e.memoizedState,d.refs={},Nl(e);var h=t.contextType;typeof h=="object"&&h!==null?d.context=zt(h):(h=Et(t)?es:pt.current,d.context=Ps(e,h)),d.state=e.memoizedState,h=t.getDerivedStateFromProps,typeof h=="function"&&(Ml(e,t,h,s),d.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(t=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),t!==d.state&&Va.enqueueReplaceState(d,d.state,null),La(e,s,d,i),d.state=e.memoizedState),typeof d.componentDidMount=="function"&&(e.flags|=4194308)}function $s(e,t){try{var s="",i=t;do s+=S(i),i=i.return;while(i);var d=s}catch(h){d=`
Error generating stack: `+h.message+`
`+h.stack}return{value:e,source:t,stack:d,digest:null}}function $l(e,t,s){return{value:e,source:null,stack:s??null,digest:t??null}}function Ul(e,t){try{console.error(t.value)}catch(s){setTimeout(function(){throw s})}}var Sm=typeof WeakMap=="function"?WeakMap:Map;function qd(e,t,s){s=vr(-1,s),s.tag=3,s.payload={element:null};var i=t.value;return s.callback=function(){Ja||(Ja=!0,eo=i),Ul(e,t)},s}function Bd(e,t,s){s=vr(-1,s),s.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var d=t.value;s.payload=function(){return i(d)},s.callback=function(){Ul(e,t)}}var h=e.stateNode;return h!==null&&typeof h.componentDidCatch=="function"&&(s.callback=function(){Ul(e,t),typeof i!="function"&&(zr===null?zr=new Set([this]):zr.add(this));var m=t.stack;this.componentDidCatch(t.value,{componentStack:m!==null?m:""})}),s}function Vd(e,t,s){var i=e.pingCache;if(i===null){i=e.pingCache=new Sm;var d=new Set;i.set(t,d)}else d=i.get(t),d===void 0&&(d=new Set,i.set(t,d));d.has(s)||(d.add(s),e=Fm.bind(null,e,t,s),t.then(e,e))}function Hd(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Wd(e,t,s,i,d){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(t=vr(-1,1),t.tag=2,Ur(s,t,1))),s.lanes|=1),e):(e.flags|=65536,e.lanes=d,e)}var Cm=X.ReactCurrentOwner,Tt=!1;function Nt(e,t,s,i){t.child=e===null?hd(t,null,s,i):Os(t,e.child,s,i)}function Kd(e,t,s,i,d){s=s.render;var h=t.ref;return Ms(t,d),i=Pl(e,t,s,i,h,d),s=Dl(),e!==null&&!Tt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~d,wr(e,t,d)):(Qe&&s&&fl(t),t.flags|=1,Nt(e,t,i,d),t.child)}function Qd(e,t,s,i,d){if(e===null){var h=s.type;return typeof h=="function"&&!lo(h)&&h.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(t.tag=15,t.type=h,Gd(e,t,h,i,d)):(e=si(s.type,null,i,t,t.mode,d),e.ref=t.ref,e.return=t,t.child=e)}if(h=e.child,(e.lanes&d)===0){var m=h.memoizedProps;if(s=s.compare,s=s!==null?s:jn,s(m,i)&&e.ref===t.ref)return wr(e,t,d)}return t.flags|=1,e=Hr(h,i),e.ref=t.ref,e.return=t,t.child=e}function Gd(e,t,s,i,d){if(e!==null){var h=e.memoizedProps;if(jn(h,i)&&e.ref===t.ref)if(Tt=!1,t.pendingProps=i=h,(e.lanes&d)!==0)(e.flags&131072)!==0&&(Tt=!0);else return t.lanes=e.lanes,wr(e,t,d)}return Fl(e,t,s,i,d)}function Yd(e,t,s){var i=t.pendingProps,d=i.children,h=e!==null?e.memoizedState:null;if(i.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ve(Fs,$t),$t|=s;else{if((s&1073741824)===0)return e=h!==null?h.baseLanes|s:s,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ve(Fs,$t),$t|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=h!==null?h.baseLanes:s,Ve(Fs,$t),$t|=i}else h!==null?(i=h.baseLanes|s,t.memoizedState=null):i=s,Ve(Fs,$t),$t|=i;return Nt(e,t,d,s),t.child}function Jd(e,t){var s=t.ref;(e===null&&s!==null||e!==null&&e.ref!==s)&&(t.flags|=512,t.flags|=2097152)}function Fl(e,t,s,i,d){var h=Et(s)?es:pt.current;return h=Ps(t,h),Ms(t,d),s=Pl(e,t,s,i,h,d),i=Dl(),e!==null&&!Tt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~d,wr(e,t,d)):(Qe&&i&&fl(t),t.flags|=1,Nt(e,t,s,d),t.child)}function Xd(e,t,s,i,d){if(Et(s)){var h=!0;Ea(t)}else h=!1;if(Ms(t,d),t.stateNode===null)Wa(e,t),Fd(t,s,i),Ll(t,s,i,d),i=!0;else if(e===null){var m=t.stateNode,b=t.memoizedProps;m.props=b;var _=m.context,R=s.contextType;typeof R=="object"&&R!==null?R=zt(R):(R=Et(s)?es:pt.current,R=Ps(t,R));var Y=s.getDerivedStateFromProps,J=typeof Y=="function"||typeof m.getSnapshotBeforeUpdate=="function";J||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(b!==i||_!==R)&&zd(t,m,i,R),$r=!1;var G=t.memoizedState;m.state=G,La(t,i,m,d),_=t.memoizedState,b!==i||G!==_||Ct.current||$r?(typeof Y=="function"&&(Ml(t,s,Y,i),_=t.memoizedState),(b=$r||Ud(t,s,b,i,G,_,R))?(J||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(t.flags|=4194308)):(typeof m.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=_),m.props=i,m.state=_,m.context=R,i=b):(typeof m.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{m=t.stateNode,md(e,t),b=t.memoizedProps,R=t.type===t.elementType?b:Yt(t.type,b),m.props=R,J=t.pendingProps,G=m.context,_=s.contextType,typeof _=="object"&&_!==null?_=zt(_):(_=Et(s)?es:pt.current,_=Ps(t,_));var fe=s.getDerivedStateFromProps;(Y=typeof fe=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(b!==J||G!==_)&&zd(t,m,i,_),$r=!1,G=t.memoizedState,m.state=G,La(t,i,m,d);var xe=t.memoizedState;b!==J||G!==xe||Ct.current||$r?(typeof fe=="function"&&(Ml(t,s,fe,i),xe=t.memoizedState),(R=$r||Ud(t,s,R,i,G,xe,_)||!1)?(Y||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(i,xe,_),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(i,xe,_)),typeof m.componentDidUpdate=="function"&&(t.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof m.componentDidUpdate!="function"||b===e.memoizedProps&&G===e.memoizedState||(t.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&G===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=xe),m.props=i,m.state=xe,m.context=_,i=R):(typeof m.componentDidUpdate!="function"||b===e.memoizedProps&&G===e.memoizedState||(t.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&G===e.memoizedState||(t.flags|=1024),i=!1)}return zl(e,t,s,i,h,d)}function zl(e,t,s,i,d,h){Jd(e,t);var m=(t.flags&128)!==0;if(!i&&!m)return d&&sd(t,s,!1),wr(e,t,h);i=t.stateNode,Cm.current=t;var b=m&&typeof s.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&m?(t.child=Os(t,e.child,null,h),t.child=Os(t,null,b,h)):Nt(e,t,b,h),t.memoizedState=i.state,d&&sd(t,s,!0),t.child}function Zd(e){var t=e.stateNode;t.pendingContext?td(e,t.pendingContext,t.pendingContext!==t.context):t.context&&td(e,t.context,!1),_l(e,t.containerInfo)}function eu(e,t,s,i,d){return Is(),xl(d),t.flags|=256,Nt(e,t,s,i),t.child}var ql={dehydrated:null,treeContext:null,retryLane:0};function Bl(e){return{baseLanes:e,cachePool:null,transitions:null}}function tu(e,t,s){var i=t.pendingProps,d=Ge.current,h=!1,m=(t.flags&128)!==0,b;if((b=m)||(b=e!==null&&e.memoizedState===null?!1:(d&2)!==0),b?(h=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(d|=1),Ve(Ge,d&1),e===null)return gl(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(m=i.children,e=i.fallback,h?(i=t.mode,h=t.child,m={mode:"hidden",children:m},(i&1)===0&&h!==null?(h.childLanes=0,h.pendingProps=m):h=ni(m,i,0,null),e=ds(e,i,s,null),h.return=t,e.return=t,h.sibling=e,t.child=h,t.child.memoizedState=Bl(s),t.memoizedState=ql,e):Vl(t,m));if(d=e.memoizedState,d!==null&&(b=d.dehydrated,b!==null))return Em(e,t,m,i,b,d,s);if(h){h=i.fallback,m=t.mode,d=e.child,b=d.sibling;var _={mode:"hidden",children:i.children};return(m&1)===0&&t.child!==d?(i=t.child,i.childLanes=0,i.pendingProps=_,t.deletions=null):(i=Hr(d,_),i.subtreeFlags=d.subtreeFlags&14680064),b!==null?h=Hr(b,h):(h=ds(h,m,s,null),h.flags|=2),h.return=t,i.return=t,i.sibling=h,t.child=i,i=h,h=t.child,m=e.child.memoizedState,m=m===null?Bl(s):{baseLanes:m.baseLanes|s,cachePool:null,transitions:m.transitions},h.memoizedState=m,h.childLanes=e.childLanes&~s,t.memoizedState=ql,i}return h=e.child,e=h.sibling,i=Hr(h,{mode:"visible",children:i.children}),(t.mode&1)===0&&(i.lanes=s),i.return=t,i.sibling=null,e!==null&&(s=t.deletions,s===null?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=i,t.memoizedState=null,i}function Vl(e,t){return t=ni({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ha(e,t,s,i){return i!==null&&xl(i),Os(t,e.child,null,s),e=Vl(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Em(e,t,s,i,d,h,m){if(s)return t.flags&256?(t.flags&=-257,i=$l(Error(a(422))),Ha(e,t,m,i)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(h=i.fallback,d=t.mode,i=ni({mode:"visible",children:i.children},d,0,null),h=ds(h,d,m,null),h.flags|=2,i.return=t,h.return=t,i.sibling=h,t.child=i,(t.mode&1)!==0&&Os(t,e.child,null,m),t.child.memoizedState=Bl(m),t.memoizedState=ql,h);if((t.mode&1)===0)return Ha(e,t,m,null);if(d.data==="$!"){if(i=d.nextSibling&&d.nextSibling.dataset,i)var b=i.dgst;return i=b,h=Error(a(419)),i=$l(h,i,void 0),Ha(e,t,m,i)}if(b=(m&e.childLanes)!==0,Tt||b){if(i=ct,i!==null){switch(m&-m){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(i.suspendedLanes|m))!==0?0:d,d!==0&&d!==h.retryLane&&(h.retryLane=d,yr(e,d),Zt(i,e,d,-1))}return io(),i=$l(Error(a(421))),Ha(e,t,m,i)}return d.data==="$?"?(t.flags|=128,t.child=e.child,t=zm.bind(null,e),d._reactRetry=t,null):(e=h.treeContext,Lt=Or(d.nextSibling),Mt=t,Qe=!0,Gt=null,e!==null&&(Ut[Ft++]=gr,Ut[Ft++]=xr,Ut[Ft++]=ts,gr=e.id,xr=e.overflow,ts=t),t=Vl(t,i.children),t.flags|=4096,t)}function ru(e,t,s){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),bl(e.return,t,s)}function Hl(e,t,s,i,d){var h=e.memoizedState;h===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:s,tailMode:d}:(h.isBackwards=t,h.rendering=null,h.renderingStartTime=0,h.last=i,h.tail=s,h.tailMode=d)}function su(e,t,s){var i=t.pendingProps,d=i.revealOrder,h=i.tail;if(Nt(e,t,i.children,s),i=Ge.current,(i&2)!==0)i=i&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ru(e,s,t);else if(e.tag===19)ru(e,s,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(Ve(Ge,i),(t.mode&1)===0)t.memoizedState=null;else switch(d){case"forwards":for(s=t.child,d=null;s!==null;)e=s.alternate,e!==null&&$a(e)===null&&(d=s),s=s.sibling;s=d,s===null?(d=t.child,t.child=null):(d=s.sibling,s.sibling=null),Hl(t,!1,d,s,h);break;case"backwards":for(s=null,d=t.child,t.child=null;d!==null;){if(e=d.alternate,e!==null&&$a(e)===null){t.child=d;break}e=d.sibling,d.sibling=s,s=d,d=e}Hl(t,!0,s,null,h);break;case"together":Hl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wa(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function wr(e,t,s){if(e!==null&&(t.dependencies=e.dependencies),is|=t.lanes,(s&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(a(153));if(t.child!==null){for(e=t.child,s=Hr(e,e.pendingProps),t.child=s,s.return=t;e.sibling!==null;)e=e.sibling,s=s.sibling=Hr(e,e.pendingProps),s.return=t;s.sibling=null}return t.child}function Tm(e,t,s){switch(t.tag){case 3:Zd(t),Is();break;case 5:xd(t);break;case 1:Et(t.type)&&Ea(t);break;case 4:_l(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,d=t.memoizedProps.value;Ve(Oa,i._currentValue),i._currentValue=d;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(Ve(Ge,Ge.current&1),t.flags|=128,null):(s&t.child.childLanes)!==0?tu(e,t,s):(Ve(Ge,Ge.current&1),e=wr(e,t,s),e!==null?e.sibling:null);Ve(Ge,Ge.current&1);break;case 19:if(i=(s&t.childLanes)!==0,(e.flags&128)!==0){if(i)return su(e,t,s);t.flags|=128}if(d=t.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Ve(Ge,Ge.current),i)break;return null;case 22:case 23:return t.lanes=0,Yd(e,t,s)}return wr(e,t,s)}var nu,Wl,au,iu;nu=function(e,t){for(var s=t.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return;s=s.return}s.sibling.return=s.return,s=s.sibling}},Wl=function(){},au=function(e,t,s,i){var d=e.memoizedProps;if(d!==i){e=t.stateNode,ns(ir.current);var h=null;switch(s){case"input":d=Le(e,d),i=Le(e,i),h=[];break;case"select":d=O({},d,{value:void 0}),i=O({},i,{value:void 0}),h=[];break;case"textarea":d=Te(e,d),i=Te(e,i),h=[];break;default:typeof d.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=ka)}ys(s,i);var m;s=null;for(R in d)if(!i.hasOwnProperty(R)&&d.hasOwnProperty(R)&&d[R]!=null)if(R==="style"){var b=d[R];for(m in b)b.hasOwnProperty(m)&&(s||(s={}),s[m]="")}else R!=="dangerouslySetInnerHTML"&&R!=="children"&&R!=="suppressContentEditableWarning"&&R!=="suppressHydrationWarning"&&R!=="autoFocus"&&(o.hasOwnProperty(R)?h||(h=[]):(h=h||[]).push(R,null));for(R in i){var _=i[R];if(b=d!=null?d[R]:void 0,i.hasOwnProperty(R)&&_!==b&&(_!=null||b!=null))if(R==="style")if(b){for(m in b)!b.hasOwnProperty(m)||_&&_.hasOwnProperty(m)||(s||(s={}),s[m]="");for(m in _)_.hasOwnProperty(m)&&b[m]!==_[m]&&(s||(s={}),s[m]=_[m])}else s||(h||(h=[]),h.push(R,s)),s=_;else R==="dangerouslySetInnerHTML"?(_=_?_.__html:void 0,b=b?b.__html:void 0,_!=null&&b!==_&&(h=h||[]).push(R,_)):R==="children"?typeof _!="string"&&typeof _!="number"||(h=h||[]).push(R,""+_):R!=="suppressContentEditableWarning"&&R!=="suppressHydrationWarning"&&(o.hasOwnProperty(R)?(_!=null&&R==="onScroll"&&We("scroll",e),h||b===_||(h=[])):(h=h||[]).push(R,_))}s&&(h=h||[]).push("style",s);var R=h;(t.updateQueue=R)&&(t.flags|=4)}},iu=function(e,t,s,i){s!==i&&(t.flags|=4)};function Ln(e,t){if(!Qe)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var i=null;s!==null;)s.alternate!==null&&(i=s),s=s.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function xt(e){var t=e.alternate!==null&&e.alternate.child===e.child,s=0,i=0;if(t)for(var d=e.child;d!==null;)s|=d.lanes|d.childLanes,i|=d.subtreeFlags&14680064,i|=d.flags&14680064,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)s|=d.lanes|d.childLanes,i|=d.subtreeFlags,i|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=i,e.childLanes=s,t}function Pm(e,t,s){var i=t.pendingProps;switch(ml(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xt(t),null;case 1:return Et(t.type)&&Ca(),xt(t),null;case 3:return i=t.stateNode,Ls(),Ke(Ct),Ke(pt),Cl(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(Aa(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Gt!==null&&(so(Gt),Gt=null))),Wl(e,t),xt(t),null;case 5:kl(t);var d=ns(An.current);if(s=t.type,e!==null&&t.stateNode!=null)au(e,t,s,i,d),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(a(166));return xt(t),null}if(e=ns(ir.current),Aa(t)){i=t.stateNode,s=t.type;var h=t.memoizedProps;switch(i[ar]=t,i[Cn]=h,e=(t.mode&1)!==0,s){case"dialog":We("cancel",i),We("close",i);break;case"iframe":case"object":case"embed":We("load",i);break;case"video":case"audio":for(d=0;d<_n.length;d++)We(_n[d],i);break;case"source":We("error",i);break;case"img":case"image":case"link":We("error",i),We("load",i);break;case"details":We("toggle",i);break;case"input":it(i,h),We("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!h.multiple},We("invalid",i);break;case"textarea":he(i,h),We("invalid",i)}ys(s,h),d=null;for(var m in h)if(h.hasOwnProperty(m)){var b=h[m];m==="children"?typeof b=="string"?i.textContent!==b&&(h.suppressHydrationWarning!==!0&&_a(i.textContent,b,e),d=["children",b]):typeof b=="number"&&i.textContent!==""+b&&(h.suppressHydrationWarning!==!0&&_a(i.textContent,b,e),d=["children",""+b]):o.hasOwnProperty(m)&&b!=null&&m==="onScroll"&&We("scroll",i)}switch(s){case"input":L(i),lt(i,h,!0);break;case"textarea":L(i),Je(i);break;case"select":case"option":break;default:typeof h.onClick=="function"&&(i.onclick=ka)}i=d,t.updateQueue=i,i!==null&&(t.flags|=4)}else{m=d.nodeType===9?d:d.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=w(s)),e==="http://www.w3.org/1999/xhtml"?s==="script"?(e=m.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=m.createElement(s,{is:i.is}):(e=m.createElement(s),s==="select"&&(m=e,i.multiple?m.multiple=!0:i.size&&(m.size=i.size))):e=m.createElementNS(e,s),e[ar]=t,e[Cn]=i,nu(e,t,!1,!1),t.stateNode=e;e:{switch(m=an(s,i),s){case"dialog":We("cancel",e),We("close",e),d=i;break;case"iframe":case"object":case"embed":We("load",e),d=i;break;case"video":case"audio":for(d=0;d<_n.length;d++)We(_n[d],e);d=i;break;case"source":We("error",e),d=i;break;case"img":case"image":case"link":We("error",e),We("load",e),d=i;break;case"details":We("toggle",e),d=i;break;case"input":it(e,i),d=Le(e,i),We("invalid",e);break;case"option":d=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},d=O({},i,{value:void 0}),We("invalid",e);break;case"textarea":he(e,i),d=Te(e,i),We("invalid",e);break;default:d=i}ys(s,d),b=d;for(h in b)if(b.hasOwnProperty(h)){var _=b[h];h==="style"?Cr(e,_):h==="dangerouslySetInnerHTML"?(_=_?_.__html:void 0,_!=null&&de(e,_)):h==="children"?typeof _=="string"?(s!=="textarea"||_!=="")&&ue(e,_):typeof _=="number"&&ue(e,""+_):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(o.hasOwnProperty(h)?_!=null&&h==="onScroll"&&We("scroll",e):_!=null&&M(e,h,_,m))}switch(s){case"input":L(e),lt(e,i,!1);break;case"textarea":L(e),Je(e);break;case"option":i.value!=null&&e.setAttribute("value",""+Ce(i.value));break;case"select":e.multiple=!!i.multiple,h=i.value,h!=null?me(e,!!i.multiple,h,!1):i.defaultValue!=null&&me(e,!!i.multiple,i.defaultValue,!0);break;default:typeof d.onClick=="function"&&(e.onclick=ka)}switch(s){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return xt(t),null;case 6:if(e&&t.stateNode!=null)iu(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(a(166));if(s=ns(An.current),ns(ir.current),Aa(t)){if(i=t.stateNode,s=t.memoizedProps,i[ar]=t,(h=i.nodeValue!==s)&&(e=Mt,e!==null))switch(e.tag){case 3:_a(i.nodeValue,s,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&_a(i.nodeValue,s,(e.mode&1)!==0)}h&&(t.flags|=4)}else i=(s.nodeType===9?s:s.ownerDocument).createTextNode(i),i[ar]=t,t.stateNode=i}return xt(t),null;case 13:if(Ke(Ge),i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Qe&&Lt!==null&&(t.mode&1)!==0&&(t.flags&128)===0)cd(),Is(),t.flags|=98560,h=!1;else if(h=Aa(t),i!==null&&i.dehydrated!==null){if(e===null){if(!h)throw Error(a(318));if(h=t.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(a(317));h[ar]=t}else Is(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;xt(t),h=!1}else Gt!==null&&(so(Gt),Gt=null),h=!0;if(!h)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=s,t):(i=i!==null,i!==(e!==null&&e.memoizedState!==null)&&i&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(Ge.current&1)!==0?st===0&&(st=3):io())),t.updateQueue!==null&&(t.flags|=4),xt(t),null);case 4:return Ls(),Wl(e,t),e===null&&kn(t.stateNode.containerInfo),xt(t),null;case 10:return wl(t.type._context),xt(t),null;case 17:return Et(t.type)&&Ca(),xt(t),null;case 19:if(Ke(Ge),h=t.memoizedState,h===null)return xt(t),null;if(i=(t.flags&128)!==0,m=h.rendering,m===null)if(i)Ln(h,!1);else{if(st!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(m=$a(e),m!==null){for(t.flags|=128,Ln(h,!1),i=m.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=s,s=t.child;s!==null;)h=s,e=i,h.flags&=14680066,m=h.alternate,m===null?(h.childLanes=0,h.lanes=e,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=m.childLanes,h.lanes=m.lanes,h.child=m.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=m.memoizedProps,h.memoizedState=m.memoizedState,h.updateQueue=m.updateQueue,h.type=m.type,e=m.dependencies,h.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return Ve(Ge,Ge.current&1|2),t.child}e=e.sibling}h.tail!==null&&Ze()>zs&&(t.flags|=128,i=!0,Ln(h,!1),t.lanes=4194304)}else{if(!i)if(e=$a(m),e!==null){if(t.flags|=128,i=!0,s=e.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),Ln(h,!0),h.tail===null&&h.tailMode==="hidden"&&!m.alternate&&!Qe)return xt(t),null}else 2*Ze()-h.renderingStartTime>zs&&s!==1073741824&&(t.flags|=128,i=!0,Ln(h,!1),t.lanes=4194304);h.isBackwards?(m.sibling=t.child,t.child=m):(s=h.last,s!==null?s.sibling=m:t.child=m,h.last=m)}return h.tail!==null?(t=h.tail,h.rendering=t,h.tail=t.sibling,h.renderingStartTime=Ze(),t.sibling=null,s=Ge.current,Ve(Ge,i?s&1|2:s&1),t):(xt(t),null);case 22:case 23:return ao(),i=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(t.flags|=8192),i&&(t.mode&1)!==0?($t&1073741824)!==0&&(xt(t),t.subtreeFlags&6&&(t.flags|=8192)):xt(t),null;case 24:return null;case 25:return null}throw Error(a(156,t.tag))}function Dm(e,t){switch(ml(t),t.tag){case 1:return Et(t.type)&&Ca(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ls(),Ke(Ct),Ke(pt),Cl(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return kl(t),null;case 13:if(Ke(Ge),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(a(340));Is()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ke(Ge),null;case 4:return Ls(),null;case 10:return wl(t.type._context),null;case 22:case 23:return ao(),null;case 24:return null;default:return null}}var Ka=!1,yt=!1,Am=typeof WeakSet=="function"?WeakSet:Set,ge=null;function Us(e,t){var s=e.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(i){Xe(e,t,i)}else s.current=null}function Kl(e,t,s){try{s()}catch(i){Xe(e,t,i)}}var lu=!1;function Im(e,t){if(al=fa,e=Uc(),Ji(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var i=s.getSelection&&s.getSelection();if(i&&i.rangeCount!==0){s=i.anchorNode;var d=i.anchorOffset,h=i.focusNode;i=i.focusOffset;try{s.nodeType,h.nodeType}catch{s=null;break e}var m=0,b=-1,_=-1,R=0,Y=0,J=e,G=null;t:for(;;){for(var fe;J!==s||d!==0&&J.nodeType!==3||(b=m+d),J!==h||i!==0&&J.nodeType!==3||(_=m+i),J.nodeType===3&&(m+=J.nodeValue.length),(fe=J.firstChild)!==null;)G=J,J=fe;for(;;){if(J===e)break t;if(G===s&&++R===d&&(b=m),G===h&&++Y===i&&(_=m),(fe=J.nextSibling)!==null)break;J=G,G=J.parentNode}J=fe}s=b===-1||_===-1?null:{start:b,end:_}}else s=null}s=s||{start:0,end:0}}else s=null;for(il={focusedElem:e,selectionRange:s},fa=!1,ge=t;ge!==null;)if(t=ge,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ge=e;else for(;ge!==null;){t=ge;try{var xe=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(xe!==null){var ve=xe.memoizedProps,et=xe.memoizedState,T=t.stateNode,k=T.getSnapshotBeforeUpdate(t.elementType===t.type?ve:Yt(t.type,ve),et);T.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var A=t.stateNode.containerInfo;A.nodeType===1?A.textContent="":A.nodeType===9&&A.documentElement&&A.removeChild(A.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(a(163))}}catch(ee){Xe(t,t.return,ee)}if(e=t.sibling,e!==null){e.return=t.return,ge=e;break}ge=t.return}return xe=lu,lu=!1,xe}function $n(e,t,s){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var d=i=i.next;do{if((d.tag&e)===e){var h=d.destroy;d.destroy=void 0,h!==void 0&&Kl(t,s,h)}d=d.next}while(d!==i)}}function Qa(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var s=t=t.next;do{if((s.tag&e)===e){var i=s.create;s.destroy=i()}s=s.next}while(s!==t)}}function Ql(e){var t=e.ref;if(t!==null){var s=e.stateNode;switch(e.tag){case 5:e=s;break;default:e=s}typeof t=="function"?t(e):t.current=e}}function ou(e){var t=e.alternate;t!==null&&(e.alternate=null,ou(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ar],delete t[Cn],delete t[dl],delete t[pm],delete t[gm])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function cu(e){return e.tag===5||e.tag===3||e.tag===4}function du(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||cu(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Gl(e,t,s){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?s.nodeType===8?s.parentNode.insertBefore(e,t):s.insertBefore(e,t):(s.nodeType===8?(t=s.parentNode,t.insertBefore(e,s)):(t=s,t.appendChild(e)),s=s._reactRootContainer,s!=null||t.onclick!==null||(t.onclick=ka));else if(i!==4&&(e=e.child,e!==null))for(Gl(e,t,s),e=e.sibling;e!==null;)Gl(e,t,s),e=e.sibling}function Yl(e,t,s){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(Yl(e,t,s),e=e.sibling;e!==null;)Yl(e,t,s),e=e.sibling}var ht=null,Jt=!1;function Fr(e,t,s){for(s=s.child;s!==null;)uu(e,t,s),s=s.sibling}function uu(e,t,s){if(nr&&typeof nr.onCommitFiberUnmount=="function")try{nr.onCommitFiberUnmount(la,s)}catch{}switch(s.tag){case 5:yt||Us(s,t);case 6:var i=ht,d=Jt;ht=null,Fr(e,t,s),ht=i,Jt=d,ht!==null&&(Jt?(e=ht,s=s.stateNode,e.nodeType===8?e.parentNode.removeChild(s):e.removeChild(s)):ht.removeChild(s.stateNode));break;case 18:ht!==null&&(Jt?(e=ht,s=s.stateNode,e.nodeType===8?cl(e.parentNode,s):e.nodeType===1&&cl(e,s),gn(e)):cl(ht,s.stateNode));break;case 4:i=ht,d=Jt,ht=s.stateNode.containerInfo,Jt=!0,Fr(e,t,s),ht=i,Jt=d;break;case 0:case 11:case 14:case 15:if(!yt&&(i=s.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){d=i=i.next;do{var h=d,m=h.destroy;h=h.tag,m!==void 0&&((h&2)!==0||(h&4)!==0)&&Kl(s,t,m),d=d.next}while(d!==i)}Fr(e,t,s);break;case 1:if(!yt&&(Us(s,t),i=s.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=s.memoizedProps,i.state=s.memoizedState,i.componentWillUnmount()}catch(b){Xe(s,t,b)}Fr(e,t,s);break;case 21:Fr(e,t,s);break;case 22:s.mode&1?(yt=(i=yt)||s.memoizedState!==null,Fr(e,t,s),yt=i):Fr(e,t,s);break;default:Fr(e,t,s)}}function hu(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var s=e.stateNode;s===null&&(s=e.stateNode=new Am),t.forEach(function(i){var d=qm.bind(null,e,i);s.has(i)||(s.add(i),i.then(d,d))})}}function Xt(e,t){var s=t.deletions;if(s!==null)for(var i=0;i<s.length;i++){var d=s[i];try{var h=e,m=t,b=m;e:for(;b!==null;){switch(b.tag){case 5:ht=b.stateNode,Jt=!1;break e;case 3:ht=b.stateNode.containerInfo,Jt=!0;break e;case 4:ht=b.stateNode.containerInfo,Jt=!0;break e}b=b.return}if(ht===null)throw Error(a(160));uu(h,m,d),ht=null,Jt=!1;var _=d.alternate;_!==null&&(_.return=null),d.return=null}catch(R){Xe(d,t,R)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)fu(t,e),t=t.sibling}function fu(e,t){var s=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Xt(t,e),or(e),i&4){try{$n(3,e,e.return),Qa(3,e)}catch(ve){Xe(e,e.return,ve)}try{$n(5,e,e.return)}catch(ve){Xe(e,e.return,ve)}}break;case 1:Xt(t,e),or(e),i&512&&s!==null&&Us(s,s.return);break;case 5:if(Xt(t,e),or(e),i&512&&s!==null&&Us(s,s.return),e.flags&32){var d=e.stateNode;try{ue(d,"")}catch(ve){Xe(e,e.return,ve)}}if(i&4&&(d=e.stateNode,d!=null)){var h=e.memoizedProps,m=s!==null?s.memoizedProps:h,b=e.type,_=e.updateQueue;if(e.updateQueue=null,_!==null)try{b==="input"&&h.type==="radio"&&h.name!=null&&wt(d,h),an(b,m);var R=an(b,h);for(m=0;m<_.length;m+=2){var Y=_[m],J=_[m+1];Y==="style"?Cr(d,J):Y==="dangerouslySetInnerHTML"?de(d,J):Y==="children"?ue(d,J):M(d,Y,J,R)}switch(b){case"input":bt(d,h);break;case"textarea":qe(d,h);break;case"select":var G=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!h.multiple;var fe=h.value;fe!=null?me(d,!!h.multiple,fe,!1):G!==!!h.multiple&&(h.defaultValue!=null?me(d,!!h.multiple,h.defaultValue,!0):me(d,!!h.multiple,h.multiple?[]:"",!1))}d[Cn]=h}catch(ve){Xe(e,e.return,ve)}}break;case 6:if(Xt(t,e),or(e),i&4){if(e.stateNode===null)throw Error(a(162));d=e.stateNode,h=e.memoizedProps;try{d.nodeValue=h}catch(ve){Xe(e,e.return,ve)}}break;case 3:if(Xt(t,e),or(e),i&4&&s!==null&&s.memoizedState.isDehydrated)try{gn(t.containerInfo)}catch(ve){Xe(e,e.return,ve)}break;case 4:Xt(t,e),or(e);break;case 13:Xt(t,e),or(e),d=e.child,d.flags&8192&&(h=d.memoizedState!==null,d.stateNode.isHidden=h,!h||d.alternate!==null&&d.alternate.memoizedState!==null||(Zl=Ze())),i&4&&hu(e);break;case 22:if(Y=s!==null&&s.memoizedState!==null,e.mode&1?(yt=(R=yt)||Y,Xt(t,e),yt=R):Xt(t,e),or(e),i&8192){if(R=e.memoizedState!==null,(e.stateNode.isHidden=R)&&!Y&&(e.mode&1)!==0)for(ge=e,Y=e.child;Y!==null;){for(J=ge=Y;ge!==null;){switch(G=ge,fe=G.child,G.tag){case 0:case 11:case 14:case 15:$n(4,G,G.return);break;case 1:Us(G,G.return);var xe=G.stateNode;if(typeof xe.componentWillUnmount=="function"){i=G,s=G.return;try{t=i,xe.props=t.memoizedProps,xe.state=t.memoizedState,xe.componentWillUnmount()}catch(ve){Xe(i,s,ve)}}break;case 5:Us(G,G.return);break;case 22:if(G.memoizedState!==null){gu(J);continue}}fe!==null?(fe.return=G,ge=fe):gu(J)}Y=Y.sibling}e:for(Y=null,J=e;;){if(J.tag===5){if(Y===null){Y=J;try{d=J.stateNode,R?(h=d.style,typeof h.setProperty=="function"?h.setProperty("display","none","important"):h.display="none"):(b=J.stateNode,_=J.memoizedProps.style,m=_!=null&&_.hasOwnProperty("display")?_.display:null,b.style.display=Ot("display",m))}catch(ve){Xe(e,e.return,ve)}}}else if(J.tag===6){if(Y===null)try{J.stateNode.nodeValue=R?"":J.memoizedProps}catch(ve){Xe(e,e.return,ve)}}else if((J.tag!==22&&J.tag!==23||J.memoizedState===null||J===e)&&J.child!==null){J.child.return=J,J=J.child;continue}if(J===e)break e;for(;J.sibling===null;){if(J.return===null||J.return===e)break e;Y===J&&(Y=null),J=J.return}Y===J&&(Y=null),J.sibling.return=J.return,J=J.sibling}}break;case 19:Xt(t,e),or(e),i&4&&hu(e);break;case 21:break;default:Xt(t,e),or(e)}}function or(e){var t=e.flags;if(t&2){try{e:{for(var s=e.return;s!==null;){if(cu(s)){var i=s;break e}s=s.return}throw Error(a(160))}switch(i.tag){case 5:var d=i.stateNode;i.flags&32&&(ue(d,""),i.flags&=-33);var h=du(e);Yl(e,h,d);break;case 3:case 4:var m=i.stateNode.containerInfo,b=du(e);Gl(e,b,m);break;default:throw Error(a(161))}}catch(_){Xe(e,e.return,_)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Om(e,t,s){ge=e,mu(e)}function mu(e,t,s){for(var i=(e.mode&1)!==0;ge!==null;){var d=ge,h=d.child;if(d.tag===22&&i){var m=d.memoizedState!==null||Ka;if(!m){var b=d.alternate,_=b!==null&&b.memoizedState!==null||yt;b=Ka;var R=yt;if(Ka=m,(yt=_)&&!R)for(ge=d;ge!==null;)m=ge,_=m.child,m.tag===22&&m.memoizedState!==null?xu(d):_!==null?(_.return=m,ge=_):xu(d);for(;h!==null;)ge=h,mu(h),h=h.sibling;ge=d,Ka=b,yt=R}pu(e)}else(d.subtreeFlags&8772)!==0&&h!==null?(h.return=d,ge=h):pu(e)}}function pu(e){for(;ge!==null;){var t=ge;if((t.flags&8772)!==0){var s=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:yt||Qa(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!yt)if(s===null)i.componentDidMount();else{var d=t.elementType===t.type?s.memoizedProps:Yt(t.type,s.memoizedProps);i.componentDidUpdate(d,s.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var h=t.updateQueue;h!==null&&gd(t,h,i);break;case 3:var m=t.updateQueue;if(m!==null){if(s=null,t.child!==null)switch(t.child.tag){case 5:s=t.child.stateNode;break;case 1:s=t.child.stateNode}gd(t,m,s)}break;case 5:var b=t.stateNode;if(s===null&&t.flags&4){s=b;var _=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":_.autoFocus&&s.focus();break;case"img":_.src&&(s.src=_.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var R=t.alternate;if(R!==null){var Y=R.memoizedState;if(Y!==null){var J=Y.dehydrated;J!==null&&gn(J)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(a(163))}yt||t.flags&512&&Ql(t)}catch(G){Xe(t,t.return,G)}}if(t===e){ge=null;break}if(s=t.sibling,s!==null){s.return=t.return,ge=s;break}ge=t.return}}function gu(e){for(;ge!==null;){var t=ge;if(t===e){ge=null;break}var s=t.sibling;if(s!==null){s.return=t.return,ge=s;break}ge=t.return}}function xu(e){for(;ge!==null;){var t=ge;try{switch(t.tag){case 0:case 11:case 15:var s=t.return;try{Qa(4,t)}catch(_){Xe(t,s,_)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var d=t.return;try{i.componentDidMount()}catch(_){Xe(t,d,_)}}var h=t.return;try{Ql(t)}catch(_){Xe(t,h,_)}break;case 5:var m=t.return;try{Ql(t)}catch(_){Xe(t,m,_)}}}catch(_){Xe(t,t.return,_)}if(t===e){ge=null;break}var b=t.sibling;if(b!==null){b.return=t.return,ge=b;break}ge=t.return}}var Rm=Math.ceil,Ga=X.ReactCurrentDispatcher,Jl=X.ReactCurrentOwner,Bt=X.ReactCurrentBatchConfig,Ue=0,ct=null,tt=null,ft=0,$t=0,Fs=Rr(0),st=0,Un=null,is=0,Ya=0,Xl=0,Fn=null,Pt=null,Zl=0,zs=1/0,br=null,Ja=!1,eo=null,zr=null,Xa=!1,qr=null,Za=0,zn=0,to=null,ei=-1,ti=0;function _t(){return(Ue&6)!==0?Ze():ei!==-1?ei:ei=Ze()}function Br(e){return(e.mode&1)===0?1:(Ue&2)!==0&&ft!==0?ft&-ft:ym.transition!==null?(ti===0&&(ti=dc()),ti):(e=Be,e!==0||(e=window.event,e=e===void 0?16:vc(e.type)),e)}function Zt(e,t,s,i){if(50<zn)throw zn=0,to=null,Error(a(185));un(e,s,i),((Ue&2)===0||e!==ct)&&(e===ct&&((Ue&2)===0&&(Ya|=s),st===4&&Vr(e,ft)),Dt(e,i),s===1&&Ue===0&&(t.mode&1)===0&&(zs=Ze()+500,Ta&&Lr()))}function Dt(e,t){var s=e.callbackNode;yf(e,t);var i=da(e,e===ct?ft:0);if(i===0)s!==null&&lc(s),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(s!=null&&lc(s),t===1)e.tag===0?xm(vu.bind(null,e)):nd(vu.bind(null,e)),fm(function(){(Ue&6)===0&&Lr()}),s=null;else{switch(uc(i)){case 1:s=Oi;break;case 4:s=oc;break;case 16:s=ia;break;case 536870912:s=cc;break;default:s=ia}s=Cu(s,yu.bind(null,e))}e.callbackPriority=t,e.callbackNode=s}}function yu(e,t){if(ei=-1,ti=0,(Ue&6)!==0)throw Error(a(327));var s=e.callbackNode;if(qs()&&e.callbackNode!==s)return null;var i=da(e,e===ct?ft:0);if(i===0)return null;if((i&30)!==0||(i&e.expiredLanes)!==0||t)t=ri(e,i);else{t=i;var d=Ue;Ue|=2;var h=bu();(ct!==e||ft!==t)&&(br=null,zs=Ze()+500,os(e,t));do try{$m();break}catch(b){wu(e,b)}while(!0);vl(),Ga.current=h,Ue=d,tt!==null?t=0:(ct=null,ft=0,t=st)}if(t!==0){if(t===2&&(d=Ri(e),d!==0&&(i=d,t=ro(e,d))),t===1)throw s=Un,os(e,0),Vr(e,i),Dt(e,Ze()),s;if(t===6)Vr(e,i);else{if(d=e.current.alternate,(i&30)===0&&!Mm(d)&&(t=ri(e,i),t===2&&(h=Ri(e),h!==0&&(i=h,t=ro(e,h))),t===1))throw s=Un,os(e,0),Vr(e,i),Dt(e,Ze()),s;switch(e.finishedWork=d,e.finishedLanes=i,t){case 0:case 1:throw Error(a(345));case 2:cs(e,Pt,br);break;case 3:if(Vr(e,i),(i&130023424)===i&&(t=Zl+500-Ze(),10<t)){if(da(e,0)!==0)break;if(d=e.suspendedLanes,(d&i)!==i){_t(),e.pingedLanes|=e.suspendedLanes&d;break}e.timeoutHandle=ol(cs.bind(null,e,Pt,br),t);break}cs(e,Pt,br);break;case 4:if(Vr(e,i),(i&4194240)===i)break;for(t=e.eventTimes,d=-1;0<i;){var m=31-Kt(i);h=1<<m,m=t[m],m>d&&(d=m),i&=~h}if(i=d,i=Ze()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Rm(i/1960))-i,10<i){e.timeoutHandle=ol(cs.bind(null,e,Pt,br),i);break}cs(e,Pt,br);break;case 5:cs(e,Pt,br);break;default:throw Error(a(329))}}}return Dt(e,Ze()),e.callbackNode===s?yu.bind(null,e):null}function ro(e,t){var s=Fn;return e.current.memoizedState.isDehydrated&&(os(e,t).flags|=256),e=ri(e,t),e!==2&&(t=Pt,Pt=s,t!==null&&so(t)),e}function so(e){Pt===null?Pt=e:Pt.push.apply(Pt,e)}function Mm(e){for(var t=e;;){if(t.flags&16384){var s=t.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var i=0;i<s.length;i++){var d=s[i],h=d.getSnapshot;d=d.value;try{if(!Qt(h(),d))return!1}catch{return!1}}}if(s=t.child,t.subtreeFlags&16384&&s!==null)s.return=t,t=s;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Vr(e,t){for(t&=~Xl,t&=~Ya,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var s=31-Kt(t),i=1<<s;e[s]=-1,t&=~i}}function vu(e){if((Ue&6)!==0)throw Error(a(327));qs();var t=da(e,0);if((t&1)===0)return Dt(e,Ze()),null;var s=ri(e,t);if(e.tag!==0&&s===2){var i=Ri(e);i!==0&&(t=i,s=ro(e,i))}if(s===1)throw s=Un,os(e,0),Vr(e,t),Dt(e,Ze()),s;if(s===6)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,cs(e,Pt,br),Dt(e,Ze()),null}function no(e,t){var s=Ue;Ue|=1;try{return e(t)}finally{Ue=s,Ue===0&&(zs=Ze()+500,Ta&&Lr())}}function ls(e){qr!==null&&qr.tag===0&&(Ue&6)===0&&qs();var t=Ue;Ue|=1;var s=Bt.transition,i=Be;try{if(Bt.transition=null,Be=1,e)return e()}finally{Be=i,Bt.transition=s,Ue=t,(Ue&6)===0&&Lr()}}function ao(){$t=Fs.current,Ke(Fs)}function os(e,t){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(s!==-1&&(e.timeoutHandle=-1,hm(s)),tt!==null)for(s=tt.return;s!==null;){var i=s;switch(ml(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Ca();break;case 3:Ls(),Ke(Ct),Ke(pt),Cl();break;case 5:kl(i);break;case 4:Ls();break;case 13:Ke(Ge);break;case 19:Ke(Ge);break;case 10:wl(i.type._context);break;case 22:case 23:ao()}s=s.return}if(ct=e,tt=e=Hr(e.current,null),ft=$t=t,st=0,Un=null,Xl=Ya=is=0,Pt=Fn=null,ss!==null){for(t=0;t<ss.length;t++)if(s=ss[t],i=s.interleaved,i!==null){s.interleaved=null;var d=i.next,h=s.pending;if(h!==null){var m=h.next;h.next=d,i.next=m}s.pending=i}ss=null}return e}function wu(e,t){do{var s=tt;try{if(vl(),Ua.current=Ba,Fa){for(var i=Ye.memoizedState;i!==null;){var d=i.queue;d!==null&&(d.pending=null),i=i.next}Fa=!1}if(as=0,ot=rt=Ye=null,In=!1,On=0,Jl.current=null,s===null||s.return===null){st=1,Un=t,tt=null;break}e:{var h=e,m=s.return,b=s,_=t;if(t=ft,b.flags|=32768,_!==null&&typeof _=="object"&&typeof _.then=="function"){var R=_,Y=b,J=Y.tag;if((Y.mode&1)===0&&(J===0||J===11||J===15)){var G=Y.alternate;G?(Y.updateQueue=G.updateQueue,Y.memoizedState=G.memoizedState,Y.lanes=G.lanes):(Y.updateQueue=null,Y.memoizedState=null)}var fe=Hd(m);if(fe!==null){fe.flags&=-257,Wd(fe,m,b,h,t),fe.mode&1&&Vd(h,R,t),t=fe,_=R;var xe=t.updateQueue;if(xe===null){var ve=new Set;ve.add(_),t.updateQueue=ve}else xe.add(_);break e}else{if((t&1)===0){Vd(h,R,t),io();break e}_=Error(a(426))}}else if(Qe&&b.mode&1){var et=Hd(m);if(et!==null){(et.flags&65536)===0&&(et.flags|=256),Wd(et,m,b,h,t),xl($s(_,b));break e}}h=_=$s(_,b),st!==4&&(st=2),Fn===null?Fn=[h]:Fn.push(h),h=m;do{switch(h.tag){case 3:h.flags|=65536,t&=-t,h.lanes|=t;var T=qd(h,_,t);pd(h,T);break e;case 1:b=_;var k=h.type,A=h.stateNode;if((h.flags&128)===0&&(typeof k.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(zr===null||!zr.has(A)))){h.flags|=65536,t&=-t,h.lanes|=t;var ee=Bd(h,b,t);pd(h,ee);break e}}h=h.return}while(h!==null)}Nu(s)}catch(we){t=we,tt===s&&s!==null&&(tt=s=s.return);continue}break}while(!0)}function bu(){var e=Ga.current;return Ga.current=Ba,e===null?Ba:e}function io(){(st===0||st===3||st===2)&&(st=4),ct===null||(is&268435455)===0&&(Ya&268435455)===0||Vr(ct,ft)}function ri(e,t){var s=Ue;Ue|=2;var i=bu();(ct!==e||ft!==t)&&(br=null,os(e,t));do try{Lm();break}catch(d){wu(e,d)}while(!0);if(vl(),Ue=s,Ga.current=i,tt!==null)throw Error(a(261));return ct=null,ft=0,st}function Lm(){for(;tt!==null;)ju(tt)}function $m(){for(;tt!==null&&!cf();)ju(tt)}function ju(e){var t=Su(e.alternate,e,$t);e.memoizedProps=e.pendingProps,t===null?Nu(e):tt=t,Jl.current=null}function Nu(e){var t=e;do{var s=t.alternate;if(e=t.return,(t.flags&32768)===0){if(s=Pm(s,t,$t),s!==null){tt=s;return}}else{if(s=Dm(s,t),s!==null){s.flags&=32767,tt=s;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{st=6,tt=null;return}}if(t=t.sibling,t!==null){tt=t;return}tt=t=e}while(t!==null);st===0&&(st=5)}function cs(e,t,s){var i=Be,d=Bt.transition;try{Bt.transition=null,Be=1,Um(e,t,s,i)}finally{Bt.transition=d,Be=i}return null}function Um(e,t,s,i){do qs();while(qr!==null);if((Ue&6)!==0)throw Error(a(327));s=e.finishedWork;var d=e.finishedLanes;if(s===null)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var h=s.lanes|s.childLanes;if(vf(e,h),e===ct&&(tt=ct=null,ft=0),(s.subtreeFlags&2064)===0&&(s.flags&2064)===0||Xa||(Xa=!0,Cu(ia,function(){return qs(),null})),h=(s.flags&15990)!==0,(s.subtreeFlags&15990)!==0||h){h=Bt.transition,Bt.transition=null;var m=Be;Be=1;var b=Ue;Ue|=4,Jl.current=null,Im(e,s),fu(s,e),am(il),fa=!!al,il=al=null,e.current=s,Om(s),df(),Ue=b,Be=m,Bt.transition=h}else e.current=s;if(Xa&&(Xa=!1,qr=e,Za=d),h=e.pendingLanes,h===0&&(zr=null),ff(s.stateNode),Dt(e,Ze()),t!==null)for(i=e.onRecoverableError,s=0;s<t.length;s++)d=t[s],i(d.value,{componentStack:d.stack,digest:d.digest});if(Ja)throw Ja=!1,e=eo,eo=null,e;return(Za&1)!==0&&e.tag!==0&&qs(),h=e.pendingLanes,(h&1)!==0?e===to?zn++:(zn=0,to=e):zn=0,Lr(),null}function qs(){if(qr!==null){var e=uc(Za),t=Bt.transition,s=Be;try{if(Bt.transition=null,Be=16>e?16:e,qr===null)var i=!1;else{if(e=qr,qr=null,Za=0,(Ue&6)!==0)throw Error(a(331));var d=Ue;for(Ue|=4,ge=e.current;ge!==null;){var h=ge,m=h.child;if((ge.flags&16)!==0){var b=h.deletions;if(b!==null){for(var _=0;_<b.length;_++){var R=b[_];for(ge=R;ge!==null;){var Y=ge;switch(Y.tag){case 0:case 11:case 15:$n(8,Y,h)}var J=Y.child;if(J!==null)J.return=Y,ge=J;else for(;ge!==null;){Y=ge;var G=Y.sibling,fe=Y.return;if(ou(Y),Y===R){ge=null;break}if(G!==null){G.return=fe,ge=G;break}ge=fe}}}var xe=h.alternate;if(xe!==null){var ve=xe.child;if(ve!==null){xe.child=null;do{var et=ve.sibling;ve.sibling=null,ve=et}while(ve!==null)}}ge=h}}if((h.subtreeFlags&2064)!==0&&m!==null)m.return=h,ge=m;else e:for(;ge!==null;){if(h=ge,(h.flags&2048)!==0)switch(h.tag){case 0:case 11:case 15:$n(9,h,h.return)}var T=h.sibling;if(T!==null){T.return=h.return,ge=T;break e}ge=h.return}}var k=e.current;for(ge=k;ge!==null;){m=ge;var A=m.child;if((m.subtreeFlags&2064)!==0&&A!==null)A.return=m,ge=A;else e:for(m=k;ge!==null;){if(b=ge,(b.flags&2048)!==0)try{switch(b.tag){case 0:case 11:case 15:Qa(9,b)}}catch(we){Xe(b,b.return,we)}if(b===m){ge=null;break e}var ee=b.sibling;if(ee!==null){ee.return=b.return,ge=ee;break e}ge=b.return}}if(Ue=d,Lr(),nr&&typeof nr.onPostCommitFiberRoot=="function")try{nr.onPostCommitFiberRoot(la,e)}catch{}i=!0}return i}finally{Be=s,Bt.transition=t}}return!1}function _u(e,t,s){t=$s(s,t),t=qd(e,t,1),e=Ur(e,t,1),t=_t(),e!==null&&(un(e,1,t),Dt(e,t))}function Xe(e,t,s){if(e.tag===3)_u(e,e,s);else for(;t!==null;){if(t.tag===3){_u(t,e,s);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(zr===null||!zr.has(i))){e=$s(s,e),e=Bd(t,e,1),t=Ur(t,e,1),e=_t(),t!==null&&(un(t,1,e),Dt(t,e));break}}t=t.return}}function Fm(e,t,s){var i=e.pingCache;i!==null&&i.delete(t),t=_t(),e.pingedLanes|=e.suspendedLanes&s,ct===e&&(ft&s)===s&&(st===4||st===3&&(ft&130023424)===ft&&500>Ze()-Zl?os(e,0):Xl|=s),Dt(e,t)}function ku(e,t){t===0&&((e.mode&1)===0?t=1:(t=ca,ca<<=1,(ca&130023424)===0&&(ca=4194304)));var s=_t();e=yr(e,t),e!==null&&(un(e,t,s),Dt(e,s))}function zm(e){var t=e.memoizedState,s=0;t!==null&&(s=t.retryLane),ku(e,s)}function qm(e,t){var s=0;switch(e.tag){case 13:var i=e.stateNode,d=e.memoizedState;d!==null&&(s=d.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(a(314))}i!==null&&i.delete(t),ku(e,s)}var Su;Su=function(e,t,s){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ct.current)Tt=!0;else{if((e.lanes&s)===0&&(t.flags&128)===0)return Tt=!1,Tm(e,t,s);Tt=(e.flags&131072)!==0}else Tt=!1,Qe&&(t.flags&1048576)!==0&&ad(t,Da,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;Wa(e,t),e=t.pendingProps;var d=Ps(t,pt.current);Ms(t,s),d=Pl(null,t,i,e,d,s);var h=Dl();return t.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Et(i)?(h=!0,Ea(t)):h=!1,t.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,Nl(t),d.updater=Va,t.stateNode=d,d._reactInternals=t,Ll(t,i,e,s),t=zl(null,t,i,!0,h,s)):(t.tag=0,Qe&&h&&fl(t),Nt(null,t,d,s),t=t.child),t;case 16:i=t.elementType;e:{switch(Wa(e,t),e=t.pendingProps,d=i._init,i=d(i._payload),t.type=i,d=t.tag=Vm(i),e=Yt(i,e),d){case 0:t=Fl(null,t,i,e,s);break e;case 1:t=Xd(null,t,i,e,s);break e;case 11:t=Kd(null,t,i,e,s);break e;case 14:t=Qd(null,t,i,Yt(i.type,e),s);break e}throw Error(a(306,i,""))}return t;case 0:return i=t.type,d=t.pendingProps,d=t.elementType===i?d:Yt(i,d),Fl(e,t,i,d,s);case 1:return i=t.type,d=t.pendingProps,d=t.elementType===i?d:Yt(i,d),Xd(e,t,i,d,s);case 3:e:{if(Zd(t),e===null)throw Error(a(387));i=t.pendingProps,h=t.memoizedState,d=h.element,md(e,t),La(t,i,null,s);var m=t.memoizedState;if(i=m.element,h.isDehydrated)if(h={element:i,isDehydrated:!1,cache:m.cache,pendingSuspenseBoundaries:m.pendingSuspenseBoundaries,transitions:m.transitions},t.updateQueue.baseState=h,t.memoizedState=h,t.flags&256){d=$s(Error(a(423)),t),t=eu(e,t,i,s,d);break e}else if(i!==d){d=$s(Error(a(424)),t),t=eu(e,t,i,s,d);break e}else for(Lt=Or(t.stateNode.containerInfo.firstChild),Mt=t,Qe=!0,Gt=null,s=hd(t,null,i,s),t.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Is(),i===d){t=wr(e,t,s);break e}Nt(e,t,i,s)}t=t.child}return t;case 5:return xd(t),e===null&&gl(t),i=t.type,d=t.pendingProps,h=e!==null?e.memoizedProps:null,m=d.children,ll(i,d)?m=null:h!==null&&ll(i,h)&&(t.flags|=32),Jd(e,t),Nt(e,t,m,s),t.child;case 6:return e===null&&gl(t),null;case 13:return tu(e,t,s);case 4:return _l(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=Os(t,null,i,s):Nt(e,t,i,s),t.child;case 11:return i=t.type,d=t.pendingProps,d=t.elementType===i?d:Yt(i,d),Kd(e,t,i,d,s);case 7:return Nt(e,t,t.pendingProps,s),t.child;case 8:return Nt(e,t,t.pendingProps.children,s),t.child;case 12:return Nt(e,t,t.pendingProps.children,s),t.child;case 10:e:{if(i=t.type._context,d=t.pendingProps,h=t.memoizedProps,m=d.value,Ve(Oa,i._currentValue),i._currentValue=m,h!==null)if(Qt(h.value,m)){if(h.children===d.children&&!Ct.current){t=wr(e,t,s);break e}}else for(h=t.child,h!==null&&(h.return=t);h!==null;){var b=h.dependencies;if(b!==null){m=h.child;for(var _=b.firstContext;_!==null;){if(_.context===i){if(h.tag===1){_=vr(-1,s&-s),_.tag=2;var R=h.updateQueue;if(R!==null){R=R.shared;var Y=R.pending;Y===null?_.next=_:(_.next=Y.next,Y.next=_),R.pending=_}}h.lanes|=s,_=h.alternate,_!==null&&(_.lanes|=s),bl(h.return,s,t),b.lanes|=s;break}_=_.next}}else if(h.tag===10)m=h.type===t.type?null:h.child;else if(h.tag===18){if(m=h.return,m===null)throw Error(a(341));m.lanes|=s,b=m.alternate,b!==null&&(b.lanes|=s),bl(m,s,t),m=h.sibling}else m=h.child;if(m!==null)m.return=h;else for(m=h;m!==null;){if(m===t){m=null;break}if(h=m.sibling,h!==null){h.return=m.return,m=h;break}m=m.return}h=m}Nt(e,t,d.children,s),t=t.child}return t;case 9:return d=t.type,i=t.pendingProps.children,Ms(t,s),d=zt(d),i=i(d),t.flags|=1,Nt(e,t,i,s),t.child;case 14:return i=t.type,d=Yt(i,t.pendingProps),d=Yt(i.type,d),Qd(e,t,i,d,s);case 15:return Gd(e,t,t.type,t.pendingProps,s);case 17:return i=t.type,d=t.pendingProps,d=t.elementType===i?d:Yt(i,d),Wa(e,t),t.tag=1,Et(i)?(e=!0,Ea(t)):e=!1,Ms(t,s),Fd(t,i,d),Ll(t,i,d,s),zl(null,t,i,!0,e,s);case 19:return su(e,t,s);case 22:return Yd(e,t,s)}throw Error(a(156,t.tag))};function Cu(e,t){return ic(e,t)}function Bm(e,t,s,i){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vt(e,t,s,i){return new Bm(e,t,s,i)}function lo(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Vm(e){if(typeof e=="function")return lo(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Se)return 11;if(e===le)return 14}return 2}function Hr(e,t){var s=e.alternate;return s===null?(s=Vt(e.tag,t,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&14680064,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function si(e,t,s,i,d,h){var m=2;if(i=e,typeof e=="function")lo(e)&&(m=1);else if(typeof e=="string")m=5;else e:switch(e){case pe:return ds(s.children,d,h,t);case F:m=8,d|=8;break;case ne:return e=Vt(12,s,t,d|2),e.elementType=ne,e.lanes=h,e;case te:return e=Vt(13,s,t,d),e.elementType=te,e.lanes=h,e;case ae:return e=Vt(19,s,t,d),e.elementType=ae,e.lanes=h,e;case je:return ni(s,d,h,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case oe:m=10;break e;case Ne:m=9;break e;case Se:m=11;break e;case le:m=14;break e;case ye:m=16,i=null;break e}throw Error(a(130,e==null?e:typeof e,""))}return t=Vt(m,s,t,d),t.elementType=e,t.type=i,t.lanes=h,t}function ds(e,t,s,i){return e=Vt(7,e,i,t),e.lanes=s,e}function ni(e,t,s,i){return e=Vt(22,e,i,t),e.elementType=je,e.lanes=s,e.stateNode={isHidden:!1},e}function oo(e,t,s){return e=Vt(6,e,null,t),e.lanes=s,e}function co(e,t,s){return t=Vt(4,e.children!==null?e.children:[],e.key,t),t.lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Hm(e,t,s,i,d){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Mi(0),this.expirationTimes=Mi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mi(0),this.identifierPrefix=i,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function uo(e,t,s,i,d,h,m,b,_){return e=new Hm(e,t,s,b,_),t===1?(t=1,h===!0&&(t|=8)):t=0,h=Vt(3,null,null,t),e.current=h,h.stateNode=e,h.memoizedState={element:i,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},Nl(h),e}function Wm(e,t,s){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:se,key:i==null?null:""+i,children:e,containerInfo:t,implementation:s}}function Eu(e){if(!e)return Mr;e=e._reactInternals;e:{if(Xr(e)!==e||e.tag!==1)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Et(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(a(171))}if(e.tag===1){var s=e.type;if(Et(s))return rd(e,s,t)}return t}function Tu(e,t,s,i,d,h,m,b,_){return e=uo(s,i,!0,e,d,h,m,b,_),e.context=Eu(null),s=e.current,i=_t(),d=Br(s),h=vr(i,d),h.callback=t??null,Ur(s,h,d),e.current.lanes=d,un(e,d,i),Dt(e,i),e}function ai(e,t,s,i){var d=t.current,h=_t(),m=Br(d);return s=Eu(s),t.context===null?t.context=s:t.pendingContext=s,t=vr(h,m),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),e=Ur(d,t,m),e!==null&&(Zt(e,d,m,h),Ma(e,d,m)),m}function ii(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Pu(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<t?s:t}}function ho(e,t){Pu(e,t),(e=e.alternate)&&Pu(e,t)}function Km(){return null}var Du=typeof reportError=="function"?reportError:function(e){console.error(e)};function fo(e){this._internalRoot=e}li.prototype.render=fo.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(a(409));ai(e,t,null,null)},li.prototype.unmount=fo.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ls(function(){ai(null,e,null,null)}),t[mr]=null}};function li(e){this._internalRoot=e}li.prototype.unstable_scheduleHydration=function(e){if(e){var t=mc();e={blockedOn:null,target:e,priority:t};for(var s=0;s<Dr.length&&t!==0&&t<Dr[s].priority;s++);Dr.splice(s,0,e),s===0&&xc(e)}};function mo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function oi(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Au(){}function Qm(e,t,s,i,d){if(d){if(typeof i=="function"){var h=i;i=function(){var R=ii(m);h.call(R)}}var m=Tu(t,i,e,0,null,!1,!1,"",Au);return e._reactRootContainer=m,e[mr]=m.current,kn(e.nodeType===8?e.parentNode:e),ls(),m}for(;d=e.lastChild;)e.removeChild(d);if(typeof i=="function"){var b=i;i=function(){var R=ii(_);b.call(R)}}var _=uo(e,0,!1,null,null,!1,!1,"",Au);return e._reactRootContainer=_,e[mr]=_.current,kn(e.nodeType===8?e.parentNode:e),ls(function(){ai(t,_,s,i)}),_}function ci(e,t,s,i,d){var h=s._reactRootContainer;if(h){var m=h;if(typeof d=="function"){var b=d;d=function(){var _=ii(m);b.call(_)}}ai(t,m,e,d)}else m=Qm(s,t,e,d,i);return ii(m)}hc=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var s=dn(t.pendingLanes);s!==0&&(Li(t,s|1),Dt(t,Ze()),(Ue&6)===0&&(zs=Ze()+500,Lr()))}break;case 13:ls(function(){var i=yr(e,1);if(i!==null){var d=_t();Zt(i,e,1,d)}}),ho(e,1)}},$i=function(e){if(e.tag===13){var t=yr(e,134217728);if(t!==null){var s=_t();Zt(t,e,134217728,s)}ho(e,134217728)}},fc=function(e){if(e.tag===13){var t=Br(e),s=yr(e,t);if(s!==null){var i=_t();Zt(s,e,t,i)}ho(e,t)}},mc=function(){return Be},pc=function(e,t){var s=Be;try{return Be=e,t()}finally{Be=s}},sr=function(e,t,s){switch(t){case"input":if(bt(e,s),t=s.name,s.type==="radio"&&t!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<s.length;t++){var i=s[t];if(i!==e&&i.form===e.form){var d=Sa(i);if(!d)throw Error(a(90));Ie(i),bt(i,d)}}}break;case"textarea":qe(e,s);break;case"select":t=s.value,t!=null&&me(e,!!s.multiple,t,!1)}},Zo=no,ec=ls;var Gm={usingClientEntryPoint:!1,Events:[En,Es,Sa,Jo,Xo,no]},qn={findFiberByHostInstance:Zr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Ym={bundleType:qn.bundleType,version:qn.version,rendererPackageName:qn.rendererPackageName,rendererConfig:qn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:X.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=nc(e),e===null?null:e.stateNode},findFiberByHostInstance:qn.findFiberByHostInstance||Km,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var di=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!di.isDisabled&&di.supportsFiber)try{la=di.inject(Ym),nr=di}catch{}}return At.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Gm,At.createPortal=function(e,t){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!mo(t))throw Error(a(200));return Wm(e,t,null,s)},At.createRoot=function(e,t){if(!mo(e))throw Error(a(299));var s=!1,i="",d=Du;return t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(d=t.onRecoverableError)),t=uo(e,1,!1,null,null,s,!1,i,d),e[mr]=t.current,kn(e.nodeType===8?e.parentNode:e),new fo(t)},At.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(a(188)):(e=Object.keys(e).join(","),Error(a(268,e)));return e=nc(t),e=e===null?null:e.stateNode,e},At.flushSync=function(e){return ls(e)},At.hydrate=function(e,t,s){if(!oi(t))throw Error(a(200));return ci(null,e,t,!0,s)},At.hydrateRoot=function(e,t,s){if(!mo(e))throw Error(a(405));var i=s!=null&&s.hydratedSources||null,d=!1,h="",m=Du;if(s!=null&&(s.unstable_strictMode===!0&&(d=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onRecoverableError!==void 0&&(m=s.onRecoverableError)),t=Tu(t,null,e,1,s??null,d,!1,h,m),e[mr]=t.current,kn(e),i)for(e=0;e<i.length;e++)s=i[e],d=s._getVersion,d=d(s._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[s,d]:t.mutableSourceEagerHydrationData.push(s,d);return new li(t)},At.render=function(e,t,s){if(!oi(t))throw Error(a(200));return ci(null,e,t,!1,s)},At.unmountComponentAtNode=function(e){if(!oi(e))throw Error(a(40));return e._reactRootContainer?(ls(function(){ci(null,null,e,!1,function(){e._reactRootContainer=null,e[mr]=null})}),!0):!1},At.unstable_batchedUpdates=no,At.unstable_renderSubtreeIntoContainer=function(e,t,s,i){if(!oi(s))throw Error(a(200));if(e==null||e._reactInternals===void 0)throw Error(a(38));return ci(e,t,s,!1,i)},At.version="18.3.1-next-f1338f8080-20240426",At}var Fu;function ip(){if(Fu)return xo.exports;Fu=1;function c(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(c)}catch(n){console.error(n)}}return c(),xo.exports=ap(),xo.exports}var zu;function lp(){if(zu)return ui;zu=1;var c=ip();return ui.createRoot=c.createRoot,ui.hydrateRoot=c.hydrateRoot,ui}var op=lp();const cp="modulepreload",dp=function(c){return"/"+c},qu={},ea=function(n,a,l){let o=Promise.resolve();if(a&&a.length>0){document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),p=(f==null?void 0:f.nonce)||(f==null?void 0:f.getAttribute("nonce"));o=Promise.allSettled(a.map(g=>{if(g=dp(g),g in qu)return;qu[g]=!0;const x=g.endsWith(".css"),y=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${y}`))return;const j=document.createElement("link");if(j.rel=x?"stylesheet":cp,x||(j.as="script"),j.crossOrigin="",j.href=g,p&&j.setAttribute("nonce",p),document.head.appendChild(j),x)return new Promise((C,D)=>{j.addEventListener("load",C),j.addEventListener("error",()=>D(new Error(`Unable to preload CSS for ${g}`)))})}))}function u(f){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=f,window.dispatchEvent(p),!p.defaultPrevented)throw f}return o.then(f=>{for(const p of f||[])p.status==="rejected"&&u(p.reason);return n().catch(u)})},up=c=>{let n;return c?n=c:typeof fetch>"u"?n=(...a)=>ea(async()=>{const{default:l}=await Promise.resolve().then(()=>nn);return{default:l}},void 0).then(({default:l})=>l(...a)):n=fetch,(...a)=>n(...a)};class qo extends Error{constructor(n,a="FunctionsError",l){super(n),this.name=a,this.context=l}}class hp extends qo{constructor(n){super("Failed to send a request to the Edge Function","FunctionsFetchError",n)}}class Bu extends qo{constructor(n){super("Relay Error invoking the Edge Function","FunctionsRelayError",n)}}class Vu extends qo{constructor(n){super("Edge Function returned a non-2xx status code","FunctionsHttpError",n)}}var Eo;(function(c){c.Any="any",c.ApNortheast1="ap-northeast-1",c.ApNortheast2="ap-northeast-2",c.ApSouth1="ap-south-1",c.ApSoutheast1="ap-southeast-1",c.ApSoutheast2="ap-southeast-2",c.CaCentral1="ca-central-1",c.EuCentral1="eu-central-1",c.EuWest1="eu-west-1",c.EuWest2="eu-west-2",c.EuWest3="eu-west-3",c.SaEast1="sa-east-1",c.UsEast1="us-east-1",c.UsWest1="us-west-1",c.UsWest2="us-west-2"})(Eo||(Eo={}));var fp=function(c,n,a,l){function o(u){return u instanceof a?u:new a(function(f){f(u)})}return new(a||(a=Promise))(function(u,f){function p(y){try{x(l.next(y))}catch(j){f(j)}}function g(y){try{x(l.throw(y))}catch(j){f(j)}}function x(y){y.done?u(y.value):o(y.value).then(p,g)}x((l=l.apply(c,n||[])).next())})};class mp{constructor(n,{headers:a={},customFetch:l,region:o=Eo.Any}={}){this.url=n,this.headers=a,this.region=o,this.fetch=up(l)}setAuth(n){this.headers.Authorization=`Bearer ${n}`}invoke(n,a={}){var l;return fp(this,void 0,void 0,function*(){try{const{headers:o,method:u,body:f}=a;let p={},{region:g}=a;g||(g=this.region);const x=new URL(`${this.url}/${n}`);g&&g!=="any"&&(p["x-region"]=g,x.searchParams.set("forceFunctionRegion",g));let y;f&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)&&(typeof Blob<"u"&&f instanceof Blob||f instanceof ArrayBuffer?(p["Content-Type"]="application/octet-stream",y=f):typeof f=="string"?(p["Content-Type"]="text/plain",y=f):typeof FormData<"u"&&f instanceof FormData?y=f:(p["Content-Type"]="application/json",y=JSON.stringify(f)));const j=yield this.fetch(x.toString(),{method:u||"POST",headers:Object.assign(Object.assign(Object.assign({},p),this.headers),o),body:y}).catch(V=>{throw new hp(V)}),C=j.headers.get("x-relay-error");if(C&&C==="true")throw new Bu(j);if(!j.ok)throw new Vu(j);let D=((l=j.headers.get("Content-Type"))!==null&&l!==void 0?l:"text/plain").split(";")[0].trim(),U;return D==="application/json"?U=yield j.json():D==="application/octet-stream"?U=yield j.blob():D==="text/event-stream"?U=j:D==="multipart/form-data"?U=yield j.formData():U=yield j.text(),{data:U,error:null,response:j}}catch(o){return{data:null,error:o,response:o instanceof Vu||o instanceof Bu?o.context:void 0}}})}}var ut={},Bs={},Vs={},Hs={},Ws={},Ks={},pp=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},rn=pp();const gp=rn.fetch,Ch=rn.fetch.bind(rn),Eh=rn.Headers,xp=rn.Request,yp=rn.Response,nn=Object.freeze(Object.defineProperty({__proto__:null,Headers:Eh,Request:xp,Response:yp,default:Ch,fetch:gp},Symbol.toStringTag,{value:"Module"})),vp=Zm(nn);var hi={},Hu;function Th(){if(Hu)return hi;Hu=1,Object.defineProperty(hi,"__esModule",{value:!0});class c extends Error{constructor(a){super(a.message),this.name="PostgrestError",this.details=a.details,this.hint=a.hint,this.code=a.code}}return hi.default=c,hi}var Wu;function Ph(){if(Wu)return Ks;Wu=1;var c=Ks&&Ks.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Ks,"__esModule",{value:!0});const n=c(vp),a=c(Th());class l{constructor(u){this.shouldThrowOnError=!1,this.method=u.method,this.url=u.url,this.headers=u.headers,this.schema=u.schema,this.body=u.body,this.shouldThrowOnError=u.shouldThrowOnError,this.signal=u.signal,this.isMaybeSingle=u.isMaybeSingle,u.fetch?this.fetch=u.fetch:typeof fetch>"u"?this.fetch=n.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(u,f){return this.headers=Object.assign({},this.headers),this.headers[u]=f,this}then(u,f){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const p=this.fetch;let g=p(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async x=>{var y,j,C;let D=null,U=null,V=null,q=x.status,I=x.statusText;if(x.ok){if(this.method!=="HEAD"){const B=await x.text();B===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?U=B:U=JSON.parse(B))}const M=(y=this.headers.Prefer)===null||y===void 0?void 0:y.match(/count=(exact|planned|estimated)/),X=(j=x.headers.get("content-range"))===null||j===void 0?void 0:j.split("/");M&&X&&X.length>1&&(V=parseInt(X[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(U)&&(U.length>1?(D={code:"PGRST116",details:`Results contain ${U.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},U=null,V=null,q=406,I="Not Acceptable"):U.length===1?U=U[0]:U=null)}else{const M=await x.text();try{D=JSON.parse(M),Array.isArray(D)&&x.status===404&&(U=[],D=null,q=200,I="OK")}catch{x.status===404&&M===""?(q=204,I="No Content"):D={message:M}}if(D&&this.isMaybeSingle&&(!((C=D==null?void 0:D.details)===null||C===void 0)&&C.includes("0 rows"))&&(D=null,q=200,I="OK"),D&&this.shouldThrowOnError)throw new a.default(D)}return{error:D,data:U,count:V,status:q,statusText:I}});return this.shouldThrowOnError||(g=g.catch(x=>{var y,j,C;return{error:{message:`${(y=x==null?void 0:x.name)!==null&&y!==void 0?y:"FetchError"}: ${x==null?void 0:x.message}`,details:`${(j=x==null?void 0:x.stack)!==null&&j!==void 0?j:""}`,hint:"",code:`${(C=x==null?void 0:x.code)!==null&&C!==void 0?C:""}`},data:null,count:null,status:0,statusText:""}})),g.then(u,f)}returns(){return this}overrideTypes(){return this}}return Ks.default=l,Ks}var Ku;function Dh(){if(Ku)return Ws;Ku=1;var c=Ws&&Ws.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(Ws,"__esModule",{value:!0});const n=c(Ph());class a extends n.default{select(o){let u=!1;const f=(o??"*").split("").map(p=>/\s/.test(p)&&!u?"":(p==='"'&&(u=!u),p)).join("");return this.url.searchParams.set("select",f),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(o,{ascending:u=!0,nullsFirst:f,foreignTable:p,referencedTable:g=p}={}){const x=g?`${g}.order`:"order",y=this.url.searchParams.get(x);return this.url.searchParams.set(x,`${y?`${y},`:""}${o}.${u?"asc":"desc"}${f===void 0?"":f?".nullsfirst":".nullslast"}`),this}limit(o,{foreignTable:u,referencedTable:f=u}={}){const p=typeof f>"u"?"limit":`${f}.limit`;return this.url.searchParams.set(p,`${o}`),this}range(o,u,{foreignTable:f,referencedTable:p=f}={}){const g=typeof p>"u"?"offset":`${p}.offset`,x=typeof p>"u"?"limit":`${p}.limit`;return this.url.searchParams.set(g,`${o}`),this.url.searchParams.set(x,`${u-o+1}`),this}abortSignal(o){return this.signal=o,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:o=!1,verbose:u=!1,settings:f=!1,buffers:p=!1,wal:g=!1,format:x="text"}={}){var y;const j=[o?"analyze":null,u?"verbose":null,f?"settings":null,p?"buffers":null,g?"wal":null].filter(Boolean).join("|"),C=(y=this.headers.Accept)!==null&&y!==void 0?y:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${x}; for="${C}"; options=${j};`,x==="json"?this:this}rollback(){var o;return((o=this.headers.Prefer)!==null&&o!==void 0?o:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return Ws.default=a,Ws}var Qu;function Bo(){if(Qu)return Hs;Qu=1;var c=Hs&&Hs.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(Hs,"__esModule",{value:!0});const n=c(Dh());class a extends n.default{eq(o,u){return this.url.searchParams.append(o,`eq.${u}`),this}neq(o,u){return this.url.searchParams.append(o,`neq.${u}`),this}gt(o,u){return this.url.searchParams.append(o,`gt.${u}`),this}gte(o,u){return this.url.searchParams.append(o,`gte.${u}`),this}lt(o,u){return this.url.searchParams.append(o,`lt.${u}`),this}lte(o,u){return this.url.searchParams.append(o,`lte.${u}`),this}like(o,u){return this.url.searchParams.append(o,`like.${u}`),this}likeAllOf(o,u){return this.url.searchParams.append(o,`like(all).{${u.join(",")}}`),this}likeAnyOf(o,u){return this.url.searchParams.append(o,`like(any).{${u.join(",")}}`),this}ilike(o,u){return this.url.searchParams.append(o,`ilike.${u}`),this}ilikeAllOf(o,u){return this.url.searchParams.append(o,`ilike(all).{${u.join(",")}}`),this}ilikeAnyOf(o,u){return this.url.searchParams.append(o,`ilike(any).{${u.join(",")}}`),this}is(o,u){return this.url.searchParams.append(o,`is.${u}`),this}in(o,u){const f=Array.from(new Set(u)).map(p=>typeof p=="string"&&new RegExp("[,()]").test(p)?`"${p}"`:`${p}`).join(",");return this.url.searchParams.append(o,`in.(${f})`),this}contains(o,u){return typeof u=="string"?this.url.searchParams.append(o,`cs.${u}`):Array.isArray(u)?this.url.searchParams.append(o,`cs.{${u.join(",")}}`):this.url.searchParams.append(o,`cs.${JSON.stringify(u)}`),this}containedBy(o,u){return typeof u=="string"?this.url.searchParams.append(o,`cd.${u}`):Array.isArray(u)?this.url.searchParams.append(o,`cd.{${u.join(",")}}`):this.url.searchParams.append(o,`cd.${JSON.stringify(u)}`),this}rangeGt(o,u){return this.url.searchParams.append(o,`sr.${u}`),this}rangeGte(o,u){return this.url.searchParams.append(o,`nxl.${u}`),this}rangeLt(o,u){return this.url.searchParams.append(o,`sl.${u}`),this}rangeLte(o,u){return this.url.searchParams.append(o,`nxr.${u}`),this}rangeAdjacent(o,u){return this.url.searchParams.append(o,`adj.${u}`),this}overlaps(o,u){return typeof u=="string"?this.url.searchParams.append(o,`ov.${u}`):this.url.searchParams.append(o,`ov.{${u.join(",")}}`),this}textSearch(o,u,{config:f,type:p}={}){let g="";p==="plain"?g="pl":p==="phrase"?g="ph":p==="websearch"&&(g="w");const x=f===void 0?"":`(${f})`;return this.url.searchParams.append(o,`${g}fts${x}.${u}`),this}match(o){return Object.entries(o).forEach(([u,f])=>{this.url.searchParams.append(u,`eq.${f}`)}),this}not(o,u,f){return this.url.searchParams.append(o,`not.${u}.${f}`),this}or(o,{foreignTable:u,referencedTable:f=u}={}){const p=f?`${f}.or`:"or";return this.url.searchParams.append(p,`(${o})`),this}filter(o,u,f){return this.url.searchParams.append(o,`${u}.${f}`),this}}return Hs.default=a,Hs}var Gu;function Ah(){if(Gu)return Vs;Gu=1;var c=Vs&&Vs.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(Vs,"__esModule",{value:!0});const n=c(Bo());class a{constructor(o,{headers:u={},schema:f,fetch:p}){this.url=o,this.headers=u,this.schema=f,this.fetch=p}select(o,{head:u=!1,count:f}={}){const p=u?"HEAD":"GET";let g=!1;const x=(o??"*").split("").map(y=>/\s/.test(y)&&!g?"":(y==='"'&&(g=!g),y)).join("");return this.url.searchParams.set("select",x),f&&(this.headers.Prefer=`count=${f}`),new n.default({method:p,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(o,{count:u,defaultToNull:f=!0}={}){const p="POST",g=[];if(this.headers.Prefer&&g.push(this.headers.Prefer),u&&g.push(`count=${u}`),f||g.push("missing=default"),this.headers.Prefer=g.join(","),Array.isArray(o)){const x=o.reduce((y,j)=>y.concat(Object.keys(j)),[]);if(x.length>0){const y=[...new Set(x)].map(j=>`"${j}"`);this.url.searchParams.set("columns",y.join(","))}}return new n.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:this.fetch,allowEmpty:!1})}upsert(o,{onConflict:u,ignoreDuplicates:f=!1,count:p,defaultToNull:g=!0}={}){const x="POST",y=[`resolution=${f?"ignore":"merge"}-duplicates`];if(u!==void 0&&this.url.searchParams.set("on_conflict",u),this.headers.Prefer&&y.push(this.headers.Prefer),p&&y.push(`count=${p}`),g||y.push("missing=default"),this.headers.Prefer=y.join(","),Array.isArray(o)){const j=o.reduce((C,D)=>C.concat(Object.keys(D)),[]);if(j.length>0){const C=[...new Set(j)].map(D=>`"${D}"`);this.url.searchParams.set("columns",C.join(","))}}return new n.default({method:x,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:this.fetch,allowEmpty:!1})}update(o,{count:u}={}){const f="PATCH",p=[];return this.headers.Prefer&&p.push(this.headers.Prefer),u&&p.push(`count=${u}`),this.headers.Prefer=p.join(","),new n.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:this.fetch,allowEmpty:!1})}delete({count:o}={}){const u="DELETE",f=[];return o&&f.push(`count=${o}`),this.headers.Prefer&&f.unshift(this.headers.Prefer),this.headers.Prefer=f.join(","),new n.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return Vs.default=a,Vs}var Vn={},Hn={},Yu;function wp(){return Yu||(Yu=1,Object.defineProperty(Hn,"__esModule",{value:!0}),Hn.version=void 0,Hn.version="0.0.0-automated"),Hn}var Ju;function bp(){if(Ju)return Vn;Ju=1,Object.defineProperty(Vn,"__esModule",{value:!0}),Vn.DEFAULT_HEADERS=void 0;const c=wp();return Vn.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${c.version}`},Vn}var Xu;function jp(){if(Xu)return Bs;Xu=1;var c=Bs&&Bs.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(Bs,"__esModule",{value:!0});const n=c(Ah()),a=c(Bo()),l=bp();class o{constructor(f,{headers:p={},schema:g,fetch:x}={}){this.url=f,this.headers=Object.assign(Object.assign({},l.DEFAULT_HEADERS),p),this.schemaName=g,this.fetch=x}from(f){const p=new URL(`${this.url}/${f}`);return new n.default(p,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(f){return new o(this.url,{headers:this.headers,schema:f,fetch:this.fetch})}rpc(f,p={},{head:g=!1,get:x=!1,count:y}={}){let j;const C=new URL(`${this.url}/rpc/${f}`);let D;g||x?(j=g?"HEAD":"GET",Object.entries(p).filter(([V,q])=>q!==void 0).map(([V,q])=>[V,Array.isArray(q)?`{${q.join(",")}}`:`${q}`]).forEach(([V,q])=>{C.searchParams.append(V,q)})):(j="POST",D=p);const U=Object.assign({},this.headers);return y&&(U.Prefer=`count=${y}`),new a.default({method:j,url:C,headers:U,schema:this.schemaName,body:D,fetch:this.fetch,allowEmpty:!1})}}return Bs.default=o,Bs}var Zu;function Np(){if(Zu)return ut;Zu=1;var c=ut&&ut.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(ut,"__esModule",{value:!0}),ut.PostgrestError=ut.PostgrestBuilder=ut.PostgrestTransformBuilder=ut.PostgrestFilterBuilder=ut.PostgrestQueryBuilder=ut.PostgrestClient=void 0;const n=c(jp());ut.PostgrestClient=n.default;const a=c(Ah());ut.PostgrestQueryBuilder=a.default;const l=c(Bo());ut.PostgrestFilterBuilder=l.default;const o=c(Dh());ut.PostgrestTransformBuilder=o.default;const u=c(Ph());ut.PostgrestBuilder=u.default;const f=c(Th());return ut.PostgrestError=f.default,ut.default={PostgrestClient:n.default,PostgrestQueryBuilder:a.default,PostgrestFilterBuilder:l.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:u.default,PostgrestError:f.default},ut}var _p=Np();const kp=Xm(_p),{PostgrestClient:Sp,PostgrestQueryBuilder:nx,PostgrestFilterBuilder:ax,PostgrestTransformBuilder:ix,PostgrestBuilder:lx,PostgrestError:ox}=kp;class Cp{static detectEnvironment(){var n;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((n=navigator.userAgent)===null||n===void 0)&&n.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const a=parseInt(process.versions.node.split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const n=this.detectEnvironment();if(n.constructor)return n.constructor;let a=n.error||"WebSocket not supported in this environment.";throw n.workaround&&(a+=`

Suggested solution: ${n.workaround}`),new Error(a)}static createWebSocket(n,a){const l=this.getWebSocketConstructor();return new l(n,a)}static isWebSocketSupported(){try{const n=this.detectEnvironment();return n.type==="native"||n.type==="ws"}catch{return!1}}}const Ep="2.15.1",Tp=`realtime-js/${Ep}`,Pp="1.0.0",To=1e4,Dp=1e3,Ap=100;var Gn;(function(c){c[c.connecting=0]="connecting",c[c.open=1]="open",c[c.closing=2]="closing",c[c.closed=3]="closed"})(Gn||(Gn={}));var nt;(function(c){c.closed="closed",c.errored="errored",c.joined="joined",c.joining="joining",c.leaving="leaving"})(nt||(nt={}));var tr;(function(c){c.close="phx_close",c.error="phx_error",c.join="phx_join",c.reply="phx_reply",c.leave="phx_leave",c.access_token="access_token"})(tr||(tr={}));var Po;(function(c){c.websocket="websocket"})(Po||(Po={}));var ms;(function(c){c.Connecting="connecting",c.Open="open",c.Closing="closing",c.Closed="closed"})(ms||(ms={}));class Ip{constructor(){this.HEADER_LENGTH=1}decode(n,a){return n.constructor===ArrayBuffer?a(this._binaryDecode(n)):a(typeof n=="string"?JSON.parse(n):{})}_binaryDecode(n){const a=new DataView(n),l=new TextDecoder;return this._decodeBroadcast(n,a,l)}_decodeBroadcast(n,a,l){const o=a.getUint8(1),u=a.getUint8(2);let f=this.HEADER_LENGTH+2;const p=l.decode(n.slice(f,f+o));f=f+o;const g=l.decode(n.slice(f,f+u));f=f+u;const x=JSON.parse(l.decode(n.slice(f,n.byteLength)));return{ref:null,topic:p,event:g,payload:x}}}class Ih{constructor(n,a){this.callback=n,this.timerCalc=a,this.timer=void 0,this.tries=0,this.callback=n,this.timerCalc=a}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var He;(function(c){c.abstime="abstime",c.bool="bool",c.date="date",c.daterange="daterange",c.float4="float4",c.float8="float8",c.int2="int2",c.int4="int4",c.int4range="int4range",c.int8="int8",c.int8range="int8range",c.json="json",c.jsonb="jsonb",c.money="money",c.numeric="numeric",c.oid="oid",c.reltime="reltime",c.text="text",c.time="time",c.timestamp="timestamp",c.timestamptz="timestamptz",c.timetz="timetz",c.tsrange="tsrange",c.tstzrange="tstzrange"})(He||(He={}));const eh=(c,n,a={})=>{var l;const o=(l=a.skipTypes)!==null&&l!==void 0?l:[];return Object.keys(n).reduce((u,f)=>(u[f]=Op(f,c,n,o),u),{})},Op=(c,n,a,l)=>{const o=n.find(p=>p.name===c),u=o==null?void 0:o.type,f=a[c];return u&&!l.includes(u)?Oh(u,f):Do(f)},Oh=(c,n)=>{if(c.charAt(0)==="_"){const a=c.slice(1,c.length);return $p(n,a)}switch(c){case He.bool:return Rp(n);case He.float4:case He.float8:case He.int2:case He.int4:case He.int8:case He.numeric:case He.oid:return Mp(n);case He.json:case He.jsonb:return Lp(n);case He.timestamp:return Up(n);case He.abstime:case He.date:case He.daterange:case He.int4range:case He.int8range:case He.money:case He.reltime:case He.text:case He.time:case He.timestamptz:case He.timetz:case He.tsrange:case He.tstzrange:return Do(n);default:return Do(n)}},Do=c=>c,Rp=c=>{switch(c){case"t":return!0;case"f":return!1;default:return c}},Mp=c=>{if(typeof c=="string"){const n=parseFloat(c);if(!Number.isNaN(n))return n}return c},Lp=c=>{if(typeof c=="string")try{return JSON.parse(c)}catch(n){return console.log(`JSON parse error: ${n}`),c}return c},$p=(c,n)=>{if(typeof c!="string")return c;const a=c.length-1,l=c[a];if(c[0]==="{"&&l==="}"){let u;const f=c.slice(1,a);try{u=JSON.parse("["+f+"]")}catch{u=f?f.split(","):[]}return u.map(p=>Oh(n,p))}return c},Up=c=>typeof c=="string"?c.replace(" ","T"):c,Rh=c=>{let n=c;return n=n.replace(/^ws/i,"http"),n=n.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),n.replace(/\/+$/,"")+"/api/broadcast"};class wo{constructor(n,a,l={},o=To){this.channel=n,this.event=a,this.payload=l,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(n){this.timeout=n,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(n){this.payload=Object.assign(Object.assign({},this.payload),n)}receive(n,a){var l;return this._hasReceived(n)&&a((l=this.receivedResp)===null||l===void 0?void 0:l.response),this.recHooks.push({status:n,callback:a}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const n=a=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=a,this._matchReceive(a)};this.channel._on(this.refEvent,{},n),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(n,a){this.refEvent&&this.channel._trigger(this.refEvent,{status:n,response:a})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:n,response:a}){this.recHooks.filter(l=>l.status===n).forEach(l=>l.callback(a))}_hasReceived(n){return this.receivedResp&&this.receivedResp.status===n}}var th;(function(c){c.SYNC="sync",c.JOIN="join",c.LEAVE="leave"})(th||(th={}));class Yn{constructor(n,a){this.channel=n,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const l=(a==null?void 0:a.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(l.state,{},o=>{const{onJoin:u,onLeave:f,onSync:p}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Yn.syncState(this.state,o,u,f),this.pendingDiffs.forEach(g=>{this.state=Yn.syncDiff(this.state,g,u,f)}),this.pendingDiffs=[],p()}),this.channel._on(l.diff,{},o=>{const{onJoin:u,onLeave:f,onSync:p}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=Yn.syncDiff(this.state,o,u,f),p())}),this.onJoin((o,u,f)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:u,newPresences:f})}),this.onLeave((o,u,f)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:u,leftPresences:f})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(n,a,l,o){const u=this.cloneDeep(n),f=this.transformState(a),p={},g={};return this.map(u,(x,y)=>{f[x]||(g[x]=y)}),this.map(f,(x,y)=>{const j=u[x];if(j){const C=y.map(q=>q.presence_ref),D=j.map(q=>q.presence_ref),U=y.filter(q=>D.indexOf(q.presence_ref)<0),V=j.filter(q=>C.indexOf(q.presence_ref)<0);U.length>0&&(p[x]=U),V.length>0&&(g[x]=V)}else p[x]=y}),this.syncDiff(u,{joins:p,leaves:g},l,o)}static syncDiff(n,a,l,o){const{joins:u,leaves:f}={joins:this.transformState(a.joins),leaves:this.transformState(a.leaves)};return l||(l=()=>{}),o||(o=()=>{}),this.map(u,(p,g)=>{var x;const y=(x=n[p])!==null&&x!==void 0?x:[];if(n[p]=this.cloneDeep(g),y.length>0){const j=n[p].map(D=>D.presence_ref),C=y.filter(D=>j.indexOf(D.presence_ref)<0);n[p].unshift(...C)}l(p,y,g)}),this.map(f,(p,g)=>{let x=n[p];if(!x)return;const y=g.map(j=>j.presence_ref);x=x.filter(j=>y.indexOf(j.presence_ref)<0),n[p]=x,o(p,x,g),x.length===0&&delete n[p]}),n}static map(n,a){return Object.getOwnPropertyNames(n).map(l=>a(l,n[l]))}static transformState(n){return n=this.cloneDeep(n),Object.getOwnPropertyNames(n).reduce((a,l)=>{const o=n[l];return"metas"in o?a[l]=o.metas.map(u=>(u.presence_ref=u.phx_ref,delete u.phx_ref,delete u.phx_ref_prev,u)):a[l]=o,a},{})}static cloneDeep(n){return JSON.parse(JSON.stringify(n))}onJoin(n){this.caller.onJoin=n}onLeave(n){this.caller.onLeave=n}onSync(n){this.caller.onSync=n}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var rh;(function(c){c.ALL="*",c.INSERT="INSERT",c.UPDATE="UPDATE",c.DELETE="DELETE"})(rh||(rh={}));var Jn;(function(c){c.BROADCAST="broadcast",c.PRESENCE="presence",c.POSTGRES_CHANGES="postgres_changes",c.SYSTEM="system"})(Jn||(Jn={}));var Nr;(function(c){c.SUBSCRIBED="SUBSCRIBED",c.TIMED_OUT="TIMED_OUT",c.CLOSED="CLOSED",c.CHANNEL_ERROR="CHANNEL_ERROR"})(Nr||(Nr={}));class Vo{constructor(n,a={config:{}},l){this.topic=n,this.params=a,this.socket=l,this.bindings={},this.state=nt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=n.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},a.config),this.timeout=this.socket.timeout,this.joinPush=new wo(this,tr.join,this.params,this.timeout),this.rejoinTimer=new Ih(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=nt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=nt.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=nt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=nt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=nt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(tr.reply,{},(o,u)=>{this._trigger(this._replyEventName(u),o)}),this.presence=new Yn(this),this.broadcastEndpointURL=Rh(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(n,a=this.timeout){var l,o;if(this.socket.isConnected()||this.socket.connect(),this.state==nt.closed){const{config:{broadcast:u,presence:f,private:p}}=this.params,g=(o=(l=this.bindings.postgres_changes)===null||l===void 0?void 0:l.map(C=>C.filter))!==null&&o!==void 0?o:[],x=!!this.bindings[Jn.PRESENCE]&&this.bindings[Jn.PRESENCE].length>0,y={},j={broadcast:u,presence:Object.assign(Object.assign({},f),{enabled:x}),postgres_changes:g,private:p};this.socket.accessTokenValue&&(y.access_token=this.socket.accessTokenValue),this._onError(C=>n==null?void 0:n(Nr.CHANNEL_ERROR,C)),this._onClose(()=>n==null?void 0:n(Nr.CLOSED)),this.updateJoinPayload(Object.assign({config:j},y)),this.joinedOnce=!0,this._rejoin(a),this.joinPush.receive("ok",async({postgres_changes:C})=>{var D;if(this.socket.setAuth(),C===void 0){n==null||n(Nr.SUBSCRIBED);return}else{const U=this.bindings.postgres_changes,V=(D=U==null?void 0:U.length)!==null&&D!==void 0?D:0,q=[];for(let I=0;I<V;I++){const ie=U[I],{filter:{event:M,schema:X,table:B,filter:se}}=ie,pe=C&&C[I];if(pe&&pe.event===M&&pe.schema===X&&pe.table===B&&pe.filter===se)q.push(Object.assign(Object.assign({},ie),{id:pe.id}));else{this.unsubscribe(),this.state=nt.errored,n==null||n(Nr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=q,n&&n(Nr.SUBSCRIBED);return}}).receive("error",C=>{this.state=nt.errored,n==null||n(Nr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(C).join(", ")||"error")))}).receive("timeout",()=>{n==null||n(Nr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(n,a={}){return await this.send({type:"presence",event:"track",payload:n},a.timeout||this.timeout)}async untrack(n={}){return await this.send({type:"presence",event:"untrack"},n)}on(n,a,l){return this.state===nt.joined&&n===Jn.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(n,a,l)}async send(n,a={}){var l,o;if(!this._canPush()&&n.type==="broadcast"){const{event:u,payload:f}=n,g={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:u,payload:f,private:this.private}]})};try{const x=await this._fetchWithTimeout(this.broadcastEndpointURL,g,(l=a.timeout)!==null&&l!==void 0?l:this.timeout);return await((o=x.body)===null||o===void 0?void 0:o.cancel()),x.ok?"ok":"error"}catch(x){return x.name==="AbortError"?"timed out":"error"}}else return new Promise(u=>{var f,p,g;const x=this._push(n.type,n,a.timeout||this.timeout);n.type==="broadcast"&&!(!((g=(p=(f=this.params)===null||f===void 0?void 0:f.config)===null||p===void 0?void 0:p.broadcast)===null||g===void 0)&&g.ack)&&u("ok"),x.receive("ok",()=>u("ok")),x.receive("error",()=>u("error")),x.receive("timeout",()=>u("timed out"))})}updateJoinPayload(n){this.joinPush.updatePayload(n)}unsubscribe(n=this.timeout){this.state=nt.leaving;const a=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(tr.close,"leave",this._joinRef())};this.joinPush.destroy();let l=null;return new Promise(o=>{l=new wo(this,tr.leave,{},n),l.receive("ok",()=>{a(),o("ok")}).receive("timeout",()=>{a(),o("timed out")}).receive("error",()=>{o("error")}),l.send(),this._canPush()||l.trigger("ok",{})}).finally(()=>{l==null||l.destroy()})}teardown(){this.pushBuffer.forEach(n=>n.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=nt.closed,this.bindings={}}async _fetchWithTimeout(n,a,l){const o=new AbortController,u=setTimeout(()=>o.abort(),l),f=await this.socket.fetch(n,Object.assign(Object.assign({},a),{signal:o.signal}));return clearTimeout(u),f}_push(n,a,l=this.timeout){if(!this.joinedOnce)throw`tried to push '${n}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new wo(this,n,a,l);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(n){if(n.startTimeout(),this.pushBuffer.push(n),this.pushBuffer.length>Ap){const a=this.pushBuffer.shift();a&&(a.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${a.event}`,a.payload))}}_onMessage(n,a,l){return a}_isMember(n){return this.topic===n}_joinRef(){return this.joinPush.ref}_trigger(n,a,l){var o,u;const f=n.toLocaleLowerCase(),{close:p,error:g,leave:x,join:y}=tr;if(l&&[p,g,x,y].indexOf(f)>=0&&l!==this._joinRef())return;let C=this._onMessage(f,a,l);if(a&&!C)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(f)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(D=>{var U,V,q;return((U=D.filter)===null||U===void 0?void 0:U.event)==="*"||((q=(V=D.filter)===null||V===void 0?void 0:V.event)===null||q===void 0?void 0:q.toLocaleLowerCase())===f}).map(D=>D.callback(C,l)):(u=this.bindings[f])===null||u===void 0||u.filter(D=>{var U,V,q,I,ie,M;if(["broadcast","presence","postgres_changes"].includes(f))if("id"in D){const X=D.id,B=(U=D.filter)===null||U===void 0?void 0:U.event;return X&&((V=a.ids)===null||V===void 0?void 0:V.includes(X))&&(B==="*"||(B==null?void 0:B.toLocaleLowerCase())===((q=a.data)===null||q===void 0?void 0:q.type.toLocaleLowerCase()))}else{const X=(ie=(I=D==null?void 0:D.filter)===null||I===void 0?void 0:I.event)===null||ie===void 0?void 0:ie.toLocaleLowerCase();return X==="*"||X===((M=a==null?void 0:a.event)===null||M===void 0?void 0:M.toLocaleLowerCase())}else return D.type.toLocaleLowerCase()===f}).map(D=>{if(typeof C=="object"&&"ids"in C){const U=C.data,{schema:V,table:q,commit_timestamp:I,type:ie,errors:M}=U;C=Object.assign(Object.assign({},{schema:V,table:q,commit_timestamp:I,eventType:ie,new:{},old:{},errors:M}),this._getPayloadRecords(U))}D.callback(C,l)})}_isClosed(){return this.state===nt.closed}_isJoined(){return this.state===nt.joined}_isJoining(){return this.state===nt.joining}_isLeaving(){return this.state===nt.leaving}_replyEventName(n){return`chan_reply_${n}`}_on(n,a,l){const o=n.toLocaleLowerCase(),u={type:o,filter:a,callback:l};return this.bindings[o]?this.bindings[o].push(u):this.bindings[o]=[u],this}_off(n,a){const l=n.toLocaleLowerCase();return this.bindings[l]&&(this.bindings[l]=this.bindings[l].filter(o=>{var u;return!(((u=o.type)===null||u===void 0?void 0:u.toLocaleLowerCase())===l&&Vo.isEqual(o.filter,a))})),this}static isEqual(n,a){if(Object.keys(n).length!==Object.keys(a).length)return!1;for(const l in n)if(n[l]!==a[l])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(n){this._on(tr.close,{},n)}_onError(n){this._on(tr.error,{},a=>n(a))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(n=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=nt.joining,this.joinPush.resend(n))}_getPayloadRecords(n){const a={new:{},old:{}};return(n.type==="INSERT"||n.type==="UPDATE")&&(a.new=eh(n.columns,n.record)),(n.type==="UPDATE"||n.type==="DELETE")&&(a.old=eh(n.columns,n.old_record)),a}}const sh=()=>{},fi={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Fp=[1e3,2e3,5e3,1e4],zp=1e4,qp=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Bp{constructor(n,a){var l;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=To,this.transport=null,this.heartbeatIntervalMs=fi.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=sh,this.ref=0,this.reconnectTimer=null,this.logger=sh,this.conn=null,this.sendBuffer=[],this.serializer=new Ip,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=o=>{let u;return o?u=o:typeof fetch>"u"?u=(...f)=>ea(async()=>{const{default:p}=await Promise.resolve().then(()=>nn);return{default:p}},void 0).then(({default:p})=>p(...f)).catch(p=>{throw new Error(`Failed to load @supabase/node-fetch: ${p.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):u=fetch,(...f)=>u(...f)},!(!((l=a==null?void 0:a.params)===null||l===void 0)&&l.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=a.params.apikey,this.endPoint=`${n}/${Po.websocket}`,this.httpEndpoint=Rh(n),this._initializeOptions(a),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(a==null?void 0:a.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Cp.createWebSocket(this.endpointURL())}catch(n){this._setConnectionState("disconnected");const a=n.message;throw a.includes("Node.js")?new Error(`${a}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${a}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Pp}))}disconnect(n,a){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const l=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(l),this._setConnectionState("disconnected")},n?this.conn.close(n,a??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(n){const a=await n.unsubscribe();return this.channels.length===0&&this.disconnect(),a}async removeAllChannels(){const n=await Promise.all(this.channels.map(a=>a.unsubscribe()));return this.channels=[],this.disconnect(),n}log(n,a,l){this.logger(n,a,l)}connectionState(){switch(this.conn&&this.conn.readyState){case Gn.connecting:return ms.Connecting;case Gn.open:return ms.Open;case Gn.closing:return ms.Closing;default:return ms.Closed}}isConnected(){return this.connectionState()===ms.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(n,a={config:{}}){const l=`realtime:${n}`,o=this.getChannels().find(u=>u.topic===l);if(o)return o;{const u=new Vo(`realtime:${n}`,a,this);return this.channels.push(u),u}}push(n){const{topic:a,event:l,payload:o,ref:u}=n,f=()=>{this.encode(n,p=>{var g;(g=this.conn)===null||g===void 0||g.send(p)})};this.log("push",`${a} ${l} (${u})`,o),this.isConnected()?f():this.sendBuffer.push(f)}async setAuth(n=null){this._authPromise=this._performAuth(n);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var n;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(n=this.conn)===null||n===void 0||n.close(Dp,"heartbeat timeout"),setTimeout(()=>{var a;this.isConnected()||(a=this.reconnectTimer)===null||a===void 0||a.scheduleTimeout()},fi.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(n){this.heartbeatCallback=n}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(n=>n()),this.sendBuffer=[])}_makeRef(){let n=this.ref+1;return n===this.ref?this.ref=0:this.ref=n,this.ref.toString()}_leaveOpenTopic(n){let a=this.channels.find(l=>l.topic===n&&(l._isJoined()||l._isJoining()));a&&(this.log("transport",`leaving duplicate topic "${n}"`),a.unsubscribe())}_remove(n){this.channels=this.channels.filter(a=>a.topic!==n.topic)}_onConnMessage(n){this.decode(n.data,a=>{a.topic==="phoenix"&&a.event==="phx_reply"&&this.heartbeatCallback(a.payload.status==="ok"?"ok":"error"),a.ref&&a.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:l,event:o,payload:u,ref:f}=a,p=f?`(${f})`:"",g=u.status||"";this.log("receive",`${g} ${l} ${o} ${p}`.trim(),u),this.channels.filter(x=>x._isMember(l)).forEach(x=>x._trigger(o,u,f)),this._triggerStateCallbacks("message",a)})}_clearTimer(n){var a;n==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):n==="reconnect"&&((a=this.reconnectTimer)===null||a===void 0||a.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=n=>this._onConnError(n),this.conn.onmessage=n=>this._onConnMessage(n),this.conn.onclose=n=>this._onConnClose(n))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(n=>n.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const n=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(n),this.workerRef.onerror=a=>{this.log("worker","worker error",a.message),this.workerRef.terminate()},this.workerRef.onmessage=a=>{a.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(n){var a;this._setConnectionState("disconnected"),this.log("transport","close",n),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(a=this.reconnectTimer)===null||a===void 0||a.scheduleTimeout(),this._triggerStateCallbacks("close",n)}_onConnError(n){this._setConnectionState("disconnected"),this.log("transport",`${n}`),this._triggerChanError(),this._triggerStateCallbacks("error",n)}_triggerChanError(){this.channels.forEach(n=>n._trigger(tr.error))}_appendParams(n,a){if(Object.keys(a).length===0)return n;const l=n.match(/\?/)?"&":"?",o=new URLSearchParams(a);return`${n}${l}${o}`}_workerObjectUrl(n){let a;if(n)a=n;else{const l=new Blob([qp],{type:"application/javascript"});a=URL.createObjectURL(l)}return a}_setConnectionState(n,a=!1){this._connectionState=n,n==="connecting"?this._wasManualDisconnect=!1:n==="disconnecting"&&(this._wasManualDisconnect=a)}async _performAuth(n=null){let a;n?a=n:this.accessToken?a=await this.accessToken():a=this.accessTokenValue,this.accessTokenValue!=a&&(this.accessTokenValue=a,this.channels.forEach(l=>{const o={access_token:a,version:Tp};a&&l.updateJoinPayload(o),l.joinedOnce&&l._isJoined()&&l._push(tr.access_token,{access_token:a})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(n="general"){this.setAuth().catch(a=>{this.log("error",`error setting auth in ${n}`,a)})}_triggerStateCallbacks(n,a){try{this.stateChangeCallbacks[n].forEach(l=>{try{l(a)}catch(o){this.log("error",`error in ${n} callback`,o)}})}catch(l){this.log("error",`error triggering ${n} callbacks`,l)}}_setupReconnectionTimer(){this.reconnectTimer=new Ih(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},fi.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(n){var a,l,o,u,f,p,g,x;if(this.transport=(a=n==null?void 0:n.transport)!==null&&a!==void 0?a:null,this.timeout=(l=n==null?void 0:n.timeout)!==null&&l!==void 0?l:To,this.heartbeatIntervalMs=(o=n==null?void 0:n.heartbeatIntervalMs)!==null&&o!==void 0?o:fi.HEARTBEAT_INTERVAL,this.worker=(u=n==null?void 0:n.worker)!==null&&u!==void 0?u:!1,this.accessToken=(f=n==null?void 0:n.accessToken)!==null&&f!==void 0?f:null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.logger&&(this.logger=n.logger),(n!=null&&n.logLevel||n!=null&&n.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(p=n==null?void 0:n.reconnectAfterMs)!==null&&p!==void 0?p:y=>Fp[y-1]||zp,this.encode=(g=n==null?void 0:n.encode)!==null&&g!==void 0?g:(y,j)=>j(JSON.stringify(y)),this.decode=(x=n==null?void 0:n.decode)!==null&&x!==void 0?x:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=n==null?void 0:n.workerUrl}}}class Ho extends Error{constructor(n){super(n),this.__isStorageError=!0,this.name="StorageError"}}function at(c){return typeof c=="object"&&c!==null&&"__isStorageError"in c}class Vp extends Ho{constructor(n,a,l){super(n),this.name="StorageApiError",this.status=a,this.statusCode=l}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Ao extends Ho{constructor(n,a){super(n),this.name="StorageUnknownError",this.originalError=a}}var Hp=function(c,n,a,l){function o(u){return u instanceof a?u:new a(function(f){f(u)})}return new(a||(a=Promise))(function(u,f){function p(y){try{x(l.next(y))}catch(j){f(j)}}function g(y){try{x(l.throw(y))}catch(j){f(j)}}function x(y){y.done?u(y.value):o(y.value).then(p,g)}x((l=l.apply(c,n||[])).next())})};const Mh=c=>{let n;return c?n=c:typeof fetch>"u"?n=(...a)=>ea(async()=>{const{default:l}=await Promise.resolve().then(()=>nn);return{default:l}},void 0).then(({default:l})=>l(...a)):n=fetch,(...a)=>n(...a)},Wp=()=>Hp(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ea(()=>Promise.resolve().then(()=>nn),void 0)).Response:Response}),Io=c=>{if(Array.isArray(c))return c.map(a=>Io(a));if(typeof c=="function"||c!==Object(c))return c;const n={};return Object.entries(c).forEach(([a,l])=>{const o=a.replace(/([-_][a-z])/gi,u=>u.toUpperCase().replace(/[-_]/g,""));n[o]=Io(l)}),n},Kp=c=>{if(typeof c!="object"||c===null)return!1;const n=Object.getPrototypeOf(c);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in c)&&!(Symbol.iterator in c)};var xs=function(c,n,a,l){function o(u){return u instanceof a?u:new a(function(f){f(u)})}return new(a||(a=Promise))(function(u,f){function p(y){try{x(l.next(y))}catch(j){f(j)}}function g(y){try{x(l.throw(y))}catch(j){f(j)}}function x(y){y.done?u(y.value):o(y.value).then(p,g)}x((l=l.apply(c,n||[])).next())})};const bo=c=>c.msg||c.message||c.error_description||c.error||JSON.stringify(c),Qp=(c,n,a)=>xs(void 0,void 0,void 0,function*(){const l=yield Wp();c instanceof l&&!(a!=null&&a.noResolveJson)?c.json().then(o=>{const u=c.status||500,f=(o==null?void 0:o.statusCode)||u+"";n(new Vp(bo(o),u,f))}).catch(o=>{n(new Ao(bo(o),o))}):n(new Ao(bo(c),c))}),Gp=(c,n,a,l)=>{const o={method:c,headers:(n==null?void 0:n.headers)||{}};return c==="GET"||!l?o:(Kp(l)?(o.headers=Object.assign({"Content-Type":"application/json"},n==null?void 0:n.headers),o.body=JSON.stringify(l)):o.body=l,n!=null&&n.duplex&&(o.duplex=n.duplex),Object.assign(Object.assign({},o),a))};function ta(c,n,a,l,o,u){return xs(this,void 0,void 0,function*(){return new Promise((f,p)=>{c(a,Gp(n,l,o,u)).then(g=>{if(!g.ok)throw g;return l!=null&&l.noResolveJson?g:g.json()}).then(g=>f(g)).catch(g=>Qp(g,p,l))})})}function ki(c,n,a,l){return xs(this,void 0,void 0,function*(){return ta(c,"GET",n,a,l)})}function cr(c,n,a,l,o){return xs(this,void 0,void 0,function*(){return ta(c,"POST",n,l,o,a)})}function Oo(c,n,a,l,o){return xs(this,void 0,void 0,function*(){return ta(c,"PUT",n,l,o,a)})}function Yp(c,n,a,l){return xs(this,void 0,void 0,function*(){return ta(c,"HEAD",n,Object.assign(Object.assign({},a),{noResolveJson:!0}),l)})}function Lh(c,n,a,l,o){return xs(this,void 0,void 0,function*(){return ta(c,"DELETE",n,l,o,a)})}var kt=function(c,n,a,l){function o(u){return u instanceof a?u:new a(function(f){f(u)})}return new(a||(a=Promise))(function(u,f){function p(y){try{x(l.next(y))}catch(j){f(j)}}function g(y){try{x(l.throw(y))}catch(j){f(j)}}function x(y){y.done?u(y.value):o(y.value).then(p,g)}x((l=l.apply(c,n||[])).next())})};const Jp={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},nh={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Xp{constructor(n,a={},l,o){this.url=n,this.headers=a,this.bucketId=l,this.fetch=Mh(o)}uploadOrUpdate(n,a,l,o){return kt(this,void 0,void 0,function*(){try{let u;const f=Object.assign(Object.assign({},nh),o);let p=Object.assign(Object.assign({},this.headers),n==="POST"&&{"x-upsert":String(f.upsert)});const g=f.metadata;typeof Blob<"u"&&l instanceof Blob?(u=new FormData,u.append("cacheControl",f.cacheControl),g&&u.append("metadata",this.encodeMetadata(g)),u.append("",l)):typeof FormData<"u"&&l instanceof FormData?(u=l,u.append("cacheControl",f.cacheControl),g&&u.append("metadata",this.encodeMetadata(g))):(u=l,p["cache-control"]=`max-age=${f.cacheControl}`,p["content-type"]=f.contentType,g&&(p["x-metadata"]=this.toBase64(this.encodeMetadata(g)))),o!=null&&o.headers&&(p=Object.assign(Object.assign({},p),o.headers));const x=this._removeEmptyFolders(a),y=this._getFinalPath(x),j=yield(n=="PUT"?Oo:cr)(this.fetch,`${this.url}/object/${y}`,u,Object.assign({headers:p},f!=null&&f.duplex?{duplex:f.duplex}:{}));return{data:{path:x,id:j.Id,fullPath:j.Key},error:null}}catch(u){if(at(u))return{data:null,error:u};throw u}})}upload(n,a,l){return kt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",n,a,l)})}uploadToSignedUrl(n,a,l,o){return kt(this,void 0,void 0,function*(){const u=this._removeEmptyFolders(n),f=this._getFinalPath(u),p=new URL(this.url+`/object/upload/sign/${f}`);p.searchParams.set("token",a);try{let g;const x=Object.assign({upsert:nh.upsert},o),y=Object.assign(Object.assign({},this.headers),{"x-upsert":String(x.upsert)});typeof Blob<"u"&&l instanceof Blob?(g=new FormData,g.append("cacheControl",x.cacheControl),g.append("",l)):typeof FormData<"u"&&l instanceof FormData?(g=l,g.append("cacheControl",x.cacheControl)):(g=l,y["cache-control"]=`max-age=${x.cacheControl}`,y["content-type"]=x.contentType);const j=yield Oo(this.fetch,p.toString(),g,{headers:y});return{data:{path:u,fullPath:j.Key},error:null}}catch(g){if(at(g))return{data:null,error:g};throw g}})}createSignedUploadUrl(n,a){return kt(this,void 0,void 0,function*(){try{let l=this._getFinalPath(n);const o=Object.assign({},this.headers);a!=null&&a.upsert&&(o["x-upsert"]="true");const u=yield cr(this.fetch,`${this.url}/object/upload/sign/${l}`,{},{headers:o}),f=new URL(this.url+u.url),p=f.searchParams.get("token");if(!p)throw new Ho("No token returned by API");return{data:{signedUrl:f.toString(),path:n,token:p},error:null}}catch(l){if(at(l))return{data:null,error:l};throw l}})}update(n,a,l){return kt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",n,a,l)})}move(n,a,l){return kt(this,void 0,void 0,function*(){try{return{data:yield cr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:n,destinationKey:a,destinationBucket:l==null?void 0:l.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(at(o))return{data:null,error:o};throw o}})}copy(n,a,l){return kt(this,void 0,void 0,function*(){try{return{data:{path:(yield cr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:n,destinationKey:a,destinationBucket:l==null?void 0:l.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(at(o))return{data:null,error:o};throw o}})}createSignedUrl(n,a,l){return kt(this,void 0,void 0,function*(){try{let o=this._getFinalPath(n),u=yield cr(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:a},l!=null&&l.transform?{transform:l.transform}:{}),{headers:this.headers});const f=l!=null&&l.download?`&download=${l.download===!0?"":l.download}`:"";return u={signedUrl:encodeURI(`${this.url}${u.signedURL}${f}`)},{data:u,error:null}}catch(o){if(at(o))return{data:null,error:o};throw o}})}createSignedUrls(n,a,l){return kt(this,void 0,void 0,function*(){try{const o=yield cr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:a,paths:n},{headers:this.headers}),u=l!=null&&l.download?`&download=${l.download===!0?"":l.download}`:"";return{data:o.map(f=>Object.assign(Object.assign({},f),{signedUrl:f.signedURL?encodeURI(`${this.url}${f.signedURL}${u}`):null})),error:null}}catch(o){if(at(o))return{data:null,error:o};throw o}})}download(n,a){return kt(this,void 0,void 0,function*(){const o=typeof(a==null?void 0:a.transform)<"u"?"render/image/authenticated":"object",u=this.transformOptsToQueryString((a==null?void 0:a.transform)||{}),f=u?`?${u}`:"";try{const p=this._getFinalPath(n);return{data:yield(yield ki(this.fetch,`${this.url}/${o}/${p}${f}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(p){if(at(p))return{data:null,error:p};throw p}})}info(n){return kt(this,void 0,void 0,function*(){const a=this._getFinalPath(n);try{const l=yield ki(this.fetch,`${this.url}/object/info/${a}`,{headers:this.headers});return{data:Io(l),error:null}}catch(l){if(at(l))return{data:null,error:l};throw l}})}exists(n){return kt(this,void 0,void 0,function*(){const a=this._getFinalPath(n);try{return yield Yp(this.fetch,`${this.url}/object/${a}`,{headers:this.headers}),{data:!0,error:null}}catch(l){if(at(l)&&l instanceof Ao){const o=l.originalError;if([400,404].includes(o==null?void 0:o.status))return{data:!1,error:l}}throw l}})}getPublicUrl(n,a){const l=this._getFinalPath(n),o=[],u=a!=null&&a.download?`download=${a.download===!0?"":a.download}`:"";u!==""&&o.push(u);const p=typeof(a==null?void 0:a.transform)<"u"?"render/image":"object",g=this.transformOptsToQueryString((a==null?void 0:a.transform)||{});g!==""&&o.push(g);let x=o.join("&");return x!==""&&(x=`?${x}`),{data:{publicUrl:encodeURI(`${this.url}/${p}/public/${l}${x}`)}}}remove(n){return kt(this,void 0,void 0,function*(){try{return{data:yield Lh(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:n},{headers:this.headers}),error:null}}catch(a){if(at(a))return{data:null,error:a};throw a}})}list(n,a,l){return kt(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},Jp),a),{prefix:n||""});return{data:yield cr(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},l),error:null}}catch(o){if(at(o))return{data:null,error:o};throw o}})}listV2(n,a){return kt(this,void 0,void 0,function*(){try{const l=Object.assign({},n);return{data:yield cr(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,l,{headers:this.headers},a),error:null}}catch(l){if(at(l))return{data:null,error:l};throw l}})}encodeMetadata(n){return JSON.stringify(n)}toBase64(n){return typeof Buffer<"u"?Buffer.from(n).toString("base64"):btoa(n)}_getFinalPath(n){return`${this.bucketId}/${n.replace(/^\/+/,"")}`}_removeEmptyFolders(n){return n.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(n){const a=[];return n.width&&a.push(`width=${n.width}`),n.height&&a.push(`height=${n.height}`),n.resize&&a.push(`resize=${n.resize}`),n.format&&a.push(`format=${n.format}`),n.quality&&a.push(`quality=${n.quality}`),a.join("&")}}const Zp="2.11.0",eg={"X-Client-Info":`storage-js/${Zp}`};var Qs=function(c,n,a,l){function o(u){return u instanceof a?u:new a(function(f){f(u)})}return new(a||(a=Promise))(function(u,f){function p(y){try{x(l.next(y))}catch(j){f(j)}}function g(y){try{x(l.throw(y))}catch(j){f(j)}}function x(y){y.done?u(y.value):o(y.value).then(p,g)}x((l=l.apply(c,n||[])).next())})};class tg{constructor(n,a={},l,o){const u=new URL(n);o!=null&&o.useNewHostname&&/supabase\.(co|in|red)$/.test(u.hostname)&&!u.hostname.includes("storage.supabase.")&&(u.hostname=u.hostname.replace("supabase.","storage.supabase.")),this.url=u.href,this.headers=Object.assign(Object.assign({},eg),a),this.fetch=Mh(l)}listBuckets(){return Qs(this,void 0,void 0,function*(){try{return{data:yield ki(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(n){if(at(n))return{data:null,error:n};throw n}})}getBucket(n){return Qs(this,void 0,void 0,function*(){try{return{data:yield ki(this.fetch,`${this.url}/bucket/${n}`,{headers:this.headers}),error:null}}catch(a){if(at(a))return{data:null,error:a};throw a}})}createBucket(n,a={public:!1}){return Qs(this,void 0,void 0,function*(){try{return{data:yield cr(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:a.type,public:a.public,file_size_limit:a.fileSizeLimit,allowed_mime_types:a.allowedMimeTypes},{headers:this.headers}),error:null}}catch(l){if(at(l))return{data:null,error:l};throw l}})}updateBucket(n,a){return Qs(this,void 0,void 0,function*(){try{return{data:yield Oo(this.fetch,`${this.url}/bucket/${n}`,{id:n,name:n,public:a.public,file_size_limit:a.fileSizeLimit,allowed_mime_types:a.allowedMimeTypes},{headers:this.headers}),error:null}}catch(l){if(at(l))return{data:null,error:l};throw l}})}emptyBucket(n){return Qs(this,void 0,void 0,function*(){try{return{data:yield cr(this.fetch,`${this.url}/bucket/${n}/empty`,{},{headers:this.headers}),error:null}}catch(a){if(at(a))return{data:null,error:a};throw a}})}deleteBucket(n){return Qs(this,void 0,void 0,function*(){try{return{data:yield Lh(this.fetch,`${this.url}/bucket/${n}`,{},{headers:this.headers}),error:null}}catch(a){if(at(a))return{data:null,error:a};throw a}})}}class rg extends tg{constructor(n,a={},l,o){super(n,a,l,o)}from(n){return new Xp(this.url,this.headers,n,this.fetch)}}const sg="2.55.0";let Qn="";typeof Deno<"u"?Qn="deno":typeof document<"u"?Qn="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Qn="react-native":Qn="node";const ng={"X-Client-Info":`supabase-js-${Qn}/${sg}`},ag={headers:ng},ig={schema:"public"},lg={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},og={};var cg=function(c,n,a,l){function o(u){return u instanceof a?u:new a(function(f){f(u)})}return new(a||(a=Promise))(function(u,f){function p(y){try{x(l.next(y))}catch(j){f(j)}}function g(y){try{x(l.throw(y))}catch(j){f(j)}}function x(y){y.done?u(y.value):o(y.value).then(p,g)}x((l=l.apply(c,n||[])).next())})};const dg=c=>{let n;return c?n=c:typeof fetch>"u"?n=Ch:n=fetch,(...a)=>n(...a)},ug=()=>typeof Headers>"u"?Eh:Headers,hg=(c,n,a)=>{const l=dg(a),o=ug();return(u,f)=>cg(void 0,void 0,void 0,function*(){var p;const g=(p=yield n())!==null&&p!==void 0?p:c;let x=new o(f==null?void 0:f.headers);return x.has("apikey")||x.set("apikey",c),x.has("Authorization")||x.set("Authorization",`Bearer ${g}`),l(u,Object.assign(Object.assign({},f),{headers:x}))})};var fg=function(c,n,a,l){function o(u){return u instanceof a?u:new a(function(f){f(u)})}return new(a||(a=Promise))(function(u,f){function p(y){try{x(l.next(y))}catch(j){f(j)}}function g(y){try{x(l.throw(y))}catch(j){f(j)}}function x(y){y.done?u(y.value):o(y.value).then(p,g)}x((l=l.apply(c,n||[])).next())})};function mg(c){return c.endsWith("/")?c:c+"/"}function pg(c,n){var a,l;const{db:o,auth:u,realtime:f,global:p}=c,{db:g,auth:x,realtime:y,global:j}=n,C={db:Object.assign(Object.assign({},g),o),auth:Object.assign(Object.assign({},x),u),realtime:Object.assign(Object.assign({},y),f),storage:{},global:Object.assign(Object.assign(Object.assign({},j),p),{headers:Object.assign(Object.assign({},(a=j==null?void 0:j.headers)!==null&&a!==void 0?a:{}),(l=p==null?void 0:p.headers)!==null&&l!==void 0?l:{})}),accessToken:()=>fg(this,void 0,void 0,function*(){return""})};return c.accessToken?C.accessToken=c.accessToken:delete C.accessToken,C}const $h="2.71.1",Zs=30*1e3,Ro=3,jo=Ro*Zs,gg="http://localhost:9999",xg="supabase.auth.token",yg={"X-Client-Info":`gotrue-js/${$h}`},Mo="X-Supabase-Api-Version",Uh={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},vg=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,wg=10*60*1e3;class Wo extends Error{constructor(n,a,l){super(n),this.__isAuthError=!0,this.name="AuthError",this.status=a,this.code=l}}function De(c){return typeof c=="object"&&c!==null&&"__isAuthError"in c}class bg extends Wo{constructor(n,a,l){super(n,a,l),this.name="AuthApiError",this.status=a,this.code=l}}function jg(c){return De(c)&&c.name==="AuthApiError"}class Fh extends Wo{constructor(n,a){super(n),this.name="AuthUnknownError",this.originalError=a}}class Yr extends Wo{constructor(n,a,l,o){super(n,l,o),this.name=a,this.status=l}}class Qr extends Yr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Ng(c){return De(c)&&c.name==="AuthSessionMissingError"}class mi extends Yr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class pi extends Yr{constructor(n){super(n,"AuthInvalidCredentialsError",400,void 0)}}class gi extends Yr{constructor(n,a=null){super(n,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=a}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function _g(c){return De(c)&&c.name==="AuthImplicitGrantRedirectError"}class ah extends Yr{constructor(n,a=null){super(n,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=a}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Lo extends Yr{constructor(n,a){super(n,"AuthRetryableFetchError",a,void 0)}}function No(c){return De(c)&&c.name==="AuthRetryableFetchError"}class ih extends Yr{constructor(n,a,l){super(n,"AuthWeakPasswordError",a,"weak_password"),this.reasons=l}}class $o extends Yr{constructor(n){super(n,"AuthInvalidJwtError",400,"invalid_jwt")}}const Si="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),lh=` 	
\r=`.split(""),kg=(()=>{const c=new Array(128);for(let n=0;n<c.length;n+=1)c[n]=-1;for(let n=0;n<lh.length;n+=1)c[lh[n].charCodeAt(0)]=-2;for(let n=0;n<Si.length;n+=1)c[Si[n].charCodeAt(0)]=n;return c})();function oh(c,n,a){if(c!==null)for(n.queue=n.queue<<8|c,n.queuedBits+=8;n.queuedBits>=6;){const l=n.queue>>n.queuedBits-6&63;a(Si[l]),n.queuedBits-=6}else if(n.queuedBits>0)for(n.queue=n.queue<<6-n.queuedBits,n.queuedBits=6;n.queuedBits>=6;){const l=n.queue>>n.queuedBits-6&63;a(Si[l]),n.queuedBits-=6}}function zh(c,n,a){const l=kg[c];if(l>-1)for(n.queue=n.queue<<6|l,n.queuedBits+=6;n.queuedBits>=8;)a(n.queue>>n.queuedBits-8&255),n.queuedBits-=8;else{if(l===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(c)}"`)}}function ch(c){const n=[],a=f=>{n.push(String.fromCodePoint(f))},l={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},u=f=>{Eg(f,l,a)};for(let f=0;f<c.length;f+=1)zh(c.charCodeAt(f),o,u);return n.join("")}function Sg(c,n){if(c<=127){n(c);return}else if(c<=2047){n(192|c>>6),n(128|c&63);return}else if(c<=65535){n(224|c>>12),n(128|c>>6&63),n(128|c&63);return}else if(c<=1114111){n(240|c>>18),n(128|c>>12&63),n(128|c>>6&63),n(128|c&63);return}throw new Error(`Unrecognized Unicode codepoint: ${c.toString(16)}`)}function Cg(c,n){for(let a=0;a<c.length;a+=1){let l=c.charCodeAt(a);if(l>55295&&l<=56319){const o=(l-55296)*1024&65535;l=(c.charCodeAt(a+1)-56320&65535|o)+65536,a+=1}Sg(l,n)}}function Eg(c,n,a){if(n.utf8seq===0){if(c<=127){a(c);return}for(let l=1;l<6;l+=1)if((c>>7-l&1)===0){n.utf8seq=l;break}if(n.utf8seq===2)n.codepoint=c&31;else if(n.utf8seq===3)n.codepoint=c&15;else if(n.utf8seq===4)n.codepoint=c&7;else throw new Error("Invalid UTF-8 sequence");n.utf8seq-=1}else if(n.utf8seq>0){if(c<=127)throw new Error("Invalid UTF-8 sequence");n.codepoint=n.codepoint<<6|c&63,n.utf8seq-=1,n.utf8seq===0&&a(n.codepoint)}}function Tg(c){const n=[],a={queue:0,queuedBits:0},l=o=>{n.push(o)};for(let o=0;o<c.length;o+=1)zh(c.charCodeAt(o),a,l);return new Uint8Array(n)}function Pg(c){const n=[];return Cg(c,a=>n.push(a)),new Uint8Array(n)}function Dg(c){const n=[],a={queue:0,queuedBits:0},l=o=>{n.push(o)};return c.forEach(o=>oh(o,a,l)),oh(null,a,l),n.join("")}function Ag(c){return Math.round(Date.now()/1e3)+c}function Ig(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){const n=Math.random()*16|0;return(c=="x"?n:n&3|8).toString(16)})}const er=()=>typeof window<"u"&&typeof document<"u",us={tested:!1,writable:!1},qh=()=>{if(!er())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(us.tested)return us.writable;const c=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(c,c),globalThis.localStorage.removeItem(c),us.tested=!0,us.writable=!0}catch{us.tested=!0,us.writable=!1}return us.writable};function Og(c){const n={},a=new URL(c);if(a.hash&&a.hash[0]==="#")try{new URLSearchParams(a.hash.substring(1)).forEach((o,u)=>{n[u]=o})}catch{}return a.searchParams.forEach((l,o)=>{n[o]=l}),n}const Bh=c=>{let n;return c?n=c:typeof fetch>"u"?n=(...a)=>ea(async()=>{const{default:l}=await Promise.resolve().then(()=>nn);return{default:l}},void 0).then(({default:l})=>l(...a)):n=fetch,(...a)=>n(...a)},Rg=c=>typeof c=="object"&&c!==null&&"status"in c&&"ok"in c&&"json"in c&&typeof c.json=="function",en=async(c,n,a)=>{await c.setItem(n,JSON.stringify(a))},hs=async(c,n)=>{const a=await c.getItem(n);if(!a)return null;try{return JSON.parse(a)}catch{return a}},Kr=async(c,n)=>{await c.removeItem(n)};class Pi{constructor(){this.promise=new Pi.promiseConstructor((n,a)=>{this.resolve=n,this.reject=a})}}Pi.promiseConstructor=Promise;function _o(c){const n=c.split(".");if(n.length!==3)throw new $o("Invalid JWT structure");for(let l=0;l<n.length;l++)if(!vg.test(n[l]))throw new $o("JWT not in base64url format");return{header:JSON.parse(ch(n[0])),payload:JSON.parse(ch(n[1])),signature:Tg(n[2]),raw:{header:n[0],payload:n[1]}}}async function Mg(c){return await new Promise(n=>{setTimeout(()=>n(null),c)})}function Lg(c,n){return new Promise((l,o)=>{(async()=>{for(let u=0;u<1/0;u++)try{const f=await c(u);if(!n(u,null,f)){l(f);return}}catch(f){if(!n(u,f)){o(f);return}}})()})}function $g(c){return("0"+c.toString(16)).substr(-2)}function Ug(){const n=new Uint32Array(56);if(typeof crypto>"u"){const a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",l=a.length;let o="";for(let u=0;u<56;u++)o+=a.charAt(Math.floor(Math.random()*l));return o}return crypto.getRandomValues(n),Array.from(n,$g).join("")}async function Fg(c){const a=new TextEncoder().encode(c),l=await crypto.subtle.digest("SHA-256",a),o=new Uint8Array(l);return Array.from(o).map(u=>String.fromCharCode(u)).join("")}async function zg(c){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),c;const a=await Fg(c);return btoa(a).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Gs(c,n,a=!1){const l=Ug();let o=l;a&&(o+="/PASSWORD_RECOVERY"),await en(c,`${n}-code-verifier`,o);const u=await zg(l);return[u,l===u?"plain":"s256"]}const qg=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Bg(c){const n=c.headers.get(Mo);if(!n||!n.match(qg))return null;try{return new Date(`${n}T00:00:00.0Z`)}catch{return null}}function Vg(c){if(!c)throw new Error("Missing exp claim");const n=Math.floor(Date.now()/1e3);if(c<=n)throw new Error("JWT has expired")}function Hg(c){switch(c){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Wg=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ys(c){if(!Wg.test(c))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function ko(){const c={};return new Proxy(c,{get:(n,a)=>{if(a==="__isUserNotAvailableProxy")return!0;if(typeof a=="symbol"){const l=a.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${a}" property of the session object is not supported. Please use getUser() instead.`)},set:(n,a)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${a}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(n,a)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${a}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function dh(c){return JSON.parse(JSON.stringify(c))}var Kg=function(c,n){var a={};for(var l in c)Object.prototype.hasOwnProperty.call(c,l)&&n.indexOf(l)<0&&(a[l]=c[l]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,l=Object.getOwnPropertySymbols(c);o<l.length;o++)n.indexOf(l[o])<0&&Object.prototype.propertyIsEnumerable.call(c,l[o])&&(a[l[o]]=c[l[o]]);return a};const fs=c=>c.msg||c.message||c.error_description||c.error||JSON.stringify(c),Qg=[502,503,504];async function uh(c){var n;if(!Rg(c))throw new Lo(fs(c),0);if(Qg.includes(c.status))throw new Lo(fs(c),c.status);let a;try{a=await c.json()}catch(u){throw new Fh(fs(u),u)}let l;const o=Bg(c);if(o&&o.getTime()>=Uh["2024-01-01"].timestamp&&typeof a=="object"&&a&&typeof a.code=="string"?l=a.code:typeof a=="object"&&a&&typeof a.error_code=="string"&&(l=a.error_code),l){if(l==="weak_password")throw new ih(fs(a),c.status,((n=a.weak_password)===null||n===void 0?void 0:n.reasons)||[]);if(l==="session_not_found")throw new Qr}else if(typeof a=="object"&&a&&typeof a.weak_password=="object"&&a.weak_password&&Array.isArray(a.weak_password.reasons)&&a.weak_password.reasons.length&&a.weak_password.reasons.reduce((u,f)=>u&&typeof f=="string",!0))throw new ih(fs(a),c.status,a.weak_password.reasons);throw new bg(fs(a),c.status||500,l)}const Gg=(c,n,a,l)=>{const o={method:c,headers:(n==null?void 0:n.headers)||{}};return c==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},n==null?void 0:n.headers),o.body=JSON.stringify(l),Object.assign(Object.assign({},o),a))};async function Me(c,n,a,l){var o;const u=Object.assign({},l==null?void 0:l.headers);u[Mo]||(u[Mo]=Uh["2024-01-01"].name),l!=null&&l.jwt&&(u.Authorization=`Bearer ${l.jwt}`);const f=(o=l==null?void 0:l.query)!==null&&o!==void 0?o:{};l!=null&&l.redirectTo&&(f.redirect_to=l.redirectTo);const p=Object.keys(f).length?"?"+new URLSearchParams(f).toString():"",g=await Yg(c,n,a+p,{headers:u,noResolveJson:l==null?void 0:l.noResolveJson},{},l==null?void 0:l.body);return l!=null&&l.xform?l==null?void 0:l.xform(g):{data:Object.assign({},g),error:null}}async function Yg(c,n,a,l,o,u){const f=Gg(n,l,o,u);let p;try{p=await c(a,Object.assign({},f))}catch(g){throw console.error(g),new Lo(fs(g),0)}if(p.ok||await uh(p),l!=null&&l.noResolveJson)return p;try{return await p.json()}catch(g){await uh(g)}}function jr(c){var n;let a=null;e0(c)&&(a=Object.assign({},c),c.expires_at||(a.expires_at=Ag(c.expires_in)));const l=(n=c.user)!==null&&n!==void 0?n:c;return{data:{session:a,user:l},error:null}}function hh(c){const n=jr(c);return!n.error&&c.weak_password&&typeof c.weak_password=="object"&&Array.isArray(c.weak_password.reasons)&&c.weak_password.reasons.length&&c.weak_password.message&&typeof c.weak_password.message=="string"&&c.weak_password.reasons.reduce((a,l)=>a&&typeof l=="string",!0)&&(n.data.weak_password=c.weak_password),n}function Gr(c){var n;return{data:{user:(n=c.user)!==null&&n!==void 0?n:c},error:null}}function Jg(c){return{data:c,error:null}}function Xg(c){const{action_link:n,email_otp:a,hashed_token:l,redirect_to:o,verification_type:u}=c,f=Kg(c,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),p={action_link:n,email_otp:a,hashed_token:l,redirect_to:o,verification_type:u},g=Object.assign({},f);return{data:{properties:p,user:g},error:null}}function Zg(c){return c}function e0(c){return c.access_token&&c.refresh_token&&c.expires_in}const So=["global","local","others"];var t0=function(c,n){var a={};for(var l in c)Object.prototype.hasOwnProperty.call(c,l)&&n.indexOf(l)<0&&(a[l]=c[l]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,l=Object.getOwnPropertySymbols(c);o<l.length;o++)n.indexOf(l[o])<0&&Object.prototype.propertyIsEnumerable.call(c,l[o])&&(a[l[o]]=c[l[o]]);return a};class r0{constructor({url:n="",headers:a={},fetch:l}){this.url=n,this.headers=a,this.fetch=Bh(l),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(n,a=So[0]){if(So.indexOf(a)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${So.join(", ")}`);try{return await Me(this.fetch,"POST",`${this.url}/logout?scope=${a}`,{headers:this.headers,jwt:n,noResolveJson:!0}),{data:null,error:null}}catch(l){if(De(l))return{data:null,error:l};throw l}}async inviteUserByEmail(n,a={}){try{return await Me(this.fetch,"POST",`${this.url}/invite`,{body:{email:n,data:a.data},headers:this.headers,redirectTo:a.redirectTo,xform:Gr})}catch(l){if(De(l))return{data:{user:null},error:l};throw l}}async generateLink(n){try{const{options:a}=n,l=t0(n,["options"]),o=Object.assign(Object.assign({},l),a);return"newEmail"in l&&(o.new_email=l==null?void 0:l.newEmail,delete o.newEmail),await Me(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:Xg,redirectTo:a==null?void 0:a.redirectTo})}catch(a){if(De(a))return{data:{properties:null,user:null},error:a};throw a}}async createUser(n){try{return await Me(this.fetch,"POST",`${this.url}/admin/users`,{body:n,headers:this.headers,xform:Gr})}catch(a){if(De(a))return{data:{user:null},error:a};throw a}}async listUsers(n){var a,l,o,u,f,p,g;try{const x={nextPage:null,lastPage:0,total:0},y=await Me(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(l=(a=n==null?void 0:n.page)===null||a===void 0?void 0:a.toString())!==null&&l!==void 0?l:"",per_page:(u=(o=n==null?void 0:n.perPage)===null||o===void 0?void 0:o.toString())!==null&&u!==void 0?u:""},xform:Zg});if(y.error)throw y.error;const j=await y.json(),C=(f=y.headers.get("x-total-count"))!==null&&f!==void 0?f:0,D=(g=(p=y.headers.get("link"))===null||p===void 0?void 0:p.split(","))!==null&&g!==void 0?g:[];return D.length>0&&(D.forEach(U=>{const V=parseInt(U.split(";")[0].split("=")[1].substring(0,1)),q=JSON.parse(U.split(";")[1].split("=")[1]);x[`${q}Page`]=V}),x.total=parseInt(C)),{data:Object.assign(Object.assign({},j),x),error:null}}catch(x){if(De(x))return{data:{users:[]},error:x};throw x}}async getUserById(n){Ys(n);try{return await Me(this.fetch,"GET",`${this.url}/admin/users/${n}`,{headers:this.headers,xform:Gr})}catch(a){if(De(a))return{data:{user:null},error:a};throw a}}async updateUserById(n,a){Ys(n);try{return await Me(this.fetch,"PUT",`${this.url}/admin/users/${n}`,{body:a,headers:this.headers,xform:Gr})}catch(l){if(De(l))return{data:{user:null},error:l};throw l}}async deleteUser(n,a=!1){Ys(n);try{return await Me(this.fetch,"DELETE",`${this.url}/admin/users/${n}`,{headers:this.headers,body:{should_soft_delete:a},xform:Gr})}catch(l){if(De(l))return{data:{user:null},error:l};throw l}}async _listFactors(n){Ys(n.userId);try{const{data:a,error:l}=await Me(this.fetch,"GET",`${this.url}/admin/users/${n.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:a,error:l}}catch(a){if(De(a))return{data:null,error:a};throw a}}async _deleteFactor(n){Ys(n.userId),Ys(n.id);try{return{data:await Me(this.fetch,"DELETE",`${this.url}/admin/users/${n.userId}/factors/${n.id}`,{headers:this.headers}),error:null}}catch(a){if(De(a))return{data:null,error:a};throw a}}}function fh(c={}){return{getItem:n=>c[n]||null,setItem:(n,a)=>{c[n]=a},removeItem:n=>{delete c[n]}}}function s0(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Js={debug:!!(globalThis&&qh()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Vh extends Error{constructor(n){super(n),this.isAcquireTimeout=!0}}class n0 extends Vh{}async function a0(c,n,a){Js.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",c,n);const l=new globalThis.AbortController;return n>0&&setTimeout(()=>{l.abort(),Js.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",c)},n),await Promise.resolve().then(()=>globalThis.navigator.locks.request(c,n===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:l.signal},async o=>{if(o){Js.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",c,o.name);try{return await a()}finally{Js.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",c,o.name)}}else{if(n===0)throw Js.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",c),new n0(`Acquiring an exclusive Navigator LockManager lock "${c}" immediately failed`);if(Js.debug)try{const u=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(u,null,"  "))}catch(u){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",u)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await a()}}))}s0();const i0={url:gg,storageKey:xg,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:yg,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function mh(c,n,a){return await a()}const Xs={};class Zn{constructor(n){var a,l;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Zn.nextInstanceID,Zn.nextInstanceID+=1,this.instanceID>0&&er()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const o=Object.assign(Object.assign({},i0),n);if(this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.persistSession=o.persistSession,this.storageKey=o.storageKey,this.autoRefreshToken=o.autoRefreshToken,this.admin=new r0({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=Bh(o.fetch),this.lock=o.lock||mh,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,o.lock?this.lock=o.lock:er()&&(!((a=globalThis==null?void 0:globalThis.navigator)===null||a===void 0)&&a.locks)?this.lock=a0:this.lock=mh,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:qh()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=fh(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=fh(this.memoryStorage)),er()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(u){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",u)}(l=this.broadcastChannel)===null||l===void 0||l.addEventListener("message",async u=>{this._debug("received broadcast notification from other tab or client",u),await this._notifyAllSubscribers(u.data.event,u.data.session,!1)})}this.initialize()}get jwks(){var n,a;return(a=(n=Xs[this.storageKey])===null||n===void 0?void 0:n.jwks)!==null&&a!==void 0?a:{keys:[]}}set jwks(n){Xs[this.storageKey]=Object.assign(Object.assign({},Xs[this.storageKey]),{jwks:n})}get jwks_cached_at(){var n,a;return(a=(n=Xs[this.storageKey])===null||n===void 0?void 0:n.cachedAt)!==null&&a!==void 0?a:Number.MIN_SAFE_INTEGER}set jwks_cached_at(n){Xs[this.storageKey]=Object.assign(Object.assign({},Xs[this.storageKey]),{cachedAt:n})}_debug(...n){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${$h}) ${new Date().toISOString()}`,...n),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var n;try{const a=Og(window.location.href);let l="none";if(this._isImplicitGrantCallback(a)?l="implicit":await this._isPKCECallback(a)&&(l="pkce"),er()&&this.detectSessionInUrl&&l!=="none"){const{data:o,error:u}=await this._getSessionFromURL(a,l);if(u){if(this._debug("#_initialize()","error detecting session from URL",u),_g(u)){const g=(n=u.details)===null||n===void 0?void 0:n.code;if(g==="identity_already_exists"||g==="identity_not_found"||g==="single_identity_not_deletable")return{error:u}}return await this._removeSession(),{error:u}}const{session:f,redirectType:p}=o;return this._debug("#_initialize()","detected session in URL",f,"redirect type",p),await this._saveSession(f),setTimeout(async()=>{p==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",f):await this._notifyAllSubscribers("SIGNED_IN",f)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(a){return De(a)?{error:a}:{error:new Fh("Unexpected error during initialization",a)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(n){var a,l,o;try{const u=await Me(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(l=(a=n==null?void 0:n.options)===null||a===void 0?void 0:a.data)!==null&&l!==void 0?l:{},gotrue_meta_security:{captcha_token:(o=n==null?void 0:n.options)===null||o===void 0?void 0:o.captchaToken}},xform:jr}),{data:f,error:p}=u;if(p||!f)return{data:{user:null,session:null},error:p};const g=f.session,x=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",g)),{data:{user:x,session:g},error:null}}catch(u){if(De(u))return{data:{user:null,session:null},error:u};throw u}}async signUp(n){var a,l,o;try{let u;if("email"in n){const{email:y,password:j,options:C}=n;let D=null,U=null;this.flowType==="pkce"&&([D,U]=await Gs(this.storage,this.storageKey)),u=await Me(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:C==null?void 0:C.emailRedirectTo,body:{email:y,password:j,data:(a=C==null?void 0:C.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:C==null?void 0:C.captchaToken},code_challenge:D,code_challenge_method:U},xform:jr})}else if("phone"in n){const{phone:y,password:j,options:C}=n;u=await Me(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:y,password:j,data:(l=C==null?void 0:C.data)!==null&&l!==void 0?l:{},channel:(o=C==null?void 0:C.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:C==null?void 0:C.captchaToken}},xform:jr})}else throw new pi("You must provide either an email or phone number and a password");const{data:f,error:p}=u;if(p||!f)return{data:{user:null,session:null},error:p};const g=f.session,x=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",g)),{data:{user:x,session:g},error:null}}catch(u){if(De(u))return{data:{user:null,session:null},error:u};throw u}}async signInWithPassword(n){try{let a;if("email"in n){const{email:u,password:f,options:p}=n;a=await Me(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:u,password:f,gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:hh})}else if("phone"in n){const{phone:u,password:f,options:p}=n;a=await Me(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:u,password:f,gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:hh})}else throw new pi("You must provide either an email or phone number and a password");const{data:l,error:o}=a;return o?{data:{user:null,session:null},error:o}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new mi}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:Object.assign({user:l.user,session:l.session},l.weak_password?{weakPassword:l.weak_password}:null),error:o})}catch(a){if(De(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithOAuth(n){var a,l,o,u;return await this._handleProviderSignIn(n.provider,{redirectTo:(a=n.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=n.options)===null||l===void 0?void 0:l.scopes,queryParams:(o=n.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(u=n.options)===null||u===void 0?void 0:u.skipBrowserRedirect})}async exchangeCodeForSession(n){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(n))}async signInWithWeb3(n){const{chain:a}=n;if(a==="solana")return await this.signInWithSolana(n);throw new Error(`@supabase/auth-js: Unsupported chain "${a}"`)}async signInWithSolana(n){var a,l,o,u,f,p,g,x,y,j,C,D;let U,V;if("message"in n)U=n.message,V=n.signature;else{const{chain:q,wallet:I,statement:ie,options:M}=n;let X;if(er())if(typeof I=="object")X=I;else{const se=window;if("solana"in se&&typeof se.solana=="object"&&("signIn"in se.solana&&typeof se.solana.signIn=="function"||"signMessage"in se.solana&&typeof se.solana.signMessage=="function"))X=se.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof I!="object"||!(M!=null&&M.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");X=I}const B=new URL((a=M==null?void 0:M.url)!==null&&a!==void 0?a:window.location.href);if("signIn"in X&&X.signIn){const se=await X.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},M==null?void 0:M.signInWithSolana),{version:"1",domain:B.host,uri:B.href}),ie?{statement:ie}:null));let pe;if(Array.isArray(se)&&se[0]&&typeof se[0]=="object")pe=se[0];else if(se&&typeof se=="object"&&"signedMessage"in se&&"signature"in se)pe=se;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in pe&&"signature"in pe&&(typeof pe.signedMessage=="string"||pe.signedMessage instanceof Uint8Array)&&pe.signature instanceof Uint8Array)U=typeof pe.signedMessage=="string"?pe.signedMessage:new TextDecoder().decode(pe.signedMessage),V=pe.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in X)||typeof X.signMessage!="function"||!("publicKey"in X)||typeof X!="object"||!X.publicKey||!("toBase58"in X.publicKey)||typeof X.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");U=[`${B.host} wants you to sign in with your Solana account:`,X.publicKey.toBase58(),...ie?["",ie,""]:[""],"Version: 1",`URI: ${B.href}`,`Issued At: ${(o=(l=M==null?void 0:M.signInWithSolana)===null||l===void 0?void 0:l.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((u=M==null?void 0:M.signInWithSolana)===null||u===void 0)&&u.notBefore?[`Not Before: ${M.signInWithSolana.notBefore}`]:[],...!((f=M==null?void 0:M.signInWithSolana)===null||f===void 0)&&f.expirationTime?[`Expiration Time: ${M.signInWithSolana.expirationTime}`]:[],...!((p=M==null?void 0:M.signInWithSolana)===null||p===void 0)&&p.chainId?[`Chain ID: ${M.signInWithSolana.chainId}`]:[],...!((g=M==null?void 0:M.signInWithSolana)===null||g===void 0)&&g.nonce?[`Nonce: ${M.signInWithSolana.nonce}`]:[],...!((x=M==null?void 0:M.signInWithSolana)===null||x===void 0)&&x.requestId?[`Request ID: ${M.signInWithSolana.requestId}`]:[],...!((j=(y=M==null?void 0:M.signInWithSolana)===null||y===void 0?void 0:y.resources)===null||j===void 0)&&j.length?["Resources",...M.signInWithSolana.resources.map(pe=>`- ${pe}`)]:[]].join(`
`);const se=await X.signMessage(new TextEncoder().encode(U),"utf8");if(!se||!(se instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");V=se}}try{const{data:q,error:I}=await Me(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:U,signature:Dg(V)},!((C=n.options)===null||C===void 0)&&C.captchaToken?{gotrue_meta_security:{captcha_token:(D=n.options)===null||D===void 0?void 0:D.captchaToken}}:null),xform:jr});if(I)throw I;return!q||!q.session||!q.user?{data:{user:null,session:null},error:new mi}:(q.session&&(await this._saveSession(q.session),await this._notifyAllSubscribers("SIGNED_IN",q.session)),{data:Object.assign({},q),error:I})}catch(q){if(De(q))return{data:{user:null,session:null},error:q};throw q}}async _exchangeCodeForSession(n){const a=await hs(this.storage,`${this.storageKey}-code-verifier`),[l,o]=(a??"").split("/");try{const{data:u,error:f}=await Me(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:n,code_verifier:l},xform:jr});if(await Kr(this.storage,`${this.storageKey}-code-verifier`),f)throw f;return!u||!u.session||!u.user?{data:{user:null,session:null,redirectType:null},error:new mi}:(u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),{data:Object.assign(Object.assign({},u),{redirectType:o??null}),error:f})}catch(u){if(De(u))return{data:{user:null,session:null,redirectType:null},error:u};throw u}}async signInWithIdToken(n){try{const{options:a,provider:l,token:o,access_token:u,nonce:f}=n,p=await Me(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:l,id_token:o,access_token:u,nonce:f,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:jr}),{data:g,error:x}=p;return x?{data:{user:null,session:null},error:x}:!g||!g.session||!g.user?{data:{user:null,session:null},error:new mi}:(g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),{data:g,error:x})}catch(a){if(De(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithOtp(n){var a,l,o,u,f;try{if("email"in n){const{email:p,options:g}=n;let x=null,y=null;this.flowType==="pkce"&&([x,y]=await Gs(this.storage,this.storageKey));const{error:j}=await Me(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:p,data:(a=g==null?void 0:g.data)!==null&&a!==void 0?a:{},create_user:(l=g==null?void 0:g.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},code_challenge:x,code_challenge_method:y},redirectTo:g==null?void 0:g.emailRedirectTo});return{data:{user:null,session:null},error:j}}if("phone"in n){const{phone:p,options:g}=n,{data:x,error:y}=await Me(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:p,data:(o=g==null?void 0:g.data)!==null&&o!==void 0?o:{},create_user:(u=g==null?void 0:g.shouldCreateUser)!==null&&u!==void 0?u:!0,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},channel:(f=g==null?void 0:g.channel)!==null&&f!==void 0?f:"sms"}});return{data:{user:null,session:null,messageId:x==null?void 0:x.message_id},error:y}}throw new pi("You must provide either an email or phone number.")}catch(p){if(De(p))return{data:{user:null,session:null},error:p};throw p}}async verifyOtp(n){var a,l;try{let o,u;"options"in n&&(o=(a=n.options)===null||a===void 0?void 0:a.redirectTo,u=(l=n.options)===null||l===void 0?void 0:l.captchaToken);const{data:f,error:p}=await Me(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:u}}),redirectTo:o,xform:jr});if(p)throw p;if(!f)throw new Error("An error occurred on token verification.");const g=f.session,x=f.user;return g!=null&&g.access_token&&(await this._saveSession(g),await this._notifyAllSubscribers(n.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",g)),{data:{user:x,session:g},error:null}}catch(o){if(De(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithSSO(n){var a,l,o;try{let u=null,f=null;return this.flowType==="pkce"&&([u,f]=await Gs(this.storage,this.storageKey)),await Me(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:(l=(a=n.options)===null||a===void 0?void 0:a.redirectTo)!==null&&l!==void 0?l:void 0}),!((o=n==null?void 0:n.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:u,code_challenge_method:f}),headers:this.headers,xform:Jg})}catch(u){if(De(u))return{data:null,error:u};throw u}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async n=>{const{data:{session:a},error:l}=n;if(l)throw l;if(!a)throw new Qr;const{error:o}=await Me(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:a.access_token});return{data:{user:null,session:null},error:o}})}catch(n){if(De(n))return{data:{user:null,session:null},error:n};throw n}}async resend(n){try{const a=`${this.url}/resend`;if("email"in n){const{email:l,type:o,options:u}=n,{error:f}=await Me(this.fetch,"POST",a,{headers:this.headers,body:{email:l,type:o,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},redirectTo:u==null?void 0:u.emailRedirectTo});return{data:{user:null,session:null},error:f}}else if("phone"in n){const{phone:l,type:o,options:u}=n,{data:f,error:p}=await Me(this.fetch,"POST",a,{headers:this.headers,body:{phone:l,type:o,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}}});return{data:{user:null,session:null,messageId:f==null?void 0:f.message_id},error:p}}throw new pi("You must provide either an email or phone number and a type")}catch(a){if(De(a))return{data:{user:null,session:null},error:a};throw a}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async a=>a))}async _acquireLock(n,a){this._debug("#_acquireLock","begin",n);try{if(this.lockAcquired){const l=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await l,await a()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,n,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const l=a();for(this.pendingInLock.push((async()=>{try{await l}catch{}})()),await l;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await l}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(n){this._debug("#_useSession","begin");try{const a=await this.__loadSession();return await n(a)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let n=null;const a=await hs(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",a),a!==null&&(this._isValidSession(a)?n=a:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!n)return{data:{session:null},error:null};const l=n.expires_at?n.expires_at*1e3-Date.now()<jo:!1;if(this._debug("#__loadSession()",`session has${l?"":" not"} expired`,"expires_at",n.expires_at),!l){if(this.userStorage){const f=await hs(this.userStorage,this.storageKey+"-user");f!=null&&f.user?n.user=f.user:n.user=ko()}if(this.storage.isServer&&n.user){let f=this.suppressGetSessionWarning;n=new Proxy(n,{get:(g,x,y)=>(!f&&x==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),f=!0,this.suppressGetSessionWarning=!0),Reflect.get(g,x,y))})}return{data:{session:n},error:null}}const{session:o,error:u}=await this._callRefreshToken(n.refresh_token);return u?{data:{session:null},error:u}:{data:{session:o},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(n){return n?await this._getUser(n):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(n){try{return n?await Me(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:n,xform:Gr}):await this._useSession(async a=>{var l,o,u;const{data:f,error:p}=a;if(p)throw p;return!(!((l=f.session)===null||l===void 0)&&l.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Qr}:await Me(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(u=(o=f.session)===null||o===void 0?void 0:o.access_token)!==null&&u!==void 0?u:void 0,xform:Gr})})}catch(a){if(De(a))return Ng(a)&&(await this._removeSession(),await Kr(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:a};throw a}}async updateUser(n,a={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(n,a))}async _updateUser(n,a={}){try{return await this._useSession(async l=>{const{data:o,error:u}=l;if(u)throw u;if(!o.session)throw new Qr;const f=o.session;let p=null,g=null;this.flowType==="pkce"&&n.email!=null&&([p,g]=await Gs(this.storage,this.storageKey));const{data:x,error:y}=await Me(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:a==null?void 0:a.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:p,code_challenge_method:g}),jwt:f.access_token,xform:Gr});if(y)throw y;return f.user=x.user,await this._saveSession(f),await this._notifyAllSubscribers("USER_UPDATED",f),{data:{user:f.user},error:null}})}catch(l){if(De(l))return{data:{user:null},error:l};throw l}}async setSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(n))}async _setSession(n){try{if(!n.access_token||!n.refresh_token)throw new Qr;const a=Date.now()/1e3;let l=a,o=!0,u=null;const{payload:f}=_o(n.access_token);if(f.exp&&(l=f.exp,o=l<=a),o){const{session:p,error:g}=await this._callRefreshToken(n.refresh_token);if(g)return{data:{user:null,session:null},error:g};if(!p)return{data:{user:null,session:null},error:null};u=p}else{const{data:p,error:g}=await this._getUser(n.access_token);if(g)throw g;u={access_token:n.access_token,refresh_token:n.refresh_token,user:p.user,token_type:"bearer",expires_in:l-a,expires_at:l},await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)}return{data:{user:u.user,session:u},error:null}}catch(a){if(De(a))return{data:{session:null,user:null},error:a};throw a}}async refreshSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(n))}async _refreshSession(n){try{return await this._useSession(async a=>{var l;if(!n){const{data:f,error:p}=a;if(p)throw p;n=(l=f.session)!==null&&l!==void 0?l:void 0}if(!(n!=null&&n.refresh_token))throw new Qr;const{session:o,error:u}=await this._callRefreshToken(n.refresh_token);return u?{data:{user:null,session:null},error:u}:o?{data:{user:o.user,session:o},error:null}:{data:{user:null,session:null},error:null}})}catch(a){if(De(a))return{data:{user:null,session:null},error:a};throw a}}async _getSessionFromURL(n,a){try{if(!er())throw new gi("No browser detected.");if(n.error||n.error_description||n.error_code)throw new gi(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});switch(a){case"implicit":if(this.flowType==="pkce")throw new ah("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new gi("Not a valid implicit grant flow url.");break;default:}if(a==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!n.code)throw new ah("No code detected.");const{data:ie,error:M}=await this._exchangeCodeForSession(n.code);if(M)throw M;const X=new URL(window.location.href);return X.searchParams.delete("code"),window.history.replaceState(window.history.state,"",X.toString()),{data:{session:ie.session,redirectType:null},error:null}}const{provider_token:l,provider_refresh_token:o,access_token:u,refresh_token:f,expires_in:p,expires_at:g,token_type:x}=n;if(!u||!p||!f||!x)throw new gi("No session defined in URL");const y=Math.round(Date.now()/1e3),j=parseInt(p);let C=y+j;g&&(C=parseInt(g));const D=C-y;D*1e3<=Zs&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${D}s, should have been closer to ${j}s`);const U=C-j;y-U>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",U,C,y):y-U<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",U,C,y);const{data:V,error:q}=await this._getUser(u);if(q)throw q;const I={provider_token:l,provider_refresh_token:o,access_token:u,expires_in:j,expires_at:C,refresh_token:f,token_type:x,user:V.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:I,redirectType:n.type},error:null}}catch(l){if(De(l))return{data:{session:null,redirectType:null},error:l};throw l}}_isImplicitGrantCallback(n){return!!(n.access_token||n.error_description)}async _isPKCECallback(n){const a=await hs(this.storage,`${this.storageKey}-code-verifier`);return!!(n.code&&a)}async signOut(n={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(n))}async _signOut({scope:n}={scope:"global"}){return await this._useSession(async a=>{var l;const{data:o,error:u}=a;if(u)return{error:u};const f=(l=o.session)===null||l===void 0?void 0:l.access_token;if(f){const{error:p}=await this.admin.signOut(f,n);if(p&&!(jg(p)&&(p.status===404||p.status===401||p.status===403)))return{error:p}}return n!=="others"&&(await this._removeSession(),await Kr(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(n){const a=Ig(),l={id:a,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",a),this.stateChangeEmitters.delete(a)}};return this._debug("#onAuthStateChange()","registered callback with id",a),this.stateChangeEmitters.set(a,l),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(a)})))(),{data:{subscription:l}}}async _emitInitialSession(n){return await this._useSession(async a=>{var l,o;try{const{data:{session:u},error:f}=a;if(f)throw f;await((l=this.stateChangeEmitters.get(n))===null||l===void 0?void 0:l.callback("INITIAL_SESSION",u)),this._debug("INITIAL_SESSION","callback id",n,"session",u)}catch(u){await((o=this.stateChangeEmitters.get(n))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",n,"error",u),console.error(u)}})}async resetPasswordForEmail(n,a={}){let l=null,o=null;this.flowType==="pkce"&&([l,o]=await Gs(this.storage,this.storageKey,!0));try{return await Me(this.fetch,"POST",`${this.url}/recover`,{body:{email:n,code_challenge:l,code_challenge_method:o,gotrue_meta_security:{captcha_token:a.captchaToken}},headers:this.headers,redirectTo:a.redirectTo})}catch(u){if(De(u))return{data:null,error:u};throw u}}async getUserIdentities(){var n;try{const{data:a,error:l}=await this.getUser();if(l)throw l;return{data:{identities:(n=a.user.identities)!==null&&n!==void 0?n:[]},error:null}}catch(a){if(De(a))return{data:null,error:a};throw a}}async linkIdentity(n){var a;try{const{data:l,error:o}=await this._useSession(async u=>{var f,p,g,x,y;const{data:j,error:C}=u;if(C)throw C;const D=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,n.provider,{redirectTo:(f=n.options)===null||f===void 0?void 0:f.redirectTo,scopes:(p=n.options)===null||p===void 0?void 0:p.scopes,queryParams:(g=n.options)===null||g===void 0?void 0:g.queryParams,skipBrowserRedirect:!0});return await Me(this.fetch,"GET",D,{headers:this.headers,jwt:(y=(x=j.session)===null||x===void 0?void 0:x.access_token)!==null&&y!==void 0?y:void 0})});if(o)throw o;return er()&&!(!((a=n.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(l==null?void 0:l.url),{data:{provider:n.provider,url:l==null?void 0:l.url},error:null}}catch(l){if(De(l))return{data:{provider:n.provider,url:null},error:l};throw l}}async unlinkIdentity(n){try{return await this._useSession(async a=>{var l,o;const{data:u,error:f}=a;if(f)throw f;return await Me(this.fetch,"DELETE",`${this.url}/user/identities/${n.identity_id}`,{headers:this.headers,jwt:(o=(l=u.session)===null||l===void 0?void 0:l.access_token)!==null&&o!==void 0?o:void 0})})}catch(a){if(De(a))return{data:null,error:a};throw a}}async _refreshAccessToken(n){const a=`#_refreshAccessToken(${n.substring(0,5)}...)`;this._debug(a,"begin");try{const l=Date.now();return await Lg(async o=>(o>0&&await Mg(200*Math.pow(2,o-1)),this._debug(a,"refreshing attempt",o),await Me(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:this.headers,xform:jr})),(o,u)=>{const f=200*Math.pow(2,o);return u&&No(u)&&Date.now()+f-l<Zs})}catch(l){if(this._debug(a,"error",l),De(l))return{data:{session:null,user:null},error:l};throw l}finally{this._debug(a,"end")}}_isValidSession(n){return typeof n=="object"&&n!==null&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}async _handleProviderSignIn(n,a){const l=await this._getUrlForProvider(`${this.url}/authorize`,n,{redirectTo:a.redirectTo,scopes:a.scopes,queryParams:a.queryParams});return this._debug("#_handleProviderSignIn()","provider",n,"options",a,"url",l),er()&&!a.skipBrowserRedirect&&window.location.assign(l),{data:{provider:n,url:l},error:null}}async _recoverAndRefresh(){var n,a;const l="#_recoverAndRefresh()";this._debug(l,"begin");try{const o=await hs(this.storage,this.storageKey);if(o&&this.userStorage){let f=await hs(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!f&&(f={user:o.user},await en(this.userStorage,this.storageKey+"-user",f)),o.user=(n=f==null?void 0:f.user)!==null&&n!==void 0?n:ko()}else if(o&&!o.user&&!o.user){const f=await hs(this.storage,this.storageKey+"-user");f&&(f!=null&&f.user)?(o.user=f.user,await Kr(this.storage,this.storageKey+"-user"),await en(this.storage,this.storageKey,o)):o.user=ko()}if(this._debug(l,"session from storage",o),!this._isValidSession(o)){this._debug(l,"session is not valid"),o!==null&&await this._removeSession();return}const u=((a=o.expires_at)!==null&&a!==void 0?a:1/0)*1e3-Date.now()<jo;if(this._debug(l,`session has${u?"":" not"} expired with margin of ${jo}s`),u){if(this.autoRefreshToken&&o.refresh_token){const{error:f}=await this._callRefreshToken(o.refresh_token);f&&(console.error(f),No(f)||(this._debug(l,"refresh failed with a non-retryable error, removing the session",f),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:f,error:p}=await this._getUser(o.access_token);!p&&(f!=null&&f.user)?(o.user=f.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(l,"could not get user data, skipping SIGNED_IN notification")}catch(f){console.error("Error getting user data:",f),this._debug(l,"error getting user data, skipping SIGNED_IN notification",f)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(l,"error",o),console.error(o);return}finally{this._debug(l,"end")}}async _callRefreshToken(n){var a,l;if(!n)throw new Qr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${n.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new Pi;const{data:u,error:f}=await this._refreshAccessToken(n);if(f)throw f;if(!u.session)throw new Qr;await this._saveSession(u.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",u.session);const p={session:u.session,error:null};return this.refreshingDeferred.resolve(p),p}catch(u){if(this._debug(o,"error",u),De(u)){const f={session:null,error:u};return No(u)||await this._removeSession(),(a=this.refreshingDeferred)===null||a===void 0||a.resolve(f),f}throw(l=this.refreshingDeferred)===null||l===void 0||l.reject(u),u}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(n,a,l=!0){const o=`#_notifyAllSubscribers(${n})`;this._debug(o,"begin",a,`broadcast = ${l}`);try{this.broadcastChannel&&l&&this.broadcastChannel.postMessage({event:n,session:a});const u=[],f=Array.from(this.stateChangeEmitters.values()).map(async p=>{try{await p.callback(n,a)}catch(g){u.push(g)}});if(await Promise.all(f),u.length>0){for(let p=0;p<u.length;p+=1)console.error(u[p]);throw u[0]}}finally{this._debug(o,"end")}}async _saveSession(n){this._debug("#_saveSession()",n),this.suppressGetSessionWarning=!0;const a=Object.assign({},n),l=a.user&&a.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!l&&a.user&&await en(this.userStorage,this.storageKey+"-user",{user:a.user});const o=Object.assign({},a);delete o.user;const u=dh(o);await en(this.storage,this.storageKey,u)}else{const o=dh(a);await en(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),await Kr(this.storage,this.storageKey),await Kr(this.storage,this.storageKey+"-code-verifier"),await Kr(this.storage,this.storageKey+"-user"),this.userStorage&&await Kr(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&er()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",n)}catch(a){console.error("removing visibilitychange callback failed",a)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const n=setInterval(()=>this._autoRefreshTokenTick(),Zs);this.autoRefreshTicker=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const n=this.autoRefreshTicker;this.autoRefreshTicker=null,n&&clearInterval(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const n=Date.now();try{return await this._useSession(async a=>{const{data:{session:l}}=a;if(!l||!l.refresh_token||!l.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((l.expires_at*1e3-n)/Zs);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${Zs}ms, refresh threshold is ${Ro} ticks`),o<=Ro&&await this._callRefreshToken(l.refresh_token)})}catch(a){console.error("Auto refresh tick failed with error. This is likely a transient error.",a)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(n){if(n.isAcquireTimeout||n instanceof Vh)this._debug("auto refresh token tick lock not available");else throw n}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!er()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(n){console.error("_handleVisibilityChange",n)}}async _onVisibilityChanged(n){const a=`#_onVisibilityChanged(${n})`;this._debug(a,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),n||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(a,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(n,a,l){const o=[`provider=${encodeURIComponent(a)}`];if(l!=null&&l.redirectTo&&o.push(`redirect_to=${encodeURIComponent(l.redirectTo)}`),l!=null&&l.scopes&&o.push(`scopes=${encodeURIComponent(l.scopes)}`),this.flowType==="pkce"){const[u,f]=await Gs(this.storage,this.storageKey),p=new URLSearchParams({code_challenge:`${encodeURIComponent(u)}`,code_challenge_method:`${encodeURIComponent(f)}`});o.push(p.toString())}if(l!=null&&l.queryParams){const u=new URLSearchParams(l.queryParams);o.push(u.toString())}return l!=null&&l.skipBrowserRedirect&&o.push(`skip_http_redirect=${l.skipBrowserRedirect}`),`${n}?${o.join("&")}`}async _unenroll(n){try{return await this._useSession(async a=>{var l;const{data:o,error:u}=a;return u?{data:null,error:u}:await Me(this.fetch,"DELETE",`${this.url}/factors/${n.factorId}`,{headers:this.headers,jwt:(l=o==null?void 0:o.session)===null||l===void 0?void 0:l.access_token})})}catch(a){if(De(a))return{data:null,error:a};throw a}}async _enroll(n){try{return await this._useSession(async a=>{var l,o;const{data:u,error:f}=a;if(f)return{data:null,error:f};const p=Object.assign({friendly_name:n.friendlyName,factor_type:n.factorType},n.factorType==="phone"?{phone:n.phone}:{issuer:n.issuer}),{data:g,error:x}=await Me(this.fetch,"POST",`${this.url}/factors`,{body:p,headers:this.headers,jwt:(l=u==null?void 0:u.session)===null||l===void 0?void 0:l.access_token});return x?{data:null,error:x}:(n.factorType==="totp"&&(!((o=g==null?void 0:g.totp)===null||o===void 0)&&o.qr_code)&&(g.totp.qr_code=`data:image/svg+xml;utf-8,${g.totp.qr_code}`),{data:g,error:null})})}catch(a){if(De(a))return{data:null,error:a};throw a}}async _verify(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async a=>{var l;const{data:o,error:u}=a;if(u)return{data:null,error:u};const{data:f,error:p}=await Me(this.fetch,"POST",`${this.url}/factors/${n.factorId}/verify`,{body:{code:n.code,challenge_id:n.challengeId},headers:this.headers,jwt:(l=o==null?void 0:o.session)===null||l===void 0?void 0:l.access_token});return p?{data:null,error:p}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+f.expires_in},f)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",f),{data:f,error:p})})}catch(a){if(De(a))return{data:null,error:a};throw a}})}async _challenge(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async a=>{var l;const{data:o,error:u}=a;return u?{data:null,error:u}:await Me(this.fetch,"POST",`${this.url}/factors/${n.factorId}/challenge`,{body:{channel:n.channel},headers:this.headers,jwt:(l=o==null?void 0:o.session)===null||l===void 0?void 0:l.access_token})})}catch(a){if(De(a))return{data:null,error:a};throw a}})}async _challengeAndVerify(n){const{data:a,error:l}=await this._challenge({factorId:n.factorId});return l?{data:null,error:l}:await this._verify({factorId:n.factorId,challengeId:a.id,code:n.code})}async _listFactors(){const{data:{user:n},error:a}=await this.getUser();if(a)return{data:null,error:a};const l=(n==null?void 0:n.factors)||[],o=l.filter(f=>f.factor_type==="totp"&&f.status==="verified"),u=l.filter(f=>f.factor_type==="phone"&&f.status==="verified");return{data:{all:l,totp:o,phone:u},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async n=>{var a,l;const{data:{session:o},error:u}=n;if(u)return{data:null,error:u};if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:f}=_o(o.access_token);let p=null;f.aal&&(p=f.aal);let g=p;((l=(a=o.user.factors)===null||a===void 0?void 0:a.filter(j=>j.status==="verified"))!==null&&l!==void 0?l:[]).length>0&&(g="aal2");const y=f.amr||[];return{data:{currentLevel:p,nextLevel:g,currentAuthenticationMethods:y},error:null}}))}async fetchJwk(n,a={keys:[]}){let l=a.keys.find(p=>p.kid===n);if(l)return l;const o=Date.now();if(l=this.jwks.keys.find(p=>p.kid===n),l&&this.jwks_cached_at+wg>o)return l;const{data:u,error:f}=await Me(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(f)throw f;return!u.keys||u.keys.length===0||(this.jwks=u,this.jwks_cached_at=o,l=u.keys.find(p=>p.kid===n),!l)?null:l}async getClaims(n,a={}){try{let l=n;if(!l){const{data:D,error:U}=await this.getSession();if(U||!D.session)return{data:null,error:U};l=D.session.access_token}const{header:o,payload:u,signature:f,raw:{header:p,payload:g}}=_o(l);a!=null&&a.allowExpired||Vg(u.exp);const x=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,a!=null&&a.keys?{keys:a.keys}:a==null?void 0:a.jwks);if(!x){const{error:D}=await this.getUser(l);if(D)throw D;return{data:{claims:u,header:o,signature:f},error:null}}const y=Hg(o.alg),j=await crypto.subtle.importKey("jwk",x,y,!0,["verify"]);if(!await crypto.subtle.verify(y,j,f,Pg(`${p}.${g}`)))throw new $o("Invalid JWT signature");return{data:{claims:u,header:o,signature:f},error:null}}catch(l){if(De(l))return{data:null,error:l};throw l}}}Zn.nextInstanceID=0;const l0=Zn;class o0 extends l0{constructor(n){super(n)}}var c0=function(c,n,a,l){function o(u){return u instanceof a?u:new a(function(f){f(u)})}return new(a||(a=Promise))(function(u,f){function p(y){try{x(l.next(y))}catch(j){f(j)}}function g(y){try{x(l.throw(y))}catch(j){f(j)}}function x(y){y.done?u(y.value):o(y.value).then(p,g)}x((l=l.apply(c,n||[])).next())})};class d0{constructor(n,a,l){var o,u,f;if(this.supabaseUrl=n,this.supabaseKey=a,!n)throw new Error("supabaseUrl is required.");if(!a)throw new Error("supabaseKey is required.");const p=mg(n),g=new URL(p);this.realtimeUrl=new URL("realtime/v1",g),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",g),this.storageUrl=new URL("storage/v1",g),this.functionsUrl=new URL("functions/v1",g);const x=`sb-${g.hostname.split(".")[0]}-auth-token`,y={db:ig,realtime:og,auth:Object.assign(Object.assign({},lg),{storageKey:x}),global:ag},j=pg(l??{},y);this.storageKey=(o=j.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(u=j.global.headers)!==null&&u!==void 0?u:{},j.accessToken?(this.accessToken=j.accessToken,this.auth=new Proxy({},{get:(C,D)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(D)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((f=j.auth)!==null&&f!==void 0?f:{},this.headers,j.global.fetch),this.fetch=hg(a,this._getAccessToken.bind(this),j.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},j.realtime)),this.rest=new Sp(new URL("rest/v1",g).href,{headers:this.headers,schema:j.db.schema,fetch:this.fetch}),this.storage=new rg(this.storageUrl.href,this.headers,this.fetch,l==null?void 0:l.storage),j.accessToken||this._listenForAuthEvents()}get functions(){return new mp(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(n){return this.rest.from(n)}schema(n){return this.rest.schema(n)}rpc(n,a={},l={}){return this.rest.rpc(n,a,l)}channel(n,a={config:{}}){return this.realtime.channel(n,a)}getChannels(){return this.realtime.getChannels()}removeChannel(n){return this.realtime.removeChannel(n)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var n,a;return c0(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:l}=yield this.auth.getSession();return(a=(n=l.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:n,persistSession:a,detectSessionInUrl:l,storage:o,storageKey:u,flowType:f,lock:p,debug:g},x,y){const j={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new o0({url:this.authUrl.href,headers:Object.assign(Object.assign({},j),x),storageKey:u,autoRefreshToken:n,persistSession:a,detectSessionInUrl:l,storage:o,flowType:f,lock:p,debug:g,fetch:y,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(n){return new Bp(this.realtimeUrl.href,Object.assign(Object.assign({},n),{params:Object.assign({apikey:this.supabaseKey},n==null?void 0:n.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((a,l)=>{this._handleTokenChanged(a,"CLIENT",l==null?void 0:l.access_token)})}_handleTokenChanged(n,a,l){(n==="TOKEN_REFRESHED"||n==="SIGNED_IN")&&this.changedAccessToken!==l?this.changedAccessToken=l:n==="SIGNED_OUT"&&(this.realtime.setAuth(),a=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const u0=(c,n,a)=>new d0(c,n,a);function h0(){if(typeof window<"u"||typeof process>"u")return!1;const c=process.version;if(c==null)return!1;const n=c.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}h0()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Hh="https://qqewusetilxxfvfkmsed.supabase.co",Wh="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFxZXd1c2V0aWx4eGZ2Zmttc2VkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUzNjI2NTUsImV4cCI6MjA3MDkzODY1NX0.-x783XXpilPWC3O-cJqmdSTmhpAvObk_MSElfGdrU8s";console.log(" Supabase Configuration:");console.log("URL Source:","Fallback ");console.log("Key Source:","Fallback ");console.log("Connection Ready ");const re=u0(Hh,Wh,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0},global:{headers:{"x-application":"fets-point"}}});console.log(" Supabase client created successfully");const cx={url:Hh,keyPreview:Wh.substring(0,20)+"..."},Kh=P.createContext(void 0);function f0({children:c}){const[n,a]=P.useState(null),[l,o]=P.useState(null),[u,f]=P.useState(!0),p=async y=>{try{console.log(" Loading user profile for:",y);const{data:j,error:C}=await re.from("profiles").select("*").eq("user_id",y).maybeSingle();C?(console.error(" Error loading profile:",C.message),o(null)):(console.log(" Profile loaded:",j?"Found":"Not found"),o(j))}catch(j){console.error(" Exception loading profile:",j.message),o(null)}};P.useEffect(()=>{let y=!0;async function j(){try{console.log(" Loading initial user session...");const{data:{user:D},error:U}=await re.auth.getUser();if(!y)return;if(U){console.error(" Error loading user:",U.message),a(null),o(null);return}console.log(" User loaded:",D?"Authenticated":"Not authenticated"),a(D),D&&await p(D.id)}catch(D){console.error(" Exception loading user:",D.message),y&&(a(null),o(null))}finally{y&&f(!1)}}j();const{data:{subscription:C}}=re.auth.onAuthStateChange((D,U)=>{if(!y)return;console.log(" Auth state changed:",D);const V=(U==null?void 0:U.user)||null;a(V),V?p(V.id):o(null)});return()=>{y=!1,C.unsubscribe()}},[]);async function g(y,j){try{console.log(" Attempting sign in for:",y);const C=await re.auth.signInWithPassword({email:y,password:j});return C.error?console.error(" Sign in error:",C.error.message):console.log(" Sign in successful"),C}catch(C){return console.error(" Sign in exception:",C.message),{error:C}}}async function x(){try{console.log(" Signing out..."),a(null),o(null),f(!1);const y=await re.auth.signOut();return y.error?console.error(" Sign out error:",y.error.message):console.log(" Sign out successful"),y}catch(y){return console.error(" Sign out exception:",y.message),{error:y}}}return r.jsx(Kh.Provider,{value:{user:n,loading:u,signIn:g,signOut:x,profile:l},children:c})}function It(){const c=P.useContext(Kh);if(c===void 0)throw new Error("useAuth must be used within an AuthProvider");return c}const Qh=P.createContext(void 0);function m0({children:c}){const[n,a]=P.useState(()=>localStorage.getItem("fets-point-theme")==="dark");P.useEffect(()=>{localStorage.setItem("fets-point-theme",n?"dark":"light"),n?document.body.classList.add("dark-mode"):document.body.classList.remove("dark-mode")},[n]);const l=()=>{a(o=>!o)};return r.jsx(Qh.Provider,{value:{isDarkMode:n,toggleDarkMode:l},children:c})}function p0(){const c=P.useContext(Qh);if(c===void 0)throw new Error("useTheme must be used within a ThemeProvider");return c}/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var g0={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x0=c=>c.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=(c,n)=>{const a=P.forwardRef(({color:l="currentColor",size:o=24,strokeWidth:u=2,absoluteStrokeWidth:f,className:p="",children:g,...x},y)=>P.createElement("svg",{ref:y,...g0,width:o,height:o,stroke:l,strokeWidth:f?Number(u)*24/Number(o):u,className:["lucide",`lucide-${x0(c)}`,p].join(" "),...x},[...n.map(([j,C])=>P.createElement(j,C)),...Array.isArray(g)?g:[g]]));return a.displayName=`${c}`,a};/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gh=be("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ph=be("BarChart",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xn=be("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xi=be("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y0=be("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ht=be("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ko=be("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qo=be("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Go=be("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=be("CircleCheckBig",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gh=be("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xh=be("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v0=be("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sr=be("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w0=be("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b0=be("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ps=be("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ci=be("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yh=be("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yh=be("FolderPlus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j0=be("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jh=be("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N0=be("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xh=be("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yi=be("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _0=be("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ei=be("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k0=be("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S0=be("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C0=be("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E0=be("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T0=be("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P0=be("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ti=be("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vt=be("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wn=be("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kn=be("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ra=be("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vh=be("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sa=be("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D0=be("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sn=be("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wh=be("SquareCheckBig",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gs=be("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A0=be("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I0=be("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O0=be("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hr=be("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vi=be("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ur=be("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wi=be("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _r=be("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uo=be("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R0=be("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kr=be("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rr=be("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fo=be("Vault",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}],["path",{d:"m7.9 7.9 2.7 2.7",key:"hpeyl3"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}],["path",{d:"m13.4 10.6 2.7-2.7",key:"264c1n"}],["circle",{cx:"7.5",cy:"16.5",r:".5",fill:"currentColor",key:"nkw3mc"}],["path",{d:"m7.9 16.1 2.7-2.7",key:"p81g5e"}],["circle",{cx:"16.5",cy:"16.5",r:".5",fill:"currentColor",key:"fubopw"}],["path",{d:"m13.4 13.4 2.7 2.7",key:"abhel3"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.364.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mt=be("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function M0(){const[c,n]=P.useState("mithun@fets.in"),[a,l]=P.useState("123456"),[o,u]=P.useState(!1),[f,p]=P.useState(""),{signIn:g}=It(),x=async y=>{y.preventDefault(),u(!0),p("");try{const{error:j}=await g(c,a);j&&p(`Login failed: ${j.message}`)}catch(j){p(`Exception: ${j.message||"Login failed"}`)}finally{u(!1)}};return r.jsx("div",{className:"login-dark-theme flex items-center justify-center p-4 relative",children:r.jsxs("div",{className:"text-center max-w-md mx-auto",children:[r.jsxs("div",{className:"mb-12",children:[r.jsx("div",{className:"golden-logo inline-block mb-6",children:r.jsx("img",{src:"/fets-point-logo.png",alt:"FETS POINT",className:"h-16 w-16"})}),r.jsx("h1",{className:"golden-title mb-2",children:"FETS POINT"}),r.jsx("p",{className:"golden-subtitle",children:"Operational Platform Management Console"}),r.jsx("div",{className:"w-16 h-1 bg-gradient-to-r from-transparent via-yellow-400 to-transparent mx-auto mt-4"})]}),r.jsxs("div",{className:"golden-card p-8 max-w-sm mx-auto",children:[r.jsxs("div",{className:"text-center mb-6",children:[r.jsx("div",{className:"golden-logo inline-block p-3 mb-4",children:r.jsx(sn,{className:"h-6 w-6 text-black"})}),r.jsx("h2",{className:"text-xl font-semibold text-white mb-2",children:"Secure Access"}),r.jsx("p",{className:"text-sm text-gray-300",children:"Enter your credentials to access the platform management console"})]}),!1,r.jsxs("form",{onSubmit:x,className:"space-y-4",children:[f&&r.jsxs("div",{className:"golden-error",children:[r.jsx("div",{className:"font-medium text-sm",children:"Error:"}),r.jsx("div",{className:"text-xs mt-1",children:f})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-300 mb-2",children:"Email Address"}),r.jsx("input",{id:"email",type:"email",value:c,onChange:y=>n(y.target.value),className:"golden-input w-full",placeholder:"Enter your email",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-300 mb-2",children:"Password"}),r.jsx("input",{id:"password",type:"password",value:a,onChange:y=>l(y.target.value),className:"golden-input w-full",placeholder:"Enter your password",required:!0})]}),r.jsxs("button",{type:"submit",disabled:o,className:"golden-button w-full flex items-center justify-center space-x-2",children:[r.jsx(sn,{className:"h-4 w-4"}),r.jsx("span",{children:o?"Accessing...":"Access Platform Management Console"})]})]}),!1]}),r.jsxs("div",{className:"flex justify-center space-x-2 mt-8",children:[r.jsx("div",{className:"w-2 h-2 rounded-full bg-yellow-400"}),r.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-600"}),r.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-600"})]})]})})}function bi({title:c,value:n,subtitle:a,icon:l,status:o="primary",onClick:u,clickable:f=!1}){const p={positive:"status-positive",warning:"status-warning",neutral:"status-neutral",primary:"status-warning"}[o];return r.jsxs("div",{className:`stats-card ${f?"cursor-pointer":""}`,onClick:f?u:void 0,children:[r.jsx("div",{className:"stats-card-title",children:c}),r.jsx("div",{className:"stats-card-number",children:n}),r.jsx("div",{className:"stats-card-subtitle",children:a}),r.jsx("div",{className:`stats-icon ${p}`,children:r.jsx(l,{})})]})}function bh({onNavigate:c}={}){const{profile:n}=It(),[a,l]=P.useState({todaysCandidates:{count:0,subtitle:"Loading..."},checkedIn:{count:0,subtitle:"Loading..."},inProgress:{count:0,subtitle:"Loading..."},completed:{count:0,subtitle:"Loading..."}}),[o,u]=P.useState({total:0,open:0,inProgress:0,resolved:0}),[f,p]=P.useState({todayInstances:0,completedInstances:0,totalProgress:0});P.useEffect(()=>{g(),x(),y()},[]);const g=async()=>{try{const D=new Date().toISOString().split("T")[0],{data:U}=await re.from("candidates").select("*").gte("exam_date",`${D}T00:00:00Z`).lt("exam_date",`${D}T23:59:59Z`);if(U){const V=U.filter(ie=>ie.status==="checked_in").length,q=U.filter(ie=>ie.status==="in_progress").length,I=U.filter(ie=>ie.status==="completed").length;l({todaysCandidates:{count:U.length,subtitle:U.length>0?"Scheduled for today":"No candidates today"},checkedIn:{count:V,subtitle:V>0?"Currently checked in":"None checked in"},inProgress:{count:q,subtitle:q>0?"Active exams":"No active exams"},completed:{count:I,subtitle:I>0?"Finished today":"No completions yet"}})}else throw new Error("No data available")}catch(D){console.error("Error loading candidate metrics:",D),l({todaysCandidates:{count:0,subtitle:"No candidates today"},checkedIn:{count:0,subtitle:"None checked in"},inProgress:{count:0,subtitle:"No active exams"},completed:{count:0,subtitle:"No completed exams"}})}},x=async()=>{try{const{data:D}=await re.from("incidents").select("*");if(D){const U={total:D.length,open:D.filter(V=>V.status==="open").length,inProgress:D.filter(V=>V.status==="in_progress").length,resolved:D.filter(V=>V.status==="rectified"||V.status==="closed").length};u(U)}}catch(D){console.error("Error loading incident stats:",D)}},y=async()=>{try{const D=new Date().toISOString().split("T")[0],{data:U}=await re.from("checklist_instances").select(`
          *,
          items:checklist_instance_items(*)
        `);if(U){const V=U.filter(X=>X.exam_date===D).length,q=U.filter(X=>X.completed_at).length;let I=0,ie=0;U.forEach(X=>{X.items&&(I+=X.items.length,ie+=X.items.filter(B=>B.is_completed).length)});const M=I>0?Math.round(ie/I*100):0;p({todayInstances:V,completedInstances:q,totalProgress:M})}}catch(D){console.error("Error loading checklist stats:",D)}},j=()=>n!=null&&n.full_name?n.full_name.split(" ")[0]:"User",C=()=>{const D=new Date().getHours();return D<12?"Good morning":D<17?"Good afternoon":"Good evening"};return r.jsx("div",{className:"dashboard-modern flex-1 overflow-auto",children:r.jsxs("div",{className:"dashboard-centered",children:[r.jsx("div",{className:"dashboard-section",children:r.jsx("div",{className:"modern-card p-6 mb-8",style:{background:"var(--primary-gradient)",color:"white",border:"none"},children:r.jsxs("div",{className:"flex items-center justify-between flex-col sm:flex-row space-y-4 sm:space-y-0",children:[r.jsxs("div",{className:"text-center sm:text-left",children:[r.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold mb-2",children:[C(),", ",j(),"! "]}),r.jsx("p",{className:"text-white/90 text-lg",children:"Welcome to your FETS POINT Platform Management Console"}),r.jsxs("div",{className:"flex items-center justify-center sm:justify-start mt-3 text-sm",children:[r.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full mr-2 animate-pulse"}),r.jsx("span",{className:"text-white/80",children:"System operational - All services running"})]})]}),r.jsx("div",{className:"hidden sm:block bg-white/20 rounded-full px-4 py-2",children:r.jsx("span",{className:"text-white text-sm font-semibold",children:new Date().toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})})})]})})}),r.jsxs("div",{className:"dashboard-section",children:[r.jsx("h2",{className:"section-title",children:"Today's Activity"}),r.jsxs("div",{className:"stats-grid",children:[r.jsx(bi,{title:"Today's Candidates",value:a.todaysCandidates.count,subtitle:a.todaysCandidates.subtitle,icon:Ht,status:"primary",clickable:!0,onClick:()=>c==null?void 0:c("candidate-tracker")}),r.jsx(bi,{title:"Checked In",value:a.checkedIn.count,subtitle:a.checkedIn.subtitle,icon:_r,status:"warning"}),r.jsx(bi,{title:"In Progress",value:a.inProgress.count,subtitle:a.inProgress.subtitle,icon:Sr,status:"neutral"}),r.jsx(bi,{title:"Completed",value:a.completed.count,subtitle:a.completed.subtitle,icon:St,status:"positive"})]})]}),r.jsxs("div",{className:"dashboard-section",children:[r.jsx("h2",{className:"section-title",children:"Quick Actions"}),r.jsxs("div",{className:"grid-responsive grid-3",children:[r.jsxs("button",{onClick:()=>c==null?void 0:c("fets-roster"),className:"modern-card p-6 text-left border-none cursor-pointer hover:border-none",children:[r.jsx("div",{className:"flex items-center justify-between mb-4",children:r.jsx("div",{className:"stats-icon status-neutral",children:r.jsx(rr,{})})}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"FETS Roster"}),r.jsx("p",{className:"text-gray-600 text-sm",children:"Manage staff schedules and assignments"})]}),r.jsxs("button",{onClick:()=>c==null?void 0:c("fets-calendar"),className:"modern-card p-6 text-left border-none cursor-pointer hover:border-none",children:[r.jsx("div",{className:"flex items-center justify-between mb-4",children:r.jsx("div",{className:"stats-icon status-positive",children:r.jsx(y0,{})})}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"FETS Calendar"}),r.jsx("p",{className:"text-gray-600 text-sm",children:"Schedule and manage exam sessions"})]}),r.jsxs("button",{onClick:()=>c==null?void 0:c("fets-vault"),className:"modern-card p-6 text-left border-none cursor-pointer hover:border-none",children:[r.jsx("div",{className:"flex items-center justify-between mb-4",children:r.jsx("div",{className:"stats-icon status-warning",children:r.jsx(Ci,{})})}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Resource Center"}),r.jsx("p",{className:"text-gray-600 text-sm",children:"Access policies and documentation"})]})]})]}),r.jsxs("div",{className:"dashboard-section",children:[r.jsx("h2",{className:"section-title",children:"Workflow Management"}),r.jsxs("div",{className:"grid-responsive grid-2",children:[r.jsxs("div",{className:"modern-card p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[r.jsx(ur,{className:"h-5 w-5 text-orange-500 mr-2"}),"Incident Management"]}),r.jsxs("button",{onClick:()=>c==null?void 0:c("log-incident"),className:"btn-tertiary-modern flex items-center text-xs",children:[r.jsx(ps,{className:"h-4 w-4 mr-1"}),"View All"]})]}),r.jsxs("div",{className:"grid-responsive grid-2 mb-6",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-3xl font-bold text-red-500 mb-1",children:o.open}),r.jsx("div",{className:"text-sm text-gray-500",children:"Open"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-3xl font-bold text-amber-500 mb-1",children:o.inProgress}),r.jsx("div",{className:"text-sm text-gray-500",children:"In Progress"})]})]}),r.jsxs("div",{className:"grid-responsive grid-2 mb-6",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-3xl font-bold text-green-500 mb-1",children:o.resolved}),r.jsx("div",{className:"text-sm text-gray-500",children:"Resolved"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-3xl font-bold text-gray-900 mb-1",children:o.total}),r.jsx("div",{className:"text-sm text-gray-500",children:"Total"})]})]}),r.jsxs("button",{onClick:()=>c==null?void 0:c("log-incident"),className:"btn-primary-modern w-full justify-center",children:[r.jsx(vt,{className:"h-4 w-4"}),"Log New Incident"]})]}),r.jsxs("div",{className:"modern-card p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[r.jsx(St,{className:"h-5 w-5 text-green-500 mr-2"}),"Checklist Overview"]}),r.jsxs("button",{onClick:()=>c==null?void 0:c("checklist-management"),className:"btn-tertiary-modern flex items-center text-xs",children:[r.jsx(ps,{className:"h-4 w-4 mr-1"}),"View All"]})]}),r.jsxs("div",{className:"grid-responsive grid-2 mb-6",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-3xl font-bold text-blue-500 mb-1",children:f.todayInstances}),r.jsx("div",{className:"text-sm text-gray-500",children:"Today's Lists"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-3xl font-bold text-green-500 mb-1",children:f.completedInstances}),r.jsx("div",{className:"text-sm text-gray-500",children:"Completed"})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsxs("div",{className:"flex justify-between text-sm text-gray-500 mb-3",children:[r.jsx("span",{children:"Overall Progress"}),r.jsxs("span",{className:"font-semibold",children:[f.totalProgress,"%"]})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:r.jsx("div",{className:"h-3 rounded-full transition-all duration-500",style:{width:`${f.totalProgress}%`,background:"var(--primary-gradient)"}})})]}),r.jsxs("button",{onClick:()=>c==null?void 0:c("checklist-management"),className:"btn-secondary-modern w-full justify-center",children:[r.jsx(Gh,{className:"h-4 w-4"}),"Manage Templates"]})]})]})]})]})})}function L0({isMobile:c=!1,sidebarOpen:n=!1,setSidebarOpen:a}={}){const{signOut:l,profile:o,user:u}=It(),{isDarkMode:f,toggleDarkMode:p}=p0(),g=async()=>{try{await l()}catch(C){console.error("Error signing out:",C)}},x=()=>o!=null&&o.first_name?o.first_name:u!=null&&u.email?u.email.split("@")[0].charAt(0).toUpperCase()+u.email.split("@")[0].slice(1):"User",y=()=>o!=null&&o.role?o.role.charAt(0).toUpperCase()+o.role.slice(1):"Super Admin",j=()=>new Date().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0});return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"single-banner-header",children:r.jsxs("div",{className:"single-banner-content",children:[r.jsxs("div",{className:"banner-main-info",children:[c&&a&&r.jsx("button",{onClick:()=>a(!n),className:"banner-icon-button mr-2","aria-label":"Toggle navigation menu",children:n?r.jsx(mt,{className:"h-5 w-5"}):r.jsx(S0,{className:"h-5 w-5"})}),r.jsxs("div",{className:"banner-welcome-text",children:[r.jsxs("div",{className:"banner-greeting",children:["Good morning, ",x()]}),r.jsxs("div",{className:"banner-status",children:["Platform Management Console is online  ",j()]})]})]}),r.jsxs("div",{className:"banner-controls",children:[!c&&r.jsxs("div",{className:"banner-location",children:[r.jsx(k0,{className:"h-3 w-3 inline mr-1"}),"Kochi, Kerala, India"]}),r.jsxs("div",{className:"banner-user-info",children:[r.jsx(kr,{className:"h-4 w-4"}),r.jsx("span",{children:y()})]}),r.jsxs("div",{className:"banner-action-buttons",children:[r.jsx("button",{onClick:p,className:"banner-icon-button","aria-label":f?"Switch to light mode":"Switch to dark mode",children:f?r.jsx(I0,{className:"h-4 w-4"}):r.jsx(P0,{className:"h-4 w-4"})}),r.jsx("button",{className:"banner-icon-button",children:r.jsx(Xn,{className:"h-4 w-4"})}),r.jsx("div",{className:"banner-icon-button",children:r.jsx("span",{className:"text-xs font-bold",children:x().charAt(0).toUpperCase()})}),r.jsx("button",{onClick:g,className:"banner-icon-button hover:bg-red-200",title:"Sign Out",children:r.jsx(_0,{className:"h-4 w-4"})})]})]})]})}),r.jsx("div",{className:"h-20"})]})}const $0={operations:[{id:"command-center",name:"Command Centre",icon:Jh,badge:"Home"},{id:"candidate-tracker",name:"Candidate Tracker",icon:rr},{id:"fets-roster",name:"FETS Roster",icon:_r,badge:"0"},{id:"fets-calendar",name:"FETS Calendar",icon:Ht}],compliance:[{id:"log-incident",name:"Log Incident",icon:ur},{id:"checklist-management",name:"Checklist Management",icon:St},{id:"fets-vault",name:"Resource Centre",icon:Fo}],admin:[{id:"staff-management",name:"User Management",icon:Uo},{id:"settings",name:"Settings",icon:sa}]};function jh({activeTab:c,setActiveTab:n,isMobile:a=!1,onClose:l,isCollapsed:o=!1,setIsCollapsed:u}){const f=y=>{n(y.id),a&&l&&l()},p=y=>{const j=y.icon,C=c===y.id;return r.jsxs("button",{onClick:()=>f(y),className:`reference-menu-item ${C?"active":""}`,title:o?y.name:void 0,children:[r.jsx("div",{className:"reference-menu-icon",children:r.jsx(j,{size:20})}),!o&&r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"reference-menu-text",children:y.name}),y.badge&&r.jsx("span",{className:`reference-menu-badge ${C?"active":""}`,children:y.badge})]})]},y.id)},g=`reference-glassmorphic-sidebar ${a?"w-80":o?"w-20":"w-72"}`,x=r.jsxs("div",{className:g,children:[r.jsxs("div",{className:"reference-brand-area",children:[!o||a?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"reference-brand-logo",children:r.jsxs("div",{className:"reference-logo-icon",children:[r.jsx("div",{className:"logo-square green"}),r.jsx("div",{className:"logo-square orange"}),r.jsx("div",{className:"logo-square blue"}),r.jsx("div",{className:"logo-square yellow"})]})}),r.jsx("h2",{className:"reference-brand-title",children:"FETS POINT"}),r.jsx("p",{className:"reference-brand-subtitle",children:"Modern Command Center"})]}):r.jsx("div",{className:"text-center",children:r.jsxs("div",{className:"reference-logo-icon-small",children:[r.jsx("div",{className:"logo-square-small green"}),r.jsx("div",{className:"logo-square-small orange"}),r.jsx("div",{className:"logo-square-small blue"}),r.jsx("div",{className:"logo-square-small yellow"})]})}),!a&&u&&r.jsx("div",{className:"absolute top-6 right-6",children:r.jsx("button",{onClick:()=>u(!o),className:"p-2 rounded-lg hover:bg-white/20 transition-all","aria-label":o?"Expand sidebar":"Collapse sidebar",children:o?r.jsx(Qo,{size:16,className:"text-gray-600"}):r.jsx(Ko,{size:16,className:"text-gray-600"})})}),a&&l&&r.jsx("button",{onClick:l,className:"absolute top-6 right-6 p-2 rounded-lg hover:bg-white/20 transition-all","aria-label":"Close navigation menu",children:r.jsx(mt,{size:20,className:"text-gray-600"})})]}),r.jsx("div",{className:"reference-navigation-area",children:Object.entries($0).map(([y,j])=>{const C={operations:"OPERATIONS",compliance:"COMPLIANCE",admin:"ADMIN"};return r.jsxs("div",{className:"reference-menu-section",children:[!o&&r.jsx("div",{className:"reference-section-label",children:C[y]}),r.jsx("div",{className:"reference-menu-items",children:j.map(p)})]},y)})}),r.jsx("div",{className:"reference-sidebar-footer",children:!o||a?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"reference-footer-version",children:"FETS POINT v2.0"}),r.jsx("div",{className:"reference-footer-caption",children:"Platform Management Console"})]}):r.jsx("div",{className:"text-center",children:r.jsx("div",{className:"reference-footer-version",children:"v2.0"})})})]});return a&&l?r.jsx("div",{className:"mobile-sidebar",onClick:l,children:r.jsx("div",{onClick:y=>y.stopPropagation(),children:x})}):x}const tn={mobile:640,desktop:1024,wide:1280};function Zh(){const[c,n]=P.useState(void 0);return P.useEffect(()=>{const a=window.matchMedia(`(max-width: ${tn.mobile-1}px)`),l=()=>{n(window.innerWidth<tn.mobile)};return a.addEventListener("change",l),n(window.innerWidth<tn.mobile),()=>a.removeEventListener("change",l)},[]),!!c}function U0(){const[c,n]=P.useState("desktop");return P.useEffect(()=>{const a=()=>{const l=window.innerWidth;l<tn.mobile?n("mobile"):l<tn.desktop?n("tablet"):l<tn.wide?n("desktop"):n("wide")};return a(),window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]),c}function ji({title:c,value:n,subtitle:a,icon:l,status:o="primary",onClick:u,clickable:f=!1}){const p={positive:"status-positive",warning:"status-warning",neutral:"status-neutral",primary:"status-warning"}[o];return r.jsxs("div",{className:`stats-card ${f?"cursor-pointer":""}`,onClick:f?u:void 0,children:[r.jsx("div",{className:"stats-card-title",children:c}),r.jsx("div",{className:"stats-card-number",children:n}),r.jsx("div",{className:"stats-card-subtitle",children:a}),r.jsx("div",{className:`stats-icon ${p}`,children:r.jsx(l,{})})]})}function F0(){const{user:c}=It(),[n,a]=P.useState([]),[l,o]=P.useState(null),[u,f]=P.useState(!1),[p,g]=P.useState(!1),[x,y]=P.useState(!1),[j,C]=P.useState(!1),[D,U]=P.useState(""),[V,q]=P.useState("all"),[I,ie]=P.useState(""),[M,X]=P.useState(null),[B,se]=P.useState(0),[pe,F]=P.useState("idle"),[ne,oe]=P.useState({success:0,errors:[]}),[Ne,Se]=P.useState(!0),[te,ae]=P.useState({fullName:"",email:"",phone:"",examDate:"",examName:"",notes:""}),[le,ye]=P.useState({fullName:"",email:"",phone:"",examDate:"",examName:"",notes:""});P.useEffect(()=>{je()},[]);const je=async()=>{try{Se(!0),console.log("Loading candidates from Supabase...");const{data:L,error:Ie}=await re.from("candidates").select("*").order("created_at",{ascending:!1});if(Ie){console.error("Error loading candidates:",Ie);return}if(L){const Pe=L.map(Le=>({id:Le.id,fullName:Le.full_name,email:Le.email,phone:Le.phone,examDate:Le.exam_date?new Date(Le.exam_date):void 0,examName:Le.exam_name||"Exam Session",status:Le.status,confirmationNumber:Le.confirmation_number||W(),checkInTime:Le.check_in_time?new Date(Le.check_in_time):void 0,notes:Le.notes,createdAt:new Date(Le.created_at)}));a(Pe),console.log(`Loaded ${Pe.length} candidates`)}}catch(L){console.error("Error loading candidates:",L)}finally{Se(!1)}},W=()=>{const L="EXAM",Ie=new Date().getFullYear(),Pe=Math.floor(Math.random()*1e3).toString().padStart(3,"0");return`${L}${Ie}-${Pe}`},$=async()=>{try{const L=W();console.log("Creating new candidate...");const{data:Ie,error:Pe}=await re.from("candidates").insert({full_name:te.fullName,email:te.email,phone:te.phone||null,exam_date:te.examDate?new Date(te.examDate).toISOString():null,exam_name:te.examName||null,status:"registered",confirmation_number:L,notes:te.notes||null,user_id:c==null?void 0:c.id}).select().single();if(Pe){console.error("Error saving to database:",Pe),alert("Failed to create candidate: "+Pe.message);return}Ie&&(console.log("Candidate created successfully!"),await je(),ae({fullName:"",email:"",phone:"",examDate:"",examName:"",notes:""}),f(!1),alert("Candidate created successfully!"))}catch(L){console.error("Error creating candidate:",L),alert("Failed to create candidate. Please try again.")}},O=async()=>{if(l)try{console.log("Updating candidate...");const{error:L}=await re.from("candidates").update({full_name:le.fullName,email:le.email,phone:le.phone||null,exam_date:le.examDate?new Date(le.examDate).toISOString():null,exam_name:le.examName||null,notes:le.notes||null}).eq("id",l.id);if(L){console.error("Error updating candidate:",L),alert("Failed to update candidate: "+L.message);return}console.log("Candidate updated successfully!"),await je(),g(!1),o(null),alert("Candidate updated successfully!")}catch(L){console.error("Error updating candidate:",L),alert("Failed to update candidate. Please try again.")}},N=async(L,Ie)=>{if(window.confirm(`Are you sure you want to delete candidate "${Ie}"? This action cannot be undone.`))try{console.log("Deleting candidate...");const{error:Pe}=await re.from("candidates").delete().eq("id",L);if(Pe){console.error("Error deleting candidate:",Pe),alert("Failed to delete candidate: "+Pe.message);return}console.log("Candidate deleted successfully!"),await je(),alert("Candidate deleted successfully!")}catch(Pe){console.error("Error deleting candidate:",Pe),alert("Failed to delete candidate. Please try again.")}},v=L=>{o(L),ye({fullName:L.fullName,email:L.email,phone:L.phone||"",examDate:L.examDate?L.examDate.toISOString().slice(0,16):"",examName:L.examName||"",notes:L.notes||""}),g(!0)},K=async(L,Ie)=>{try{const Pe={status:Ie};Ie==="checked_in"&&(Pe.check_in_time=new Date().toISOString());const{error:Le}=await re.from("candidates").update(Pe).eq("id",L);if(Le){console.error("Error updating status:",Le),alert("Failed to update status: "+Le.message);return}await je()}catch(Pe){console.error("Error updating status:",Pe),alert("Failed to update status. Please try again.")}},Z=L=>{var Pe;const Ie=(Pe=L.target.files)==null?void 0:Pe[0];Ie&&(["text/csv","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"].includes(Ie.type)||Ie.name.endsWith(".csv")?(X(Ie),F("idle"),oe({success:0,errors:[]})):alert("Please select a valid CSV or Excel file"))},S=async()=>{if(!M||!c)return;F("uploading"),se(0);const L=[];let Ie=0;try{const{data:Pe,error:Le}=await re.from("candidate_roster_uploads").insert({filename:M.name,total_candidates:0,uploaded_by_user_id:c.id,status:"processing"}).select().single();Le&&console.error("Error creating upload record:",Le);const wt=(await M.text()).split(`
`).filter(me=>me.trim());if(wt.length<2)throw new Error("File must contain at least a header row and one data row");const bt=wt[0].split(",").map(me=>me.trim().toLowerCase()),lt=wt.slice(1),z=["full_name","email"].filter(me=>!bt.some(Te=>Te.includes(me.replace("_",""))));if(z.length>0)throw new Error(`Missing required columns: ${z.join(", ")}`);for(let me=0;me<lt.length;me++){try{const Te=lt[me].split(",").map(w=>w.trim()),he={};if(bt.forEach((w,E)=>{const Q=Te[E]||"";(w.includes("name")||w.includes("full"))&&(he.full_name=Q),w.includes("email")&&(he.email=Q),w.includes("phone")&&(he.phone=Q||null),w.includes("exam")&&w.includes("name")&&(he.exam_name=Q||null),w.includes("exam")&&w.includes("date")&&(he.exam_date=Q?new Date(Q).toISOString():null),w.includes("note")&&(he.notes=Q||null)}),!he.full_name||!he.email){L.push(`Row ${me+2}: Missing name or email`);continue}if(n.find(w=>w.email===he.email)){L.push(`Row ${me+2}: Email ${he.email} already exists`);continue}he.status="registered",he.confirmation_number=W(),he.user_id=c.id;const{error:Je}=await re.from("candidates").insert(he);Je?L.push(`Row ${me+2}: Database error - ${Je.message}`):Ie++}catch(Te){L.push(`Row ${me+2}: ${Te.message}`)}se(Math.round((me+1)/lt.length*100))}Pe&&await re.from("candidate_roster_uploads").update({total_candidates:lt.length,processed_candidates:Ie,failed_candidates:L.length,status:L.length===lt.length?"failed":"completed",error_log:L.length>0?L.join(`
`):null,processed_date:new Date().toISOString()}).eq("id",Pe.id),oe({success:Ie,errors:L}),F(L.length===lt.length?"error":"success"),Ie>0&&await je()}catch(Pe){F("error"),oe({success:0,errors:[Pe.message]})}},H=()=>{X(null),F("idle"),se(0),oe({success:0,errors:[]}),C(!1)},ce=L=>{switch(L){case"registered":return"text-blue-600 bg-blue-50 border border-blue-200";case"checked_in":return"text-yellow-600 bg-yellow-50 border border-yellow-200";case"in_progress":return"text-orange-600 bg-orange-50 border border-orange-200";case"completed":return"text-green-600 bg-green-50 border border-green-200";case"no_show":return"text-red-600 bg-red-50 border border-red-200";case"cancelled":return"text-gray-600 bg-gray-50 border border-gray-200";default:return"text-gray-600 bg-gray-50 border border-gray-200"}},Ce=L=>{switch(L){case"checked_in":return r.jsx(_r,{className:"h-4 w-4"});case"completed":return r.jsx(_r,{className:"h-4 w-4"});case"no_show":return r.jsx(R0,{className:"h-4 w-4"});case"in_progress":return r.jsx(Sr,{className:"h-4 w-4"});default:return r.jsx(rr,{className:"h-4 w-4"})}},Ae=n.filter(L=>{const Ie=L.fullName.toLowerCase().includes(D.toLowerCase())||L.email.toLowerCase().includes(D.toLowerCase())||L.confirmationNumber.toLowerCase().includes(D.toLowerCase()),Pe=V==="all"||L.status===V,Le=!I||L.examDate&&L.examDate.toISOString().split("T")[0]===I;return Ie&&Pe&&Le}),$e=n.filter(L=>{if(!L.examDate)return!1;const Ie=new Date().toISOString().split("T")[0];return L.examDate.toISOString().split("T")[0]===Ie});return Ne?r.jsx("div",{className:"dashboard-modern flex-1 p-4 sm:p-6 overflow-auto",children:r.jsx("div",{className:"flex items-center justify-center min-h-96",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-yellow-500 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"Loading candidates..."})]})})}):r.jsxs("div",{className:"dashboard-modern flex-1 p-4 sm:p-6 overflow-auto",children:[r.jsx("div",{className:"dashboard-section",children:r.jsx("div",{className:"modern-card p-6 mb-8",style:{background:"var(--primary-gradient)",color:"white",border:"none"},children:r.jsxs("div",{className:"flex items-center justify-between flex-col sm:flex-row space-y-4 sm:space-y-0",children:[r.jsxs("div",{className:"text-center sm:text-left",children:[r.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold mb-2 flex items-center justify-center sm:justify-start",children:[r.jsx(rr,{className:"h-8 w-8 mr-3"}),"Candidate Tracker"]}),r.jsx("p",{className:"text-white/90 text-lg",children:"Track and manage candidate registrations, check-ins, and exam progress"}),r.jsxs("div",{className:"flex items-center justify-center sm:justify-start mt-3 text-sm",children:[r.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full mr-2 animate-pulse"}),r.jsxs("span",{className:"text-white/80",children:[n.length," total candidates"]})]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[r.jsxs("button",{onClick:()=>f(!0),className:"btn-tertiary-modern bg-white text-gray-900 hover:bg-white/90 flex items-center justify-center",children:[r.jsx(vt,{className:"h-4 w-4 mr-2"}),"Register Candidate"]}),r.jsxs("button",{onClick:()=>C(!0),className:"btn-tertiary-modern bg-white/20 text-white border-white/30 hover:bg-white/30 flex items-center justify-center",children:[r.jsx(wi,{className:"h-4 w-4 mr-2"}),"Bulk Upload"]})]})]})})}),r.jsxs("div",{className:"dashboard-section",children:[r.jsx("h2",{className:"section-title",children:"Candidate Overview"}),r.jsxs("div",{className:"grid-responsive grid-4",children:[r.jsx(ji,{title:"Today's Candidates",value:$e.length,subtitle:$e.length>0?`${$e.length} scheduled for today`:"No candidates scheduled",icon:Ht,status:"primary"}),r.jsx(ji,{title:"Checked In",value:n.filter(L=>L.status==="checked_in").length,subtitle:n.filter(L=>L.status==="checked_in").length>0?"Ready for exam":"None checked in",icon:_r,status:"warning"}),r.jsx(ji,{title:"In Progress",value:n.filter(L=>L.status==="in_progress").length,subtitle:n.filter(L=>L.status==="in_progress").length>0?"Currently testing":"No active exams",icon:Sr,status:"neutral"}),r.jsx(ji,{title:"Completed",value:n.filter(L=>L.status==="completed").length,subtitle:n.filter(L=>L.status==="completed").length>0?"Exams finished":"No completions yet",icon:_r,status:"positive"})]})]}),r.jsxs("div",{className:"dashboard-section",children:[r.jsx("h2",{className:"section-title",children:"Search & Filter"}),r.jsx("div",{className:"modern-card p-6",children:r.jsxs("div",{className:"grid-responsive grid-4 gap-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx(ra,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),r.jsx("input",{type:"text",placeholder:"Search candidates...",className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent bg-white text-gray-900 placeholder-gray-500",value:D,onChange:L=>U(L.target.value)})]}),r.jsxs("select",{className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent bg-white text-gray-900",value:V,onChange:L=>q(L.target.value),children:[r.jsx("option",{value:"all",children:"All Status"}),r.jsx("option",{value:"registered",children:"Registered"}),r.jsx("option",{value:"checked_in",children:"Checked In"}),r.jsx("option",{value:"in_progress",children:"In Progress"}),r.jsx("option",{value:"completed",children:"Completed"}),r.jsx("option",{value:"no_show",children:"No Show"}),r.jsx("option",{value:"cancelled",children:"Cancelled"})]}),r.jsx("input",{type:"date",className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent bg-white text-gray-900",value:I,onChange:L=>ie(L.target.value),placeholder:"Filter by exam date"}),r.jsxs("div",{className:"flex items-center justify-center bg-gray-50 rounded-lg px-4 py-3",children:[r.jsx(Yh,{className:"h-4 w-4 mr-2 text-gray-500"}),r.jsxs("span",{className:"text-sm text-gray-600",children:[Ae.length," of ",n.length," candidates"]})]})]})})]}),r.jsxs("div",{className:"dashboard-section",children:[r.jsx("h2",{className:"section-title",children:"Candidate List"}),r.jsxs("div",{className:"space-y-4",children:[Ae.map(L=>r.jsxs("div",{className:"modern-card p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center text-white font-bold text-lg",style:{background:"var(--primary-gradient)"},children:L.fullName.split(" ").map(Ie=>Ie[0]).join("").toUpperCase()}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:L.fullName}),r.jsx("p",{className:"text-gray-500",children:L.confirmationNumber})]})]}),r.jsx("div",{className:"flex items-center space-x-2",children:r.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-medium flex items-center space-x-1 ${ce(L.status)}`,children:[Ce(L.status),r.jsx("span",{children:L.status.replace("_"," ").toUpperCase()})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 text-sm mb-4",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Ei,{className:"h-4 w-4 text-gray-400"}),r.jsx("span",{className:"text-gray-600",children:L.email})]}),L.phone&&r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Ti,{className:"h-4 w-4 text-gray-400"}),r.jsx("span",{className:"text-gray-600",children:L.phone})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-500 text-xs font-medium uppercase tracking-wide",children:"Exam"}),r.jsx("p",{className:"text-gray-900 font-medium",children:L.examName||"Not specified"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-500 text-xs font-medium uppercase tracking-wide",children:"Date & Time"}),r.jsx("p",{className:"text-gray-900 font-medium",children:L.examDate?L.examDate.toLocaleString():"Not scheduled"})]})]}),L.notes&&r.jsx("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg border-l-4 border-yellow-400",children:r.jsx("p",{className:"text-sm text-gray-700",children:L.notes})}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[L.status==="registered"&&r.jsxs("button",{onClick:()=>K(L.id,"checked_in"),className:"btn-secondary-modern flex items-center text-sm",children:[r.jsx(_r,{className:"h-4 w-4 mr-1"}),"Check In"]}),L.status==="checked_in"&&r.jsxs("button",{onClick:()=>K(L.id,"in_progress"),className:"flex items-center space-x-1 px-3 py-2 text-orange-600 bg-orange-50 hover:bg-orange-100 rounded-lg text-sm font-medium transition-colors",children:[r.jsx(Sr,{className:"h-4 w-4"}),r.jsx("span",{children:"Start Exam"})]}),L.status==="in_progress"&&r.jsxs("button",{onClick:()=>K(L.id,"completed"),className:"btn-secondary-modern flex items-center text-sm",children:[r.jsx(_r,{className:"h-4 w-4 mr-1"}),"Complete"]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs("button",{onClick:()=>{o(L),y(!0)},className:"btn-tertiary-modern flex items-center text-sm",children:[r.jsx(ps,{className:"h-4 w-4 mr-1"}),"Details"]}),r.jsxs("button",{onClick:()=>v(L),className:"flex items-center space-x-1 px-3 py-2 text-blue-600 bg-blue-50 hover:bg-blue-100 rounded-lg text-sm font-medium transition-colors",children:[r.jsx(gs,{className:"h-4 w-4"}),r.jsx("span",{children:"Edit"})]}),r.jsxs("button",{onClick:()=>N(L.id,L.fullName),className:"flex items-center space-x-1 px-3 py-2 text-red-600 bg-red-50 hover:bg-red-100 rounded-lg text-sm font-medium transition-colors",children:[r.jsx(hr,{className:"h-4 w-4"}),r.jsx("span",{children:"Delete"})]})]})]})]},L.id)),Ae.length===0&&r.jsxs("div",{className:"modern-card p-12 text-center",children:[r.jsx(rr,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No candidates found"}),r.jsx("p",{className:"text-gray-500 mb-6",children:n.length===0?"Get started by registering your first candidate or uploading a CSV file.":"Try adjusting your search or filter criteria."}),n.length===0&&r.jsxs("div",{className:"flex justify-center space-x-4",children:[r.jsxs("button",{onClick:()=>f(!0),className:"btn-primary-modern",children:[r.jsx(vt,{className:"h-4 w-4 mr-2"}),"Register First Candidate"]}),r.jsxs("button",{onClick:()=>C(!0),className:"btn-secondary-modern",children:[r.jsx(wi,{className:"h-4 w-4 mr-2"}),"Bulk Upload CSV"]})]})]})]})]}),u&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"modern-card p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Register New Candidate"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name *"}),r.jsx("input",{type:"text",className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent bg-white text-gray-900 placeholder-gray-500",placeholder:"Enter candidate's full name",value:te.fullName,onChange:L=>ae({...te,fullName:L.target.value})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),r.jsx("input",{type:"email",className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent bg-white text-gray-900 placeholder-gray-500",placeholder:"candidate@email.com",value:te.email,onChange:L=>ae({...te,email:L.target.value})})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone"}),r.jsx("input",{type:"tel",className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent bg-white text-gray-900 placeholder-gray-500",placeholder:"+1-555-0123",value:te.phone,onChange:L=>ae({...te,phone:L.target.value})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Exam Name"}),r.jsx("input",{type:"text",className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent bg-white text-gray-900 placeholder-gray-500",placeholder:"AWS Solutions Architect, TOEFL, etc.",value:te.examName,onChange:L=>ae({...te,examName:L.target.value})})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Exam Date & Time"}),r.jsx("input",{type:"datetime-local",className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent bg-white text-gray-900",value:te.examDate,onChange:L=>ae({...te,examDate:L.target.value})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),r.jsx("textarea",{className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent bg-white text-gray-900 placeholder-gray-500 h-24 resize-none",placeholder:"Special accommodations, dietary requirements, etc.",value:te.notes,onChange:L=>ae({...te,notes:L.target.value})})]})]}),r.jsxs("div",{className:"flex items-center justify-end space-x-4 mt-6",children:[r.jsx("button",{onClick:()=>f(!1),className:"btn-tertiary-modern",children:"Cancel"}),r.jsx("button",{onClick:$,className:"btn-primary-modern",disabled:!te.fullName.trim()||!te.email.trim(),children:"Register Candidate"})]})]})}),p&&l&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"modern-card p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:["Edit Candidate: ",l.fullName]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name *"}),r.jsx("input",{type:"text",className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent bg-white text-gray-900 placeholder-gray-500",placeholder:"Enter candidate's full name",value:le.fullName,onChange:L=>ye({...le,fullName:L.target.value})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),r.jsx("input",{type:"email",className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent bg-white text-gray-900 placeholder-gray-500",placeholder:"candidate@email.com",value:le.email,onChange:L=>ye({...le,email:L.target.value})})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone"}),r.jsx("input",{type:"tel",className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent bg-white text-gray-900 placeholder-gray-500",placeholder:"+1-555-0123",value:le.phone,onChange:L=>ye({...le,phone:L.target.value})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Exam Name"}),r.jsx("input",{type:"text",className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent bg-white text-gray-900 placeholder-gray-500",placeholder:"AWS Solutions Architect, TOEFL, etc.",value:le.examName,onChange:L=>ye({...le,examName:L.target.value})})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Exam Date & Time"}),r.jsx("input",{type:"datetime-local",className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent bg-white text-gray-900",value:le.examDate,onChange:L=>ye({...le,examDate:L.target.value})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),r.jsx("textarea",{className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent bg-white text-gray-900 placeholder-gray-500 h-24 resize-none",placeholder:"Special accommodations, dietary requirements, etc.",value:le.notes,onChange:L=>ye({...le,notes:L.target.value})})]})]}),r.jsxs("div",{className:"flex items-center justify-end space-x-4 mt-6",children:[r.jsx("button",{onClick:()=>g(!1),className:"btn-tertiary-modern",children:"Cancel"}),r.jsx("button",{onClick:O,className:"btn-primary-modern",disabled:!le.fullName.trim()||!le.email.trim(),children:"Update Candidate"})]})]})}),x&&l&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"modern-card p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Candidate Details"}),r.jsx("button",{onClick:()=>y(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:r.jsx(mt,{className:"h-6 w-6"})})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{className:"w-16 h-16 rounded-full flex items-center justify-center text-white font-bold text-xl",style:{background:"var(--primary-gradient)"},children:l.fullName.split(" ").map(L=>L[0]).join("").toUpperCase()}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-2xl font-semibold text-gray-900",children:l.fullName}),r.jsx("p",{className:"text-gray-600",children:l.confirmationNumber}),r.jsx("span",{className:`inline-flex px-3 py-1 rounded-full text-xs font-medium mt-2 ${ce(l.status)}`,children:l.status.replace("_"," ").toUpperCase()})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Contact Information"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Ei,{className:"h-4 w-4 text-gray-400"}),r.jsx("span",{className:"text-gray-600",children:l.email})]}),l.phone&&r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Ti,{className:"h-4 w-4 text-gray-400"}),r.jsx("span",{className:"text-gray-600",children:l.phone})]})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Exam Information"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-500 text-sm font-medium uppercase tracking-wide",children:"Exam Name"}),r.jsx("p",{className:"text-gray-900 font-medium",children:l.examName||"Not specified"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-500 text-sm font-medium uppercase tracking-wide",children:"Scheduled Date"}),r.jsx("p",{className:"text-gray-900 font-medium",children:l.examDate?l.examDate.toLocaleString():"Not scheduled"})]}),l.checkInTime&&r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-500 text-sm font-medium uppercase tracking-wide",children:"Check-in Time"}),r.jsx("p",{className:"text-gray-900 font-medium",children:l.checkInTime.toLocaleString()})]})]})]})]}),l.notes&&r.jsxs("div",{children:[r.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Notes"}),r.jsx("div",{className:"p-4 bg-gray-50 rounded-lg border-l-4 border-yellow-400",children:r.jsx("p",{className:"text-gray-700",children:l.notes})})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Registration Details"}),r.jsx("div",{className:"text-sm text-gray-600",children:r.jsxs("p",{children:["Registered: ",l.createdAt.toLocaleString()]})})]})]}),r.jsxs("div",{className:"flex items-center justify-end space-x-4 mt-6",children:[r.jsx("button",{onClick:()=>y(!1),className:"btn-tertiary-modern",children:"Close"}),r.jsx("button",{onClick:()=>{y(!1),v(l)},className:"btn-primary-modern",children:"Edit Candidate"})]})]})}),j&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"modern-card p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Bulk Upload Candidates"}),r.jsx("button",{onClick:()=>H(),className:"text-gray-400 hover:text-gray-600 transition-colors",children:r.jsx(mt,{className:"h-6 w-6"})})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-2",children:"Upload Instructions"}),r.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[r.jsx("li",{children:" Upload a CSV file with candidate information"}),r.jsxs("li",{children:[" Required columns: ",r.jsx("strong",{children:"full_name"}),", ",r.jsx("strong",{children:"email"})]}),r.jsx("li",{children:" Optional columns: phone, exam_name, exam_date, notes"}),r.jsx("li",{children:" First row should contain column headers"}),r.jsx("li",{children:" Date format: YYYY-MM-DD or MM/DD/YYYY"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select CSV File"}),r.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 hover:border-gray-400 transition-colors",children:[r.jsxs("div",{className:"text-center",children:[r.jsx(wi,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),r.jsx("input",{type:"file",accept:".csv,.xlsx,.xls",onChange:Z,className:"hidden",id:"bulk-upload-input"}),r.jsx("label",{htmlFor:"bulk-upload-input",className:"cursor-pointer text-blue-600 hover:text-blue-700 font-medium",children:"Click to select file"}),r.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"CSV, XLS, or XLSX files only"})]}),M&&r.jsx("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:r.jsxs("p",{className:"text-sm text-gray-700",children:[r.jsx("strong",{children:"Selected:"})," ",M.name," (",Math.round(M.size/1024),"KB)"]})})]})]}),pe==="uploading"&&r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[r.jsx("span",{children:"Processing candidates..."}),r.jsxs("span",{children:[B,"%"]})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:r.jsx("div",{className:"h-3 rounded-full transition-all duration-300",style:{width:`${B}%`,background:"var(--primary-gradient)"}})})]}),pe==="success"&&r.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-green-900 mb-2",children:"Upload Completed!"}),r.jsxs("p",{className:"text-green-800",children:["Successfully imported ",ne.success," candidates."]}),ne.errors.length>0&&r.jsxs("details",{className:"mt-3",children:[r.jsxs("summary",{className:"cursor-pointer text-yellow-700 font-medium",children:["View ",ne.errors.length," errors"]}),r.jsx("ul",{className:"mt-2 text-sm text-yellow-800 space-y-1 pl-4",children:ne.errors.map((L,Ie)=>r.jsxs("li",{children:[" ",L]},Ie))})]})]}),pe==="error"&&r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-red-900 mb-2",children:"Upload Failed"}),r.jsx("ul",{className:"text-red-800 space-y-1",children:ne.errors.map((L,Ie)=>r.jsxs("li",{children:[" ",L]},Ie))})]})]}),r.jsxs("div",{className:"flex items-center justify-end space-x-4 mt-6",children:[r.jsx("button",{onClick:()=>H(),className:"btn-tertiary-modern",children:pe==="success"?"Done":"Cancel"}),M&&pe!=="uploading"&&pe!=="success"&&r.jsxs("button",{onClick:S,className:"btn-primary-modern",disabled:!M,children:[r.jsx(wi,{className:"h-4 w-4 mr-2"}),"Upload Candidates"]})]})]})})]})}const dr=c=>(typeof c=="string"?new Date(c):c).toLocaleDateString("en-CA",{timeZone:"Asia/Kolkata",year:"numeric",month:"2-digit",day:"2-digit"}),z0=c=>{const[n,a,l]=c.split("-").map(o=>parseInt(o,10));return new Date(n,a-1,l,12,0,0)},ef=()=>new Date().toLocaleDateString("en-CA",{timeZone:"Asia/Kolkata",year:"numeric",month:"2-digit",day:"2-digit"}),q0=c=>{const n=ef(),a=dr(c);return n===a},B0=c=>(typeof c=="string"?z0(c):c).toLocaleDateString("en-IN",{weekday:"long",year:"numeric",month:"long",day:"numeric",timeZone:"Asia/Kolkata"}),Nh=c=>c.filter(n=>!(n.role==="super_admin"||["Mithun","Niyas"].some(l=>n.full_name.toLowerCase().includes(l.toLowerCase())))),V0=c=>c==="super_admin"?"admin":c,Ni={D:{name:"Day Shift (8AM-5PM)",color:"bg-gradient-to-r from-turquoise to-cyan",textColor:"text-white"},HD:{name:"Half Day",color:"bg-gradient-to-r from-green-400 to-green-600",textColor:"text-white"},RD:{name:"Rest Day",color:"bg-gradient-to-r from-gray-400 to-gray-600",textColor:"text-white"},TOIL:{name:"Time Off In Lieu",color:"bg-gradient-to-r from-purple-400 to-purple-600",textColor:"text-white"},L:{name:"Leave",color:"bg-gradient-to-r from-red-400 to-red-600",textColor:"text-white"},OT:{name:"Overtime",color:"bg-gradient-to-r from-orange-400 to-orange-600",textColor:"text-white"}},_h={leave:"Leave Request",half_day:"Half Day Request",shift_swap:"Shift Swap",off_day_swap:"Off Day Swap"};function tf(){const{user:c}=It(),n=Zh(),[a,l]=P.useState(new Date),[o,u]=P.useState([]),[f,p]=P.useState([]),[g,x]=P.useState([]),[y,j]=P.useState([]),[C,D]=P.useState([]),[U,V]=P.useState(!0),[q,I]=P.useState("roster"),[ie,M]=P.useState(!1),[X,B]=P.useState(!1),[se,pe]=P.useState(!1),[F,ne]=P.useState(!1),[oe,Ne]=P.useState(null),[Se,te]=P.useState(null),[ae,le]=P.useState({type:"leave",date:"",reason:"",swapPartner:"",swapDate:""}),[ye,je]=P.useState({userId:"",date:"",hours:0,description:""}),[W,$]=P.useState(null),[O,N]=P.useState(null),K=c?f.find(w=>w.user_id===c.id):null,Z=(K==null?void 0:K.role)==="super_admin",S=(K==null?void 0:K.role)==="admin"||Z;P.useEffect(()=>{console.log(" Roster useEffect triggered. User:",c==null?void 0:c.id,"Current date:",a.toISOString().split("T")[0]),c?(console.log(" User authenticated, calling loadData..."),ce()):console.log(" No user, skipping loadData")},[c,a]),P.useEffect(()=>{if(O){const w=setTimeout(()=>N(null),5e3);return()=>clearTimeout(w)}},[O]);const H=(w,E)=>{N({type:w,message:E})},ce=async()=>{try{V(!0),console.log(" Starting roster data load..."),console.log(" Current user:",c==null?void 0:c.id),console.log(" Auth session:",await re.auth.getSession()),console.log(" Querying staff_profiles table...");const{data:w,error:E}=await re.from("staff_profiles").select("id, user_id, full_name, role, email, department").order("full_name");if(E)throw console.error(" Staff profiles error:",E),E;console.log(" Staff profiles loaded successfully:",(w==null?void 0:w.length)||0,"profiles");const Q=(w||[]).map(jt=>({id:jt.id,user_id:jt.user_id,full_name:jt.full_name,role:jt.role,email:jt.email||"",department:jt.department}));p(Q);const de=new Date(a.getFullYear(),a.getMonth(),1),ue=new Date(a.getFullYear(),a.getMonth()+1,0);console.log(" Querying roster_schedules table...");const{data:Oe,error:ze}=await re.from("roster_schedules").select("id, profile_id, date, shift_code, overtime_hours, status, created_at, updated_at").gte("date",de.toISOString().split("T")[0]).lte("date",ue.toISOString().split("T")[0]).order("date");if(ze)throw console.error(" Schedule data error:",ze),ze;console.log(" Schedule data loaded successfully:",(Oe==null?void 0:Oe.length)||0,"records"),u(Oe||[]);const{data:Ot,error:Cr}=await re.from("roster_versions").select("*").eq("month",a.getMonth()+1).eq("year",a.getFullYear()).eq("is_active",!0).maybeSingle();if(Cr&&Cr.code!=="PGRST116")throw Cr;$(Ot);const{data:Jr,error:ys}=await re.from("roster_versions").select("*").eq("month",a.getMonth()+1).eq("year",a.getFullYear()).order("created_at",{ascending:!1});if(ys)throw ys;j(Jr||[]);const{data:an,error:vs}=await re.from("overtime_tracking").select("*").gte("date",de.toISOString().split("T")[0]).lte("date",ue.toISOString().split("T")[0]);if(vs)throw vs;if(D(an||[]),Z){const{data:jt,error:sr}=await re.from("leave_requests").select("*").order("created_at",{ascending:!1});if(sr)throw sr;x(jt||[])}else if(c){const jt=Q.find(sr=>sr.user_id===c.id);if(jt){const{data:sr,error:fr}=await re.from("leave_requests").select("*").eq("user_id",jt.id).order("created_at",{ascending:!1});if(fr)throw fr;x(sr||[])}}}catch(w){console.error(" Error loading roster data:",w),H("error",`Database error: ${w instanceof Error?w.message:"Connection failed"}. Please check your authentication.`),p([]),u([]),x([]),j([]),D([])}finally{V(!1)}},Ce=()=>{const w=a.getFullYear(),E=a.getMonth(),Q=new Date(w,E+1,0).getDate(),de=[];for(let ue=1;ue<=Q;ue++)de.push(new Date(w,E,ue));return de},Ae=(w,E)=>{const Q=dr(E);return o.find(de=>de.profile_id===w&&de.date===Q)},$e=(w,E)=>{const Q=dr(E);return C.find(de=>de.user_id===w&&de.date===Q)},L=(w,E)=>{S&&(Ne({profileId:w,date:dr(E)}),B(!0))},Ie=async(w,E=0)=>{if(!oe||!c||!S){console.log(" Save shift blocked:",{selectedEdit:oe,user:!!c,isAdmin:S}),H("warning","Unable to save shift - permission or context issue");return}try{console.log(" Saving shift:",{profileId:oe.profileId,date:oe.date,shiftCode:w,overtimeHours:E});const Q={profile_id:oe.profileId,date:oe.date,shift_code:w,overtime_hours:E,status:"confirmed",updated_at:new Date().toISOString()},de=o.find(ue=>ue.profile_id===oe.profileId&&ue.date===oe.date);if(console.log(" Existing schedule:",de),de){console.log(" Updating existing schedule...");const{error:ue}=await re.from("roster_schedules").update(Q).eq("id",de.id);if(ue)throw console.error(" Update error:",ue),ue}else{console.log(" Creating new schedule...");const{error:ue}=await re.from("roster_schedules").insert([{...Q,created_at:new Date().toISOString()}]);if(ue)throw console.error(" Insert error:",ue),ue}await Pe(`Updated shift for ${it(oe.profileId)} on ${oe.date}`),B(!1),Ne(null),await ce(),H("success","Shift updated successfully!"),console.log(" Shift saved successfully")}catch(Q){console.error(" Error saving shift:",Q),H("error",`Failed to save shift: ${Q instanceof Error?Q.message:"Unknown error"}`)}},Pe=async w=>{try{const E=Le(),Q={month:a.getMonth()+1,year:a.getFullYear(),version_number:E,created_by:K==null?void 0:K.user_id,edit_log:w,is_active:!0};W&&await re.from("roster_versions").update({is_active:!1}).eq("id",W.id);const{error:de}=await re.from("roster_versions").insert([Q]);if(de)throw de}catch(E){console.error("Error creating version:",E)}},Le=()=>{var Q;if(y.length===0)return"v.01";const w=((Q=y[0])==null?void 0:Q.version_number)||"v.00";return`v.${(parseInt(w.replace("v.",""))+1).toString().padStart(2,"0")}`},it=w=>{var E;return((E=f.find(Q=>Q.id===w))==null?void 0:E.full_name)||"Unknown"},wt=async()=>{if(!Z){H("error","Only super admins can delete rosters");return}if(confirm(`Are you sure you want to delete the entire roster for ${a.toLocaleDateString("en-IN",{month:"long",year:"numeric"})}? This action cannot be undone.`))try{console.log(" Deleting roster for month:",a.getMonth()+1,"year:",a.getFullYear());const w=new Date(a.getFullYear(),a.getMonth(),1),E=new Date(a.getFullYear(),a.getMonth()+1,0),Q=dr(w),de=dr(E),{error:ue}=await re.from("roster_schedules").delete().gte("date",Q).lte("date",de);if(ue)throw ue;W&&await re.from("roster_versions").update({is_active:!1}).eq("month",a.getMonth()+1).eq("year",a.getFullYear()),await ce(),H("success","Roster deleted successfully"),console.log(" Roster deleted successfully")}catch(w){console.error(" Error deleting roster:",w),H("error",`Failed to delete roster: ${w instanceof Error?w.message:"Unknown error"}`)}},bt=async w=>{if(w.preventDefault(),!(!c||!K))try{const E={user_id:K.id,request_type:ae.type,requested_date:ae.date,swap_with_user_id:ae.swapPartner||null,swap_date:ae.swapDate||null,reason:ae.reason,status:"pending"},{error:Q}=await re.from("leave_requests").insert([E]);if(Q)throw Q;M(!1),le({type:"leave",date:"",reason:"",swapPartner:"",swapDate:""}),await ce(),H("success","Request submitted successfully")}catch(E){console.error("Error submitting request:",E),H("error","Failed to submit request")}},lt=async(w,E)=>{if(Z)try{const Q={status:E?"approved":"rejected",approved_by:K==null?void 0:K.id,approved_at:new Date().toISOString()},{error:de}=await re.from("leave_requests").update(Q).eq("id",w);if(de)throw de;E&&Se&&await Wt(Se),ne(!1),te(null),await ce(),H("success",`Request ${E?"approved":"rejected"} successfully`)}catch(Q){console.error("Error processing request:",Q),H("error","Failed to process request")}},Wt=async w=>{try{console.log(" Applying approved request:",w);const E={profile_id:w.user_id,date:w.requested_date,shift_code:w.request_type==="half_day"?"HD":"L",status:"confirmed",updated_at:new Date().toISOString()},Q=o.find(de=>de.profile_id===w.user_id&&de.date===w.requested_date);if(console.log(" Existing schedule for approved request:",Q),Q){console.log(" Updating existing schedule with approved request...");const{error:de}=await re.from("roster_schedules").update(E).eq("id",Q.id);if(de)throw console.error(" Update schedule error:",de),de}else{console.log(" Creating new schedule from approved request...");const{error:de}=await re.from("roster_schedules").insert([{...E,created_at:new Date().toISOString()}]);if(de)throw console.error(" Insert schedule error:",de),de}await Pe(`Applied approved ${w.request_type} request for ${it(w.user_id)}`),console.log(" Applied approved request successfully")}catch(E){throw console.error(" Error applying approved request:",E),E}},z=async()=>{if(!S){H("warning","Only admins can use Quick Add");return}try{console.log(" Quick Add Month triggered...");const w=Ce(),E=[];if(console.log(" Staff profiles for Quick Add:",f.length,"profiles"),f.forEach(Q=>{let de=0;w.forEach(ue=>{const Oe=ue.toISOString().split("T")[0];if(!o.find(Ot=>Ot.profile_id===Q.id&&Ot.date===Oe)){const Ot=de%7===6?"RD":"D";E.push({profile_id:Q.id,date:Oe,shift_code:Ot,status:"confirmed",created_at:new Date().toISOString()})}de++})}),console.log(" Schedules to create:",E.length),E.length>0){const{error:Q}=await re.from("roster_schedules").insert(E);if(Q)throw console.error(" Quick Add database error:",Q),Q;await Pe(`Quick add generated ${E.length} schedules`),await ce(),H("success",`Generated ${E.length} roster entries successfully!`)}else H("warning","All roster entries already exist for this month")}catch(w){console.error(" Error in Quick Add:",w),H("error","Failed to generate month roster. Check console for details.")}},me=async(w,E,Q,de)=>{if(S)try{const ue={user_id:w,date:E,ot_hours:Q,description:de,created_by:K==null?void 0:K.user_id};if(C.find(ze=>ze.user_id===w&&ze.date===E)){const{error:ze}=await re.from("overtime_tracking").update({ot_hours:Q,description:de}).eq("user_id",w).eq("date",E);if(ze)throw ze}else{const{error:ze}=await re.from("overtime_tracking").insert([ue]);if(ze)throw ze}await ce(),H("success","Overtime updated successfully")}catch(ue){console.error("Error saving overtime:",ue),H("error","Failed to save overtime")}},Te=w=>{const E=new Date(a);w==="prev"?E.setMonth(E.getMonth()-1):E.setMonth(E.getMonth()+1),l(E)},he=a.toLocaleDateString("en-US",{month:"long",year:"numeric"}),qe=Ce(),Je=g.filter(w=>w.status==="pending");return U?r.jsx("div",{className:"flex-1 p-6 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-turquoise mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"Loading roster data..."})]})}):r.jsxs("div",{className:"flex-1 p-4 sm:p-6 space-y-4 sm:space-y-6 bg-gradient-to-br from-blue-50 via-cyan-50 to-turquoise-50 min-h-screen overflow-auto",children:[O&&r.jsx("div",{className:`fixed top-4 left-4 right-4 sm:left-auto sm:right-4 sm:w-auto z-50 p-4 rounded-lg shadow-lg backdrop-blur-md ${O.type==="success"?"bg-green-100/80 text-green-800 border border-green-200":O.type==="error"?"bg-red-100/80 text-red-800 border border-red-200":"bg-yellow-100/80 text-yellow-800 border border-yellow-200"} transition-all duration-300`,children:r.jsxs("div",{className:"flex items-center space-x-2",children:[O.type==="success"&&r.jsx(St,{className:"h-5 w-5"}),O.type==="error"&&r.jsx(v0,{className:"h-5 w-5"}),O.type==="warning"&&r.jsx(Go,{className:"h-5 w-5"}),r.jsx("span",{className:"text-sm sm:text-base",children:O.message})]})}),r.jsx("div",{className:"backdrop-blur-md bg-white/70 border border-white/20 shadow-xl rounded-2xl p-4 sm:p-6",children:r.jsxs("div",{className:"flex flex-col space-y-4 sm:space-y-0 sm:flex-row sm:justify-between sm:items-center",children:[r.jsxs("div",{className:"flex items-center space-x-3 sm:space-x-4",children:[r.jsx("div",{className:"bg-gradient-to-r from-turquoise to-cyan p-3 sm:p-4 rounded-xl sm:rounded-2xl shadow-lg",children:r.jsx(rr,{className:"h-6 w-6 sm:h-8 sm:w-8 text-white"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl sm:text-4xl font-bold bg-gradient-to-r from-turquoise to-cyan bg-clip-text text-transparent",children:"FETS ROSTER"}),r.jsx("p",{className:"text-gray-600 font-medium text-sm sm:text-base hidden sm:block",children:"Professional Workforce Management System"}),n&&r.jsx("p",{className:"text-gray-600 text-sm",children:"Workforce Management"}),W&&r.jsxs("p",{className:"text-xs sm:text-sm text-gray-500",children:["Version: ",W.version_number]})]})]}),r.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3 overflow-x-auto",children:[Z&&Je.length>0&&r.jsxs("div",{className:"relative bg-gradient-to-r from-red-400 to-red-600 text-white rounded-xl sm:rounded-2xl px-3 py-2 sm:px-4 sm:py-3 shadow-lg backdrop-blur-md flex-shrink-0",children:[r.jsx(Xn,{className:"h-4 w-4 sm:h-5 sm:w-5 inline mr-1 sm:mr-2"}),r.jsxs("span",{className:"font-medium text-sm sm:text-base",children:[Je.length," ",n?"":"pending requests"]})]}),r.jsxs("button",{onClick:()=>M(!0),className:"bg-gradient-to-r from-turquoise to-cyan text-white px-3 py-2 sm:px-6 sm:py-3 rounded-xl sm:rounded-2xl font-medium hover:shadow-2xl transform hover:scale-105 transition-all duration-200 flex items-center space-x-1 sm:space-x-2 backdrop-blur-md min-h-[44px] flex-shrink-0",children:[r.jsx(vt,{className:"h-4 w-4 sm:h-5 sm:w-5"}),r.jsx("span",{className:"text-sm sm:text-base",children:n?"Request":"New Request"})]}),S&&r.jsxs("button",{onClick:z,className:"bg-gradient-to-r from-purple-500 to-purple-700 text-white px-3 py-2 sm:px-6 sm:py-3 rounded-xl sm:rounded-2xl font-medium hover:shadow-2xl transform hover:scale-105 transition-all duration-200 flex items-center space-x-1 sm:space-x-2 backdrop-blur-md min-h-[44px] flex-shrink-0",children:[r.jsx(Ht,{className:"h-4 w-4 sm:h-5 sm:w-5"}),r.jsx("span",{className:"text-sm sm:text-base hidden sm:inline",children:"Quick Add"})]}),Z&&r.jsxs("button",{onClick:wt,className:"bg-gradient-to-r from-red-500 to-red-700 text-white px-3 py-2 sm:px-6 sm:py-3 rounded-xl sm:rounded-2xl font-medium hover:shadow-2xl transform hover:scale-105 transition-all duration-200 flex items-center space-x-1 sm:space-x-2 backdrop-blur-md min-h-[44px] flex-shrink-0",children:[r.jsx(hr,{className:"h-4 w-4 sm:h-5 sm:w-5"}),r.jsx("span",{className:"text-sm sm:text-base hidden sm:inline",children:"Delete"})]})]})]})}),r.jsx("div",{className:"backdrop-blur-md bg-white/70 border border-white/20 shadow-xl rounded-2xl p-3 sm:p-4",children:r.jsx("div",{className:"flex space-x-1 overflow-x-auto",children:[{key:"roster",label:"Roster",fullLabel:"Roster Grid",icon:Ht},{key:"requests",label:"Requests",fullLabel:"Requests",icon:Xn},{key:"overtime",label:"Overtime",fullLabel:"Overtime",icon:Sr},{key:"analytics",label:"Analytics",fullLabel:"Analytics",icon:Gh}].map(({key:w,label:E,fullLabel:Q,icon:de})=>r.jsxs("button",{onClick:()=>I(w),className:`flex items-center space-x-1 sm:space-x-2 px-3 py-2 sm:px-6 sm:py-3 rounded-xl font-medium transition-all duration-200 min-h-[44px] flex-shrink-0 ${q===w?"bg-gradient-to-r from-turquoise to-cyan text-white shadow-lg":"text-gray-600 hover:bg-white/50"}`,children:[r.jsx(de,{className:"h-4 w-4 sm:h-5 sm:w-5"}),r.jsx("span",{className:"text-sm sm:text-base",children:n?E:Q})]},w))})}),q==="roster"&&r.jsx("div",{className:"backdrop-blur-md bg-white/70 border border-white/20 shadow-xl rounded-2xl p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("button",{onClick:()=>Te("prev"),className:"p-3 rounded-xl bg-gradient-to-r from-cyan to-turquoise text-white hover:shadow-lg transform hover:scale-105 transition-all duration-200",children:r.jsx(Ko,{className:"h-6 w-6"})}),r.jsxs("div",{className:"text-center",children:[r.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-turquoise to-cyan bg-clip-text text-transparent",children:he}),W&&r.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Current Version: ",W.version_number]})]}),r.jsx("button",{onClick:()=>Te("next"),className:"p-3 rounded-xl bg-gradient-to-r from-cyan to-turquoise text-white hover:shadow-lg transform hover:scale-105 transition-all duration-200",children:r.jsx(Qo,{className:"h-6 w-6"})})]})}),q==="roster"&&(()=>{console.log(" Debug - Rendering staff profiles, count:",f.length);const w=Nh(f);return console.log(" Debug - Filtered staff count:",w.length),r.jsx("div",{className:"backdrop-blur-md bg-white/70 border border-white/20 shadow-xl rounded-2xl p-6 overflow-x-auto",children:r.jsxs("div",{className:"min-w-[1200px]",children:[r.jsxs("div",{className:"grid grid-cols-[250px_1fr] border-b-2 border-gradient-to-r from-turquoise to-cyan",children:[r.jsx("div",{className:"p-4 font-bold bg-gradient-to-r from-turquoise/10 to-cyan/10 text-turquoise",children:"Staff Member"}),r.jsx("div",{className:"grid",style:{gridTemplateColumns:`repeat(${qe.length}, minmax(90px, 1fr))`},children:qe.map((E,Q)=>{const de=E.toDateString()===new Date().toDateString(),ue=E.getDay(),Oe=ue===0||ue===6;return r.jsxs("div",{className:`p-3 text-center text-sm font-semibold border-l border-white/30 ${de?"bg-gradient-to-r from-yellow-400 to-orange-400 text-white shadow-lg":Oe?"bg-gradient-to-r from-gray-100 to-gray-200 text-gray-600":"bg-gradient-to-r from-turquoise/10 to-cyan/10 text-turquoise"}`,children:[r.jsx("div",{className:"text-lg",children:E.getDate()}),r.jsx("div",{className:"text-xs opacity-75",children:E.toLocaleDateString("en-US",{weekday:"short"})})]},Q)})})]}),w.length===0?r.jsx("div",{className:"col-span-full text-center py-12 text-gray-500",children:r.jsxs("div",{className:"animate-pulse",children:[r.jsx(rr,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),r.jsx("p",{children:"Loading staff profiles..."}),r.jsx("p",{className:"text-sm",children:"If this persists, check console logs"})]})}):w.map(E=>r.jsxs("div",{className:"grid grid-cols-[250px_1fr] border-b border-white/20 hover:bg-white/40 transition-colors",children:[r.jsxs("div",{className:"p-4 backdrop-blur-sm bg-white/50",children:[r.jsx("div",{className:"font-semibold text-gray-800",children:E.full_name}),r.jsx("div",{className:"text-sm text-turquoise capitalize font-medium",children:V0(E.role)}),E.department&&r.jsx("div",{className:"text-xs text-gray-500",children:E.department})]}),r.jsx("div",{className:"grid",style:{gridTemplateColumns:`repeat(${qe.length}, minmax(90px, 1fr))`},children:qe.map((Q,de)=>{const ue=Ae(E.id,Q),Oe=$e(E.id,Q),ze=ue==null?void 0:ue.shift_code,Ot=ze?Ni[ze]:null,Cr=Q.toISOString().split("T")[0];return r.jsxs("div",{className:`p-2 border-l border-white/20 min-h-[80px] flex flex-col justify-center items-center cursor-pointer hover:bg-white/60 transition-all duration-200 group relative ${S?"hover:shadow-lg":""}`,onClick:()=>S&&L(E.id,Q),children:[Ot&&r.jsxs("div",{className:`${Ot.color} ${Ot.textColor} text-xs px-3 py-1 rounded-full font-semibold shadow-md mb-1 relative`,children:[ze,(ue==null?void 0:ue.overtime_hours)&&ue.overtime_hours>0&&r.jsxs("div",{className:"absolute -top-1 -right-1 bg-orange-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center text-[10px] shadow-md",children:["+",ue.overtime_hours,"h"]})]}),Oe&&Oe.ot_hours>0&&r.jsxs("div",{className:"text-xs text-orange-600 font-semibold bg-orange-100 px-2 py-1 rounded-full",children:["OT: ",Oe.ot_hours,"h"]}),S&&r.jsxs("div",{className:"absolute top-1 right-1 opacity-0 group-hover:opacity-100 transition-opacity flex flex-col space-y-1",children:[r.jsx("button",{onClick:Jr=>{Jr.stopPropagation(),je({userId:E.id,date:Cr,hours:(Oe==null?void 0:Oe.ot_hours)||0,description:(Oe==null?void 0:Oe.description)||""}),pe(!0)},className:"p-1 bg-orange-500 text-white rounded-md hover:bg-orange-600 transition-colors shadow-md",title:"Manage Overtime",children:r.jsx(Sr,{className:"h-3 w-3"})}),ue&&r.jsx("button",{onClick:Jr=>{Jr.stopPropagation()},className:"p-1 bg-turquoise text-white rounded-md hover:bg-cyan transition-colors shadow-md",title:"View Details",children:r.jsx(ps,{className:"h-3 w-3"})})]})]},de)})})]},E.id))]})})})(),q==="requests"&&r.jsx("div",{className:"backdrop-blur-md bg-white/70 border border-white/20 shadow-xl rounded-2xl p-6",children:r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-xl font-bold text-turquoise mb-4",children:"Leave Requests"}),g.length===0?r.jsxs("div",{className:"text-center py-12 text-gray-500",children:[r.jsx(Xn,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),r.jsx("p",{children:"No requests found"})]}):r.jsx("div",{className:"grid gap-4",children:g.map(w=>r.jsx("div",{className:"backdrop-blur-sm bg-white/50 border border-white/30 rounded-xl p-4 hover:shadow-lg transition-all",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[r.jsx("span",{className:"font-semibold text-gray-800",children:it(w.user_id)}),r.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${w.status==="pending"?"bg-yellow-100 text-yellow-800":w.status==="approved"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:w.status.charAt(0).toUpperCase()+w.status.slice(1)})]}),r.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:[r.jsx("strong",{children:"Type:"})," ",_h[w.request_type]]}),r.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:[r.jsx("strong",{children:"Date:"})," ",new Date(w.requested_date).toLocaleDateString()]}),w.reason&&r.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:[r.jsx("strong",{children:"Reason:"})," ",w.reason]}),w.swap_with_user_id&&r.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:[r.jsx("strong",{children:"Swap with:"})," ",it(w.swap_with_user_id)]})]}),Z&&w.status==="pending"&&r.jsx("div",{className:"flex space-x-2 ml-4",children:r.jsxs("button",{onClick:()=>{te(w),ne(!0)},className:"bg-gradient-to-r from-green-500 to-green-600 text-white px-4 py-2 rounded-lg hover:shadow-lg transition-all flex items-center space-x-1",children:[r.jsx(St,{className:"h-4 w-4"}),r.jsx("span",{children:"Review"})]})})]})},w.id))})]})}),q==="overtime"&&r.jsx("div",{className:"backdrop-blur-md bg-white/70 border border-white/20 shadow-xl rounded-2xl p-6",children:r.jsxs("div",{className:"space-y-6",children:[r.jsx("h3",{className:"text-xl font-bold text-turquoise mb-4",children:"Overtime Tracking"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:Nh(f).map(w=>{const E=C.filter(Q=>Q.user_id===w.id).reduce((Q,de)=>Q+de.ot_hours,0);return r.jsxs("div",{className:"backdrop-blur-sm bg-white/50 border border-white/30 rounded-xl p-4",children:[r.jsx("div",{className:"font-semibold text-gray-800",children:w.full_name}),r.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:[E,"h"]}),r.jsx("div",{className:"text-sm text-gray-600",children:"Monthly OT"})]},w.id)})}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("h4",{className:"font-semibold text-gray-800",children:"Daily Records"}),C.length===0?r.jsxs("div",{className:"text-center py-8 text-gray-500",children:[r.jsx(Sr,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),r.jsx("p",{children:"No overtime records found"})]}):r.jsx("div",{className:"space-y-2",children:C.sort((w,E)=>new Date(E.date).getTime()-new Date(w.date).getTime()).map(w=>r.jsx("div",{className:"backdrop-blur-sm bg-white/50 border border-white/30 rounded-lg p-3 flex items-center justify-between",children:r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"font-medium text-gray-800",children:it(w.user_id)}),r.jsxs("div",{className:"text-sm text-gray-600",children:[new Date(w.date).toLocaleDateString()," - ",w.ot_hours,"h overtime"]}),w.description&&r.jsx("div",{className:"text-xs text-gray-500",children:w.description})]})},`${w.user_id}-${w.date}`))})]})]})}),q==="analytics"&&r.jsx("div",{className:"backdrop-blur-md bg-white/70 border border-white/20 shadow-xl rounded-2xl p-6",children:r.jsxs("div",{className:"space-y-6",children:[r.jsx("h3",{className:"text-xl font-bold text-turquoise mb-4",children:"Roster Analytics"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"backdrop-blur-sm bg-white/50 border border-white/30 rounded-xl p-4",children:[r.jsx("div",{className:"text-2xl font-bold text-turquoise",children:o.length}),r.jsx("div",{className:"text-sm text-gray-600",children:"Total Shifts"})]}),r.jsxs("div",{className:"backdrop-blur-sm bg-white/50 border border-white/30 rounded-xl p-4",children:[r.jsx("div",{className:"text-2xl font-bold text-red-600",children:o.filter(w=>w.shift_code==="L").length}),r.jsx("div",{className:"text-sm text-gray-600",children:"Leave Days"})]}),r.jsxs("div",{className:"backdrop-blur-sm bg-white/50 border border-white/30 rounded-xl p-4",children:[r.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:[C.reduce((w,E)=>w+E.ot_hours,0),"h"]}),r.jsx("div",{className:"text-sm text-gray-600",children:"Total OT Hours"})]}),r.jsxs("div",{className:"backdrop-blur-sm bg-white/50 border border-white/30 rounded-xl p-4",children:[r.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:Je.length}),r.jsx("div",{className:"text-sm text-gray-600",children:"Pending Requests"})]})]}),r.jsxs("div",{className:"backdrop-blur-sm bg-white/50 border border-white/30 rounded-xl p-4",children:[r.jsx("h4",{className:"font-semibold text-gray-800 mb-4",children:"Shift Distribution"}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3",children:Object.entries(Ni).map(([w,E])=>{const Q=o.filter(de=>de.shift_code===w).length;return r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:`${E.color} ${E.textColor} text-sm px-3 py-2 rounded-lg font-medium mb-1`,children:w}),r.jsx("div",{className:"text-lg font-bold text-gray-800",children:Q}),r.jsx("div",{className:"text-xs text-gray-600",children:E.name})]},w)})})]})]})}),r.jsxs("div",{className:"backdrop-blur-md bg-white/70 border border-white/20 shadow-xl rounded-2xl p-6",children:[r.jsxs("h3",{className:"font-bold mb-4 flex items-center text-turquoise text-lg",children:[r.jsx(sa,{className:"h-6 w-6 mr-2"}),"Shift Codes & Working Hours"]}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 mb-4",children:Object.entries(Ni).map(([w,E])=>r.jsxs("div",{className:"flex items-center space-x-3 backdrop-blur-sm bg-white/50 p-3 rounded-xl",children:[r.jsx("div",{className:`${E.color} ${E.textColor} text-sm px-3 py-1 rounded-lg font-semibold min-w-[50px] text-center shadow-md`,children:w}),r.jsx("span",{className:"text-sm font-medium text-gray-700",children:E.name})]},w))}),r.jsxs("div",{className:"text-sm text-gray-600 bg-gradient-to-r from-blue-50 to-cyan-50 p-4 rounded-xl border border-blue-200",children:[r.jsx("p",{className:"font-semibold text-gray-800 mb-2",children:"Working Hours Information:"}),r.jsx("p",{children:" Standard Hours: 8:00 AM - 5:00 PM (9 hours with 1-hour break)"}),r.jsx("p",{children:" Break Time: 1 hour (typically 12:00 PM - 1:00 PM)"}),r.jsx("p",{children:" Overtime: Any hours worked after 5:00 PM"})]})]}),ie&&r.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"backdrop-blur-md bg-white/90 border border-white/20 shadow-2xl rounded-2xl p-6 w-full max-w-md",children:[r.jsx("h2",{className:"text-2xl font-bold text-turquoise mb-6",children:"New Request"}),r.jsxs("form",{onSubmit:bt,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Request Type"}),r.jsxs("select",{value:ae.type,onChange:w=>le({...ae,type:w.target.value}),className:"w-full px-4 py-3 border border-white/30 rounded-xl focus:outline-none focus:ring-2 focus:ring-turquoise focus:border-transparent transition-all bg-white/80 backdrop-blur-sm text-gray-800",children:[r.jsx("option",{value:"leave",children:"Leave Request"}),r.jsx("option",{value:"half_day",children:"Half Day Request"}),r.jsx("option",{value:"shift_swap",children:"Shift Swap"}),r.jsx("option",{value:"off_day_swap",children:"Off Day Swap"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Date"}),r.jsx("input",{type:"date",value:ae.date,onChange:w=>le({...ae,date:w.target.value}),className:"w-full px-4 py-3 border border-white/30 rounded-xl focus:outline-none focus:ring-2 focus:ring-turquoise focus:border-transparent transition-all bg-white/80 backdrop-blur-sm text-gray-800",required:!0})]}),(ae.type==="shift_swap"||ae.type==="off_day_swap")&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Swap With"}),r.jsxs("select",{value:ae.swapPartner,onChange:w=>le({...ae,swapPartner:w.target.value}),className:"w-full px-4 py-3 border border-white/30 rounded-xl focus:outline-none focus:ring-2 focus:ring-turquoise focus:border-transparent transition-all bg-white/80 backdrop-blur-sm text-gray-800",required:ae.type==="shift_swap",children:[r.jsx("option",{value:"",children:"Select staff member"}),f.filter(w=>w.id!==(K==null?void 0:K.id)).map(w=>r.jsx("option",{value:w.id,children:w.full_name},w.id))]})]}),ae.type==="off_day_swap"&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Swap Date"}),r.jsx("input",{type:"date",value:ae.swapDate,onChange:w=>le({...ae,swapDate:w.target.value}),className:"w-full px-4 py-3 border border-white/30 rounded-xl focus:outline-none focus:ring-2 focus:ring-turquoise focus:border-transparent transition-all bg-white/80 backdrop-blur-sm text-gray-800"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Reason (Optional)"}),r.jsx("textarea",{value:ae.reason,onChange:w=>le({...ae,reason:w.target.value}),className:"w-full px-4 py-3 border border-white/30 rounded-xl focus:outline-none focus:ring-2 focus:ring-turquoise focus:border-transparent transition-all bg-white/80 backdrop-blur-sm text-gray-800 h-20 resize-none",placeholder:"Additional details..."})]}),r.jsxs("div",{className:"flex space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:()=>M(!1),className:"flex-1 px-6 py-3 border border-gray-300 rounded-xl hover:bg-white/70 transition-all text-gray-700 font-medium",children:"Cancel"}),r.jsx("button",{type:"submit",className:"flex-1 bg-gradient-to-r from-turquoise to-cyan text-white px-6 py-3 rounded-xl font-medium hover:shadow-2xl transform hover:scale-105 transition-all duration-200",children:"Submit Request"})]})]})]})}),X&&r.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"backdrop-blur-md bg-white/90 border border-white/20 shadow-2xl rounded-2xl p-6 w-full max-w-md",children:[r.jsx("h2",{className:"text-2xl font-bold text-turquoise mb-6",children:"Edit Shift"}),r.jsx("div",{className:"grid grid-cols-2 gap-3 mb-6",children:Object.entries(Ni).map(([w,E])=>r.jsxs("button",{onClick:()=>Ie(w),className:`${E.color} ${E.textColor} p-4 rounded-xl font-semibold hover:shadow-lg transform hover:scale-105 transition-all duration-200 text-center`,children:[r.jsx("div",{className:"text-lg",children:w}),r.jsx("div",{className:"text-xs mt-1",children:E.name})]},w))}),r.jsx("button",{onClick:()=>B(!1),className:"w-full px-6 py-3 border border-gray-300 rounded-xl hover:bg-white/70 transition-all text-gray-700 font-medium",children:"Cancel"})]})}),se&&r.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"backdrop-blur-md bg-white/90 border border-white/20 shadow-2xl rounded-2xl p-6 w-full max-w-md",children:[r.jsx("h2",{className:"text-2xl font-bold text-orange-600 mb-6",children:"Manage Overtime"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Staff Member"}),r.jsx("div",{className:"px-4 py-3 bg-gray-100 rounded-xl text-gray-800",children:it(ye.userId)})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Date"}),r.jsx("div",{className:"px-4 py-3 bg-gray-100 rounded-xl text-gray-800",children:new Date(ye.date).toLocaleDateString()})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Overtime Hours"}),r.jsx("input",{type:"number",min:"0",max:"12",step:"0.5",value:ye.hours,onChange:w=>je({...ye,hours:parseFloat(w.target.value)||0}),className:"w-full px-4 py-3 border border-white/30 rounded-xl focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all bg-white/80 backdrop-blur-sm text-gray-800"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Description (Optional)"}),r.jsx("textarea",{value:ye.description,onChange:w=>je({...ye,description:w.target.value}),className:"w-full px-4 py-3 border border-white/30 rounded-xl focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all bg-white/80 backdrop-blur-sm text-gray-800 h-20 resize-none",placeholder:"Reason for overtime..."})]}),r.jsxs("div",{className:"flex space-x-3 pt-4",children:[r.jsx("button",{onClick:()=>{pe(!1)},className:"flex-1 px-6 py-3 border border-gray-300 rounded-xl hover:bg-white/70 transition-all text-gray-700 font-medium",children:"Cancel"}),r.jsx("button",{onClick:()=>{me(ye.userId,ye.date,ye.hours,ye.description),pe(!1)},className:"flex-1 bg-gradient-to-r from-orange-500 to-orange-600 text-white px-6 py-3 rounded-xl font-medium hover:shadow-2xl transform hover:scale-105 transition-all duration-200",children:"Save Overtime"})]})]})]})}),F&&Se&&r.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"backdrop-blur-md bg-white/90 border border-white/20 shadow-2xl rounded-2xl p-6 w-full max-w-md",children:[r.jsx("h2",{className:"text-2xl font-bold text-turquoise mb-6",children:"Review Request"}),r.jsxs("div",{className:"space-y-4 mb-6",children:[r.jsxs("div",{children:[r.jsx("span",{className:"font-semibold text-gray-700",children:"Staff:"}),r.jsx("span",{className:"ml-2 text-gray-800",children:it(Se.user_id)})]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-semibold text-gray-700",children:"Type:"}),r.jsx("span",{className:"ml-2 text-gray-800",children:_h[Se.request_type]})]}),r.jsxs("div",{children:[r.jsx("span",{className:"font-semibold text-gray-700",children:"Date:"}),r.jsx("span",{className:"ml-2 text-gray-800",children:new Date(Se.requested_date).toLocaleDateString()})]}),Se.reason&&r.jsxs("div",{children:[r.jsx("span",{className:"font-semibold text-gray-700",children:"Reason:"}),r.jsx("p",{className:"mt-1 text-gray-800 bg-gray-50 p-3 rounded-xl",children:Se.reason})]})]}),r.jsxs("div",{className:"flex space-x-3",children:[r.jsx("button",{onClick:()=>ne(!1),className:"flex-1 px-6 py-3 border border-gray-300 rounded-xl hover:bg-white/70 transition-all text-gray-700 font-medium",children:"Cancel"}),r.jsx("button",{onClick:()=>lt(Se.id,!1),className:"flex-1 bg-gradient-to-r from-red-500 to-red-600 text-white px-6 py-3 rounded-xl font-medium hover:shadow-2xl transition-all duration-200",children:"Reject"}),r.jsx("button",{onClick:()=>lt(Se.id,!0),className:"flex-1 bg-gradient-to-r from-green-500 to-green-600 text-white px-6 py-3 rounded-xl font-medium hover:shadow-2xl transition-all duration-200",children:"Approve"})]})]})})]})}const kh=c=>c>40?{isValid:!1,error:"Session exceeds maximum capacity of 40 candidates"}:c>=30?{isValid:!0,warning:`Session approaching capacity (${c}/40 candidates)`}:{isValid:!0},H0=c=>c>=40?"text-red-600 bg-red-100":c>=30?"text-orange-600 bg-orange-100":"text-green-600 bg-green-100",Sh=c=>`${c}/40 candidates`,W0={PEARSON:"from-blue-500 to-blue-600 text-white",VUE:"from-red-500 to-red-600 text-white",ETS:"from-green-500 to-green-600 text-white",PSI:"from-purple-500 to-purple-600 text-white",PROMETRIC:"from-orange-500 to-orange-600 text-white",OTHER:"from-gray-500 to-gray-600 text-white"};function rf(){const{user:c}=It(),[n,a]=P.useState(new Date),[l,o]=P.useState([]),[u,f]=P.useState(!0),[p,g]=P.useState(!1),[x,y]=P.useState(!1),[j,C]=P.useState(null),[D,U]=P.useState(null),[V,q]=P.useState(null),[I,ie]=P.useState({client_name:"",exam_name:"",date:"",candidate_count:1,start_time:"09:00",end_time:"17:00"});P.useEffect(()=>{c&&X()},[c,n]),P.useEffect(()=>{if(V){const $=setTimeout(()=>q(null),4e3);return()=>clearTimeout($)}},[V]);const M=($,O)=>{q({type:$,message:O})},X=async()=>{try{f(!0);const $=new Date(n.getFullYear(),n.getMonth(),1),O=new Date(n.getFullYear(),n.getMonth()+1,0),N=dr($),v=dr(O),{data:K,error:Z}=await re.from("sessions").select("*").gte("date",N).lte("date",v).order("date",{ascending:!0});if(Z)throw console.error("Supabase error:",Z),Z;o(K||[])}catch($){console.error("Error loading sessions:",$),M("error","Failed to load sessions"),o([])}finally{f(!1)}},B=()=>{const $=n.getFullYear(),O=n.getMonth(),N=new Date($,O,1),K=new Date($,O+1,0).getDate(),Z=N.getDay(),S=[];for(let H=0;H<Z;H++)S.push(null);for(let H=1;H<=K;H++)S.push(new Date($,O,H));return S},se=$=>{const O=dr($);return l.filter(N=>N.date===O)},pe=$=>{const O=$.toUpperCase();return O.includes("PEARSON")?"PEARSON":O.includes("VUE")?"VUE":O.includes("ETS")?"ETS":O.includes("PSI")?"PSI":O.includes("PROMETRIC")?"PROMETRIC":"OTHER"},F=$=>{const O=se($),N={};return O.forEach(v=>{N[v.client_name]=(N[v.client_name]||0)+v.candidate_count}),N},ne=($,O)=>{const N=v=>{const[K,Z]=v.split(":"),S=parseInt(K),H=S>=12?"pm":"am";return`${S>12?S-12:S===0?12:S}:${Z}${H}`};return`${N($)} - ${N(O)}`},oe=($,O)=>{if(O)U(O),ie({client_name:O.client_name,exam_name:O.exam_name,date:O.date,candidate_count:O.candidate_count,start_time:O.start_time,end_time:O.end_time});else{U(null);const N=$?dr($):ef();ie({client_name:"",exam_name:"",date:N,candidate_count:1,start_time:"09:00",end_time:"17:00"})}g(!0)},Ne=$=>{se($).length>0?(C($),y(!0)):oe($)},Se=()=>{g(!1),y(!1),U(null),C(null),ie({client_name:"",exam_name:"",date:"",candidate_count:1,start_time:"09:00",end_time:"17:00"})},te=async $=>{if($.preventDefault(),!c)return;const O=kh(I.candidate_count);if(!O.isValid){M("error",O.error);return}O.warning&&M("warning",O.warning);try{const N={...I,user_id:c.id,updated_at:new Date().toISOString()};if(D&&D.id){const{error:v}=await re.from("sessions").update(N).eq("id",D.id);if(v)throw v;M("success","Session updated successfully!")}else{const{error:v}=await re.from("sessions").insert([{...N,created_at:new Date().toISOString()}]);if(v)throw v;M("success","Session created successfully!")}Se(),await X()}catch(N){console.error("Error saving session:",N),M("error","Failed to save session")}},ae=async $=>{if(confirm("Are you sure you want to delete this session?"))try{const{error:O}=await re.from("sessions").delete().eq("id",$);if(O)throw O;M("success","Session deleted successfully!"),await X(),j&&se(j).filter(v=>v.id!==$).length===0&&y(!1)}catch(O){console.error("Error deleting session:",O),M("error","Failed to delete session")}},le=$=>{const O=new Date(n);$==="prev"?O.setMonth(O.getMonth()-1):O.setMonth(O.getMonth()+1),a(O)},ye=n.toLocaleDateString("en-IN",{month:"long",year:"numeric",timeZone:"Asia/Kolkata"}),je=B(),W=$=>$?q0($):!1;return u?r.jsx("div",{className:"flex-1 p-6 flex items-center justify-center bg-gradient-to-br from-blue-50 via-cyan-50 to-turquoise-50 min-h-screen",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-turquoise mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"Loading calendar data..."})]})}):r.jsxs("div",{className:"flex-1 p-6 space-y-6 bg-gradient-to-br from-blue-50 via-cyan-50 to-turquoise-50 min-h-screen",children:[V&&r.jsx("div",{className:`fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg backdrop-blur-md ${V.type==="success"?"bg-green-100/80 text-green-800 border border-green-200":V.type==="warning"?"bg-yellow-100/80 text-yellow-800 border border-yellow-200":"bg-red-100/80 text-red-800 border border-red-200"} transition-all duration-300`,children:r.jsxs("div",{className:"flex items-center space-x-2",children:[V.type==="success"?"":V.type==="warning"?"":"",r.jsx("span",{children:V.message})]})}),r.jsx("div",{className:"backdrop-blur-md bg-white/70 border border-white/20 shadow-xl rounded-2xl p-6",children:r.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{className:"bg-gradient-to-r from-turquoise to-cyan p-3 rounded-xl shadow-lg",children:r.jsx(Ht,{className:"h-8 w-8 text-white"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-turquoise to-cyan bg-clip-text text-transparent",children:"FETS CALENDAR"}),r.jsx("p",{className:"text-gray-600",children:"Session scheduling and management"})]})]}),r.jsxs("button",{onClick:()=>oe(),className:"bg-gradient-to-r from-turquoise to-cyan text-white px-6 py-3 rounded-xl font-medium hover:shadow-2xl transform hover:scale-105 transition-all duration-200 flex items-center space-x-2",children:[r.jsx(vt,{className:"h-5 w-5"}),r.jsx("span",{children:"Add Session"})]})]})}),r.jsx("div",{className:"backdrop-blur-md bg-white/70 border border-white/20 shadow-xl rounded-2xl p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("button",{onClick:()=>le("prev"),className:"p-3 rounded-xl bg-gradient-to-r from-turquoise to-cyan text-white hover:shadow-lg transform hover:scale-105 transition-all duration-200",children:r.jsx(Ko,{className:"h-5 w-5"})}),r.jsx("h2",{className:"text-2xl font-bold text-center min-w-[250px] bg-gradient-to-r from-turquoise to-cyan bg-clip-text text-transparent",children:ye}),r.jsx("button",{onClick:()=>le("next"),className:"p-3 rounded-xl bg-gradient-to-r from-turquoise to-cyan text-white hover:shadow-lg transform hover:scale-105 transition-all duration-200",children:r.jsx(Qo,{className:"h-5 w-5"})})]})}),r.jsxs("div",{className:"backdrop-blur-md bg-white/70 border border-white/20 shadow-xl rounded-2xl p-6",children:[r.jsx("div",{className:"grid grid-cols-7 gap-2 mb-4",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map($=>r.jsx("div",{className:"text-center text-sm font-bold text-turquoise py-3 backdrop-blur-sm bg-white/50 rounded-xl",children:$},$))}),r.jsx("div",{className:"grid grid-cols-7 gap-2",children:je.map(($,O)=>{if(!$)return r.jsx("div",{className:"aspect-square"},O);const N=F($),v=Object.keys(N).length>0,K=W($);return r.jsxs("div",{className:`aspect-square rounded-2xl p-3 cursor-pointer transition-all duration-200 hover:scale-105 backdrop-blur-sm ${K?"bg-gradient-to-br from-yellow-400/80 to-orange-400/80 text-white shadow-2xl border border-yellow-300":v?"bg-gradient-to-br from-turquoise/20 to-cyan/30 border border-turquoise/30 hover:shadow-xl":"bg-white/50 border border-white/30 hover:bg-white/70 hover:shadow-lg"}`,onClick:()=>Ne($),children:[r.jsx("div",{className:`text-lg font-bold mb-2 ${K?"text-white":"text-gray-800"}`,children:$.getDate()}),r.jsxs("div",{className:"space-y-1 overflow-hidden",children:[Object.entries(N).slice(0,3).map(([Z,S],H)=>{const ce=pe(Z),Ce=W0[ce];return r.jsx("div",{className:`text-xs px-2 py-1 rounded-lg bg-gradient-to-r ${Ce} shadow-md`,children:r.jsxs("div",{className:"font-medium truncate",children:[Z,": ",S]})},H)}),Object.keys(N).length>3&&r.jsxs("div",{className:"text-xs text-turquoise font-semibold text-center bg-white/50 rounded-lg py-1",children:["+",Object.keys(N).length-3," more"]})]})]},O)})})]}),x&&j&&r.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"bg-gradient-to-br from-gray-900/95 to-black/95 backdrop-blur-md border border-gray-700/50 rounded-2xl p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto shadow-2xl",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-turquoise",children:B0(j)}),r.jsx("button",{onClick:Se,className:"p-2 text-gray-400 hover:text-white transition-colors",children:r.jsx(mt,{className:"h-6 w-6"})})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b border-gray-700",children:[r.jsx("th",{className:"text-left py-3 px-4 text-turquoise font-semibold text-sm uppercase tracking-wider",children:"SESSION"}),r.jsx("th",{className:"text-left py-3 px-4 text-turquoise font-semibold text-sm uppercase tracking-wider",children:"CLIENT"}),r.jsx("th",{className:"text-left py-3 px-4 text-turquoise font-semibold text-sm uppercase tracking-wider",children:"EXAM NAME"}),r.jsx("th",{className:"text-left py-3 px-4 text-turquoise font-semibold text-sm uppercase tracking-wider",children:"TIME"}),r.jsx("th",{className:"text-left py-3 px-4 text-turquoise font-semibold text-sm uppercase tracking-wider",children:"CANDIDATES"}),r.jsx("th",{className:"w-20"})]})}),r.jsx("tbody",{children:se(j).map($=>r.jsxs("tr",{className:"border-b border-gray-800/50 hover:bg-gray-800/30 transition-colors",children:[r.jsx("td",{className:"py-4 px-4",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"w-2 h-2 bg-orange-400 rounded-full mr-3"}),r.jsx("span",{className:"text-white font-medium",children:"Morning"})]})}),r.jsx("td",{className:"py-4 px-4 text-white font-medium",children:$.client_name}),r.jsx("td",{className:"py-4 px-4 text-white",children:$.exam_name}),r.jsx("td",{className:"py-4 px-4 text-white",children:ne($.start_time,$.end_time)}),r.jsx("td",{className:"py-4 px-4 text-center",children:r.jsx("div",{className:`px-2 py-1 rounded text-xs font-semibold ${H0($.candidate_count)}`,children:Sh($.candidate_count)})}),r.jsx("td",{className:"py-4 px-4",children:r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("button",{onClick:()=>{y(!1),oe(void 0,$)},className:"p-2 text-turquoise hover:text-cyan transition-colors hover:bg-gray-700/50 rounded-lg",title:"Edit session",children:r.jsx(gs,{className:"h-4 w-4"})}),r.jsx("button",{onClick:()=>$.id&&ae($.id),className:"p-2 text-red-400 hover:text-red-300 transition-colors hover:bg-gray-700/50 rounded-lg",title:"Delete session",children:r.jsx(hr,{className:"h-4 w-4"})})]})})]},$.id))})]})}),r.jsx("div",{className:"mt-6 flex justify-center",children:r.jsxs("button",{onClick:()=>{y(!1),oe(j)},className:"bg-gradient-to-r from-turquoise to-cyan text-white px-6 py-3 rounded-xl font-medium hover:shadow-xl transform hover:scale-105 transition-all duration-200 flex items-center space-x-2",children:[r.jsx(vt,{className:"h-5 w-5"}),r.jsx("span",{children:"Add Session for This Day"})]})})]})}),p&&r.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"backdrop-blur-md bg-white/95 border border-white/20 shadow-2xl rounded-2xl p-6 w-full max-w-md max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-turquoise to-cyan bg-clip-text text-transparent",children:D?"Edit Session":"Add New Session"}),r.jsx("button",{onClick:Se,className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:r.jsx(mt,{className:"h-6 w-6"})})]}),r.jsxs("form",{onSubmit:te,className:"space-y-5",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Client Name"}),r.jsx("input",{type:"text",value:I.client_name,onChange:$=>ie({...I,client_name:$.target.value}),className:"w-full px-4 py-3 border border-white/30 rounded-xl focus:outline-none focus:ring-2 focus:ring-turquoise focus:border-transparent transition-all bg-white/80 backdrop-blur-sm text-gray-800 shadow-md",placeholder:"e.g., Pearson VUE, ETS, PSI...",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Exam Name"}),r.jsx("input",{type:"text",value:I.exam_name,onChange:$=>ie({...I,exam_name:$.target.value}),className:"w-full px-4 py-3 border border-white/30 rounded-xl focus:outline-none focus:ring-2 focus:ring-turquoise focus:border-transparent transition-all bg-white/80 backdrop-blur-sm text-gray-800 shadow-md",placeholder:"e.g., TOEFL, GRE, CompTIA...",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Date"}),r.jsx("input",{type:"date",value:I.date,onChange:$=>ie({...I,date:$.target.value}),className:"w-full px-4 py-3 border border-white/30 rounded-xl focus:outline-none focus:ring-2 focus:ring-turquoise focus:border-transparent transition-all bg-white/80 backdrop-blur-sm text-gray-800 shadow-md",required:!0})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Start Time"}),r.jsx("input",{type:"time",value:I.start_time,onChange:$=>ie({...I,start_time:$.target.value}),className:"w-full px-4 py-3 border border-white/30 rounded-xl focus:outline-none focus:ring-2 focus:ring-turquoise focus:border-transparent transition-all bg-white/80 backdrop-blur-sm text-gray-800 shadow-md",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"End Time"}),r.jsx("input",{type:"time",value:I.end_time,onChange:$=>ie({...I,end_time:$.target.value}),className:"w-full px-4 py-3 border border-white/30 rounded-xl focus:outline-none focus:ring-2 focus:ring-turquoise focus:border-transparent transition-all bg-white/80 backdrop-blur-sm text-gray-800 shadow-md",required:!0})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Candidate Count"}),r.jsx("input",{type:"number",min:"1",max:"40",value:I.candidate_count,onChange:$=>{const O=parseInt($.target.value)||1;ie({...I,candidate_count:O});const N=kh(O);N.warning?M("warning",N.warning):N.error&&M("error",N.error)},className:`w-full px-4 py-3 border border-white/30 rounded-xl focus:outline-none focus:ring-2 focus:ring-turquoise focus:border-transparent transition-all bg-white/80 backdrop-blur-sm text-gray-800 shadow-md ${I.candidate_count>=40?"border-red-300 bg-red-50":I.candidate_count>=30?"border-yellow-300 bg-yellow-50":"border-white/30"}`,required:!0}),r.jsxs("div",{className:"mt-2 text-xs",children:[r.jsx("span",{className:`font-medium ${I.candidate_count>=40?"text-red-600":I.candidate_count>=30?"text-orange-600":"text-green-600"}`,children:Sh(I.candidate_count)}),I.candidate_count>=30&&r.jsx("span",{className:"ml-2 text-xs text-gray-500",children:I.candidate_count>=40?"Maximum capacity reached":"Approaching capacity"})]})]}),r.jsxs("div",{className:"flex space-x-4 pt-4",children:[r.jsx("button",{type:"button",onClick:Se,className:"flex-1 px-6 py-3 border border-gray-300 rounded-xl hover:bg-gray-50 transition-all text-gray-700 font-medium backdrop-blur-sm",children:"Cancel"}),r.jsx("button",{type:"submit",className:"flex-1 bg-gradient-to-r from-turquoise to-cyan text-white px-6 py-3 rounded-xl font-medium hover:shadow-2xl transform hover:scale-105 transition-all duration-200",children:D?"Update Session":"Create Session"})]})]})]})})]})}function K0(){const{user:c,profile:n}=It(),[a,l]=P.useState("feed"),[o,u]=P.useState([]),[f,p]=P.useState(!0),[g,x]=P.useState(""),[y,j]=P.useState({}),[C,D]=P.useState({}),[U,V]=P.useState(!1);P.useEffect(()=>{c&&q()},[c]);const q=async()=>{try{p(!0),console.log("Loading My Desk feed data...");const{data:F,error:ne}=await re.from("wall_posts").select(`
          *,
          profiles:user_id (
            full_name,
            avatar_url
          )
        `).eq("is_deleted",!1).order("created_at",{ascending:!1}).limit(20);if(ne)console.error("Error loading posts:",ne),I();else{const oe=await Promise.all((F||[]).map(async Ne=>{const{count:Se}=await re.from("wall_likes").select("*",{count:"exact",head:!0}).eq("post_id",Ne.id),{data:te}=await re.from("wall_likes").select("id").eq("post_id",Ne.id).eq("user_id",c.id).single(),{count:ae}=await re.from("wall_comments").select("*",{count:"exact",head:!0}).eq("post_id",Ne.id).eq("is_deleted",!1);return{...Ne,author:Ne.profiles,likes_count:Se||0,comments_count:ae||0,user_liked:!!te}}));u(oe),console.log(`Loaded ${oe.length} posts`)}}catch(F){console.error("Error loading feed data:",F),I()}finally{p(!1)}},I=()=>{const F=[{id:"1",user_id:c.id,content:"Just completed the morning candidate check-in process. Everything running smoothly for today's certification exams! ",post_type:"update",created_at:new Date(Date.now()-72e5).toISOString(),updated_at:new Date(Date.now()-72e5).toISOString(),is_deleted:!1,author:{full_name:(n==null?void 0:n.full_name)||"Test Administrator",avatar_url:void 0},likes_count:5,comments_count:2,user_liked:!1},{id:"2",user_id:"system",content:"System Update: New emergency evacuation procedures have been uploaded to the FETS Vault. All staff should review the updated protocols.",post_type:"announcement",created_at:new Date(Date.now()-144e5).toISOString(),updated_at:new Date(Date.now()-144e5).toISOString(),is_deleted:!1,author:{full_name:"FETS System",avatar_url:void 0},likes_count:12,comments_count:4,user_liked:!0},{id:"3",user_id:c.id,content:"Great teamwork today! Successfully managed a high-volume testing session with 150+ candidates. Shoutout to the entire staff for maintaining excellent service standards.",post_type:"update",created_at:new Date(Date.now()-216e5).toISOString(),updated_at:new Date(Date.now()-216e5).toISOString(),is_deleted:!1,author:{full_name:(n==null?void 0:n.full_name)||"Test Administrator",avatar_url:void 0},likes_count:18,comments_count:8,user_liked:!1}];u(F)},ie=async()=>{if(!(!g.trim()||!c))try{V(!0);const{error:F}=await re.from("wall_posts").insert({user_id:c.id,content:g,post_type:"update"});if(F){console.error("Error creating post:",F);const ne={id:Date.now().toString(),user_id:c.id,content:g,post_type:"update",created_at:new Date().toISOString(),updated_at:new Date().toISOString(),is_deleted:!1,author:{full_name:(n==null?void 0:n.full_name)||"You",avatar_url:n==null?void 0:n.avatar_url},likes_count:0,comments_count:0,user_liked:!1};u([ne,...o])}else q();x("")}catch(F){console.error("Error creating post:",F)}finally{V(!1)}},M=async F=>{if(!c)return;const ne=o.find(oe=>oe.id===F);if(ne)try{ne.user_liked?(await re.from("wall_likes").delete().eq("post_id",F).eq("user_id",c.id),u(o.map(oe=>oe.id===F?{...oe,user_liked:!1,likes_count:oe.likes_count-1}:oe))):(await re.from("wall_likes").insert({post_id:F,user_id:c.id}),u(o.map(oe=>oe.id===F?{...oe,user_liked:!0,likes_count:oe.likes_count+1}:oe)))}catch(oe){console.error("Error toggling like:",oe)}},X=async F=>{var oe;const ne=(oe=y[F])==null?void 0:oe.trim();if(!(!ne||!c))try{await re.from("wall_comments").insert({post_id:F,user_id:c.id,content:ne}),u(o.map(Ne=>Ne.id===F?{...Ne,comments_count:Ne.comments_count+1}:Ne)),j({...y,[F]:""})}catch(Ne){console.error("Error adding comment:",Ne)}},B=F=>{const ne=new Date,oe=new Date(F),Ne=ne.getTime()-oe.getTime(),Se=Math.floor(Ne/(1e3*60*60)),te=Math.floor(Se/24);if(Se<1){const ae=Math.floor(Ne/6e4);return ae<1?"Just now":`${ae}m ago`}else return Se<24?`${Se}h ago`:te<7?`${te}d ago`:oe.toLocaleDateString()},se=()=>{var F;return n!=null&&n.full_name?n.full_name.split(" ")[0]:((F=c==null?void 0:c.email)==null?void 0:F.split("@")[0])||"User"},pe=F=>{switch(F){case"announcement":return"bg-blue-100 text-blue-800 border-blue-200";case"achievement":return"bg-green-100 text-green-800 border-green-200";case"alert":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}};return f?r.jsx("div",{className:"flex-1 p-6 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-yellow-500 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"Loading your workspace..."})]})}):r.jsxs("div",{className:"flex-1 p-6 bg-gray-50",children:[r.jsxs("div",{className:"mb-8",children:[r.jsxs("div",{className:"flex items-center mb-4",children:[r.jsx(kr,{className:"h-8 w-8 text-yellow-500 mr-3"}),r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"My Desk"})]}),r.jsx("p",{className:"text-gray-600",children:"Your personal workspace and activity feed"})]}),r.jsx("div",{className:"bg-gradient-to-r from-yellow-400 via-yellow-500 to-yellow-600 rounded-2xl p-8 mb-8 text-white",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("h2",{className:"text-2xl font-bold text-black mb-2",children:["Welcome back, ",se(),"!"]}),r.jsx("p",{className:"text-black/80 text-lg",children:"Stay connected with your team and manage your daily tasks."})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("div",{className:"text-black/80 text-sm",children:"Today"}),r.jsx("div",{className:"text-black font-bold text-xl",children:new Date().toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"})})]})]})}),r.jsxs("div",{className:"golden-card p-6",children:[r.jsx("div",{className:"flex space-x-6 mb-6 border-b border-gray-200",children:[{id:"feed",name:"Activity Feed",icon:kr},{id:"fets-roster",name:"FETS Roster",icon:_r},{id:"fets-calendar",name:"FETS Calendar",icon:Ht}].map(F=>{const ne=F.icon;return r.jsxs("button",{onClick:()=>l(F.id),className:`flex items-center space-x-2 px-4 py-2 rounded-t-lg font-medium transition-colors ${a===F.id?"text-yellow-600 border-b-2 border-yellow-500":"text-gray-500 hover:text-gray-700"}`,children:[r.jsx(ne,{className:"h-4 w-4"}),r.jsx("span",{children:F.name})]},F.id)})}),a==="feed"&&r.jsxs("div",{className:"max-w-2xl mx-auto",children:[r.jsx("div",{className:"bg-white rounded-lg border p-6 mb-6",children:r.jsxs("div",{className:"flex space-x-4",children:[r.jsx("div",{className:"w-12 h-12 bg-yellow-500 rounded-full flex items-center justify-center",children:r.jsx(kr,{className:"h-6 w-6 text-black"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("textarea",{value:g,onChange:F=>x(F.target.value),placeholder:"Share an update with your team...",className:"w-full p-3 border border-gray-200 rounded-lg resize-none focus:ring-2 focus:ring-yellow-500 focus:border-transparent",rows:3}),r.jsxs("div",{className:"flex items-center justify-between mt-3",children:[r.jsx("div",{className:"flex items-center space-x-3",children:r.jsxs("button",{className:"flex items-center space-x-1 text-gray-500 hover:text-gray-700",children:[r.jsx(N0,{className:"h-5 w-5"}),r.jsx("span",{className:"text-sm",children:"Photo"})]})}),r.jsxs("button",{onClick:ie,disabled:!g.trim()||U,className:"golden-button flex items-center space-x-2 disabled:opacity-50",children:[U?r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-black"}):r.jsx(vh,{className:"h-4 w-4"}),r.jsx("span",{children:U?"Posting...":"Post Update"})]})]})]})]})}),r.jsxs("div",{className:"space-y-6",children:[o.map(F=>{var ne,oe;return r.jsxs("div",{className:"bg-white rounded-lg border p-6 hover:shadow-md transition-shadow",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-10 h-10 bg-yellow-500 rounded-full flex items-center justify-center",children:r.jsx(kr,{className:"h-5 w-5 text-black"})}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-gray-900",children:((ne=F.author)==null?void 0:ne.full_name)||"Unknown User"}),r.jsx("p",{className:"text-sm text-gray-500",children:B(F.created_at)})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[F.post_type!=="update"&&r.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium border ${pe(F.post_type)}`,children:F.post_type.toUpperCase()}),r.jsx("button",{className:"text-gray-400 hover:text-gray-600",children:r.jsx(b0,{className:"h-5 w-5"})})]})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("p",{className:"text-gray-800 leading-relaxed",children:F.content}),F.image_url&&r.jsx("img",{src:F.image_url,alt:"Post image",className:"mt-3 rounded-lg max-w-full h-auto"})]}),r.jsx("div",{className:"flex items-center justify-between pt-3 border-t border-gray-100",children:r.jsxs("div",{className:"flex items-center space-x-6",children:[r.jsxs("button",{onClick:()=>M(F.id),className:`flex items-center space-x-2 transition-colors ${F.user_liked?"text-red-500":"text-gray-500 hover:text-red-500"}`,children:[r.jsx(j0,{className:`h-5 w-5 ${F.user_liked?"fill-current":""}`}),r.jsx("span",{className:"text-sm",children:F.likes_count})]}),r.jsxs("button",{onClick:()=>D({...C,[F.id]:!C[F.id]}),className:"flex items-center space-x-2 text-gray-500 hover:text-blue-500 transition-colors",children:[r.jsx(C0,{className:"h-5 w-5"}),r.jsx("span",{className:"text-sm",children:F.comments_count})]}),r.jsxs("button",{className:"flex items-center space-x-2 text-gray-500 hover:text-green-500 transition-colors",children:[r.jsx(D0,{className:"h-5 w-5"}),r.jsx("span",{className:"text-sm",children:"Share"})]})]})}),C[F.id]&&r.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100",children:r.jsxs("div",{className:"flex space-x-3",children:[r.jsx("div",{className:"w-8 h-8 bg-yellow-500 rounded-full flex items-center justify-center",children:r.jsx(kr,{className:"h-4 w-4 text-black"})}),r.jsxs("div",{className:"flex-1 flex space-x-2",children:[r.jsx("input",{type:"text",value:y[F.id]||"",onChange:Ne=>j({...y,[F.id]:Ne.target.value}),placeholder:"Write a comment...",className:"flex-1 px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent",onKeyPress:Ne=>{Ne.key==="Enter"&&X(F.id)}}),r.jsx("button",{onClick:()=>X(F.id),disabled:!((oe=y[F.id])!=null&&oe.trim()),className:"px-4 py-2 bg-yellow-500 text-black rounded-lg hover:bg-yellow-600 transition-colors disabled:opacity-50",children:r.jsx(vh,{className:"h-4 w-4"})})]})]})})]},F.id)}),o.length===0&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx(kr,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No activity yet"}),r.jsx("p",{className:"text-gray-500 mb-6",children:"Be the first to share an update with your team!"})]})]})]}),a==="fets-roster"&&r.jsx("div",{children:r.jsx(tf,{})}),a==="fets-calendar"&&r.jsx("div",{children:r.jsx(rf,{})})]})]})}function Q0(){const{profile:c}=It(),[n,a]=P.useState([]),[l,o]=P.useState(!1),[u,f]=P.useState(null),[p,g]=P.useState(!1),[x,y]=P.useState({id:"",fullName:"",email:"",phone:"",role:"",department:"",hireDate:"",skills:"",certifications:"",notes:"",status:"active"}),[j,C]=P.useState(!1),[D,U]=P.useState(""),[V,q]=P.useState("all"),[I,ie]=P.useState("all"),[M,X]=P.useState({fullName:"",email:"",phone:"",role:"",department:"",hireDate:"",skills:"",certifications:"",notes:""}),B=(c==null?void 0:c.role)==="super_admin",se=(c==null?void 0:c.role)==="admin"||B,pe=B,F=se,ne=B,oe=B;P.useEffect(()=>{ae()},[]);const Ne=v=>{y({id:v.id,fullName:v.fullName,email:v.email,phone:v.phone||"",role:v.role,department:v.department,hireDate:v.hireDate.toISOString().split("T")[0],skills:v.skills.join(", "),certifications:v.certifications.join(", "),notes:v.notes||"",status:v.status}),g(!0)},Se=async()=>{try{if(console.log("Updating staff member..."),!x.fullName.trim()||!x.email.trim()||!x.role.trim()||!x.department.trim()){console.error("Missing required fields");return}const v=x.skills?x.skills.split(",").map(S=>S.trim()).filter(S=>S):[],K=x.certifications?x.certifications.split(",").map(S=>S.trim()).filter(S=>S):[],{error:Z}=await re.from("staff_profiles").update({full_name:x.fullName,email:x.email,phone:x.phone||null,role:x.role,department:x.department,hire_date:x.hireDate||null,skills:v,certifications:K,notes:x.notes||null,status:x.status,updated_at:new Date().toISOString()}).eq("id",x.id);if(Z){console.error("Error updating staff member:",Z),alert(`Failed to update staff member: ${Z.message}`);return}await ae(),g(!1),alert("Staff member updated successfully!"),console.log("Staff member updated successfully!")}catch(v){console.error("Error updating staff member:",v);const K=v instanceof Error?v.message:"Unknown error";alert(`Error updating staff member: ${K}`)}},te=async v=>{if(confirm(`Are you sure you want to delete ${v.fullName}? This action cannot be undone.`))try{console.log("Deleting staff member...");const{error:K}=await re.from("staff_profiles").delete().eq("id",v.id);if(K){console.error("Error deleting staff member:",K),alert(`Failed to delete staff member: ${K.message}`);return}await ae(),alert("Staff member deleted successfully!"),console.log("Staff member deleted successfully!")}catch(K){console.error("Error deleting staff member:",K);const Z=K instanceof Error?K.message:"Unknown error";alert(`Error deleting staff member: ${Z}`)}},ae=async()=>{try{console.log("Loading staff from Supabase...");const{data:v,error:K}=await re.from("staff_profiles").select("*").order("created_at",{ascending:!1});if(K){console.error("Error loading staff:",K);return}const{data:{users:Z},error:S}=await re.auth.admin.listUsers();if(S?console.error("Could not load auth users (normal in client-side):",S.message):console.log("Loaded auth users:",(Z==null?void 0:Z.length)||0),v){const H=v.map(ce=>({id:ce.id,fullName:ce.full_name,email:ce.email,phone:ce.phone,role:ce.role,department:ce.department,status:ce.status,hireDate:new Date(ce.hire_date||ce.created_at),skills:ce.skills||[],certifications:ce.certifications||[],notes:ce.notes||""}));a(H),console.log(`Loaded ${H.length} staff members`)}}catch(v){console.error("Error loading staff data:",v)}},le=async()=>{try{if(console.log("Creating new staff member..."),!M.fullName.trim()||!M.email.trim()||!M.role.trim()||!M.department.trim()){console.error("Missing required fields");return}const v=M.skills?M.skills.split(",").map(H=>H.trim()).filter(H=>H):[],K=M.certifications?M.certifications.split(",").map(H=>H.trim()).filter(H=>H):[],{data:Z,error:S}=await re.from("staff_profiles").insert({full_name:M.fullName,email:M.email,phone:M.phone||null,role:M.role,department:M.department,hire_date:M.hireDate||null,skills:v,certifications:K,notes:M.notes||null,status:"active"}).select().single();if(S){console.error("Error saving to database:",S),alert(`Failed to create staff member: ${S.message}`);return}Z&&(console.log("Staff member created successfully!"),await ae(),X({fullName:"",email:"",phone:"",role:"",department:"",hireDate:"",skills:"",certifications:"",notes:""}),o(!1),alert("Staff member created successfully!"))}catch(v){console.error("Error creating staff member:",v);const K=v instanceof Error?v.message:"Unknown error";alert(`Error creating staff member: ${K}`)}},ye=v=>{switch(v){case"active":return"text-green-700 bg-green-100";case"inactive":return"text-gray-700 bg-gray-100";case"on_leave":return"text-yellow-700 bg-yellow-100";default:return"text-gray-700 bg-gray-100"}},je=v=>{switch(v.toLowerCase()){case"operations":return"text-blue-700 bg-blue-100";case"information technology":return"text-purple-700 bg-purple-100";case"security":return"text-red-700 bg-red-100";case"administration":return"text-green-700 bg-green-100";default:return"text-gray-700 bg-gray-100"}},W=n.filter(v=>{const K=v.fullName.toLowerCase().includes(D.toLowerCase())||v.email.toLowerCase().includes(D.toLowerCase())||v.role.toLowerCase().includes(D.toLowerCase()),Z=V==="all"||v.department===V,S=I==="all"||v.status===I;return K&&Z&&S}),$=["all",...new Set(n.map(v=>v.department))],O=n.filter(v=>v.status==="active").length,N=n.filter(v=>v.status==="on_leave").length;return r.jsx("div",{className:"min-h-screen",style:{backgroundColor:"#fafaf9"},children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"mb-8",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(Uo,{className:"h-8 w-8 text-orange-500 mr-3"}),r.jsx("div",{children:r.jsxs("h1",{className:"text-3xl font-bold text-gray-800 flex items-center",children:["User Management",c&&r.jsx("span",{className:`ml-4 px-3 py-1 text-xs font-semibold rounded-full ${B?"bg-red-100 text-red-800 ring-2 ring-red-200":se?"bg-blue-100 text-blue-800 ring-2 ring-blue-200":"bg-gray-100 text-gray-800 ring-2 ring-gray-200"}`,children:c.role==="super_admin"?"SUPER ADMIN":c.role==="admin"?"ADMIN":"USER"})]})})]}),r.jsxs("button",{onClick:()=>F?o(!0):null,disabled:!F,className:`flex items-center px-6 py-3 font-medium rounded-xl shadow-md transition-all duration-200 ${F?"bg-gradient-to-r from-yellow-400 to-orange-500 text-white hover:shadow-lg transform hover:scale-105":"bg-gray-100 text-gray-500 cursor-not-allowed"}`,title:F?"Add new staff member":"Admin access required",children:[r.jsx(vt,{className:"h-4 w-4 mr-2"}),F?"Add Staff Member":"Admin Required"]})]}),r.jsxs("p",{className:"text-gray-600",children:["Manage staff profiles, schedules, and organizational structure",!pe&&r.jsx("span",{className:"text-amber-600 ml-2 text-sm",children:" Limited access - Contact Super Admin for full management"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[r.jsx("div",{className:"bg-white rounded-xl shadow-md p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-500 text-sm font-medium",children:"Total Staff"}),r.jsx("p",{className:"text-3xl font-bold text-gray-800 mt-1",children:n.length})]}),r.jsx(rr,{className:"h-10 w-10 text-blue-500"})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-md p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-500 text-sm font-medium",children:"Active Staff"}),r.jsx("p",{className:"text-3xl font-bold text-gray-800 mt-1",children:O})]}),r.jsx(Uo,{className:"h-10 w-10 text-green-500"})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-md p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-500 text-sm font-medium",children:"On Leave"}),r.jsx("p",{className:"text-3xl font-bold text-gray-800 mt-1",children:N})]}),r.jsx(Ht,{className:"h-10 w-10 text-yellow-500"})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-md p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-500 text-sm font-medium",children:"Departments"}),r.jsx("p",{className:"text-3xl font-bold text-gray-800 mt-1",children:$.length-1})]}),r.jsx(rr,{className:"h-10 w-10 text-purple-500"})]})})]}),r.jsx("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx(ra,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),r.jsx("input",{type:"text",placeholder:"Search staff...",className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none",value:D,onChange:v=>U(v.target.value)})]}),r.jsx("select",{className:"px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none",value:V,onChange:v=>q(v.target.value),children:$.map(v=>r.jsx("option",{value:v,children:v==="all"?"All Departments":v},v))}),r.jsxs("select",{className:"px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none",value:I,onChange:v=>ie(v.target.value),children:[r.jsx("option",{value:"all",children:"All Status"}),r.jsx("option",{value:"active",children:"Active"}),r.jsx("option",{value:"inactive",children:"Inactive"}),r.jsx("option",{value:"on_leave",children:"On Leave"})]}),r.jsxs("div",{className:"text-sm text-gray-600 flex items-center",children:[r.jsx(Yh,{className:"h-4 w-4 mr-2"}),W.length," of ",n.length," staff members"]})]})}),W.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsxs("div",{className:"relative",children:[r.jsx(rr,{className:"mx-auto h-16 w-16 text-gray-400 mb-4"}),r.jsx("div",{className:"absolute -top-2 -right-2 w-6 h-6 bg-orange-100 rounded-full flex items-center justify-center",children:r.jsx(vt,{className:"w-4 h-4 text-orange-600"})})]}),r.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"No Staff Members Found"}),r.jsx("p",{className:"text-gray-500 mb-6",children:F?"Add your first staff member to get started":"No staff members are available. Contact an Admin to add team members."}),F&&r.jsxs("button",{onClick:()=>o(!0),className:"fets-orange-card px-6 py-3 rounded-lg font-medium transition-all duration-200 hover:scale-105 shadow-lg",children:[r.jsx(vt,{className:"inline mr-2 h-5 w-5"}),"Add Your First Staff Member"]}),!F&&r.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4 max-w-md mx-auto",children:r.jsxs("p",{className:"text-amber-800 text-sm flex items-center",children:[r.jsx(ur,{className:"h-4 w-4 mr-2"}),"Admin access required to add staff members"]})})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:W.map(v=>r.jsxs("div",{className:"group relative overflow-hidden transition-all duration-300 hover:scale-[1.02] hover:shadow-xl bg-white rounded-xl shadow-md p-6 border-l-4 border-orange-400",children:[r.jsx("div",{className:"absolute top-4 right-4",children:r.jsx("div",{className:`w-3 h-3 rounded-full ${v.status==="active"?"bg-green-500 animate-pulse":v.status==="on_leave"?"bg-yellow-500 animate-pulse":"bg-gray-400"}`})}),r.jsxs("div",{className:"flex flex-col items-center text-center mb-6",children:[r.jsx("div",{className:"w-20 h-20 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full flex items-center justify-center text-white font-bold text-2xl mb-4 shadow-lg",children:v.fullName.split(" ").map(K=>K[0]).join("").toUpperCase()}),r.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-1",children:v.fullName}),r.jsx("p",{className:"text-gray-600 font-medium mb-3",children:v.role}),r.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[r.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${ye(v.status)}`,children:v.status.replace("_"," ").toUpperCase()}),r.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${je(v.department)}`,children:v.department.toUpperCase()})]})]}),r.jsxs("div",{className:"space-y-3 mb-6",children:[r.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[r.jsx(Ei,{className:"h-4 w-4 mr-3 text-gray-500"}),r.jsx("span",{className:"truncate",children:v.email})]}),v.phone&&r.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[r.jsx(Ti,{className:"h-4 w-4 mr-3 text-gray-500"}),r.jsx("span",{children:v.phone})]}),r.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[r.jsx(Ht,{className:"h-4 w-4 mr-3 text-gray-500"}),r.jsxs("span",{children:["Joined ",v.hireDate.toLocaleDateString()]})]}),r.jsx("div",{className:"text-sm text-gray-600",children:r.jsxs("span",{className:"font-medium",children:[Math.floor((new Date().getTime()-v.hireDate.getTime())/(365*24*60*60*1e3))," years experience"]})})]}),(v.skills.length>0||v.certifications.length>0)&&r.jsxs("div",{className:"mb-6",children:[v.skills.length>0&&r.jsxs("div",{className:"mb-3",children:[r.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Top Skills:"}),r.jsxs("div",{className:"flex flex-wrap gap-1",children:[v.skills.slice(0,3).map((K,Z)=>r.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 text-xs rounded-lg",children:K},Z)),v.skills.length>3&&r.jsxs("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded-lg",children:["+",v.skills.length-3]})]})]}),v.certifications.length>0&&r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Certifications:"}),r.jsxs("div",{className:"flex flex-wrap gap-1",children:[v.certifications.slice(0,2).map((K,Z)=>r.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 text-xs rounded-lg",children:K},Z)),v.certifications.length>2&&r.jsxs("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded-lg",children:["+",v.certifications.length-2]})]})]})]}),r.jsxs("div",{className:"flex flex-col space-y-2",children:[r.jsxs("button",{onClick:()=>{f(v),C(!0)},className:"w-full flex items-center justify-center space-x-2 px-4 py-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:[r.jsx(ps,{className:"h-4 w-4"}),r.jsx("span",{children:"View Details"})]}),r.jsxs("div",{className:"flex space-x-2",children:[ne?r.jsxs("button",{onClick:()=>Ne(v),className:"flex-1 flex items-center justify-center space-x-1 px-3 py-2 text-yellow-600 hover:bg-yellow-50 rounded-lg transition-colors",children:[r.jsx(gs,{className:"h-4 w-4"}),r.jsx("span",{children:"Edit"})]}):r.jsxs("div",{className:"flex-1 flex items-center justify-center px-3 py-2 text-gray-400 bg-gray-50 rounded-lg cursor-not-allowed",title:"Super Admin required",children:[r.jsx(gs,{className:"h-4 w-4 mr-1"}),r.jsx("span",{className:"text-xs",children:"Edit"})]}),oe?r.jsxs("button",{onClick:()=>te(v),className:"flex-1 flex items-center justify-center space-x-1 px-3 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:[r.jsx(hr,{className:"h-4 w-4"}),r.jsx("span",{children:"Remove"})]}):r.jsxs("div",{className:"flex-1 flex items-center justify-center px-3 py-2 text-gray-400 bg-gray-50 rounded-lg cursor-not-allowed",title:"Super Admin required",children:[r.jsx(hr,{className:"h-4 w-4 mr-1"}),r.jsx("span",{className:"text-xs",children:"Remove"})]})]}),!ne&&!oe&&r.jsx("div",{className:"text-center py-1",children:r.jsx("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded",children:"Super Admin Required"})})]})]},v.id))}),l&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Add New Staff Member"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Full Name *"}),r.jsx("input",{type:"text",className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none",placeholder:"Enter full name",value:M.fullName,onChange:v=>X({...M,fullName:v.target.value})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Email *"}),r.jsx("input",{type:"email",className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none",placeholder:"staff@fetspoint.com",value:M.email,onChange:v=>X({...M,email:v.target.value})})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Phone"}),r.jsx("input",{type:"tel",className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none",placeholder:"+1-555-0123",value:M.phone,onChange:v=>X({...M,phone:v.target.value})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Hire Date"}),r.jsx("input",{type:"date",className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none",value:M.hireDate,onChange:v=>X({...M,hireDate:v.target.value})})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Role *"}),r.jsx("input",{type:"text",className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none",placeholder:"Test Administrator, IT Specialist, etc.",value:M.role,onChange:v=>X({...M,role:v.target.value})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Department *"}),r.jsx("input",{type:"text",className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none",placeholder:"Operations, IT, Security, etc.",value:M.department,onChange:v=>X({...M,department:v.target.value})})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Skills (comma-separated)"}),r.jsx("input",{type:"text",className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none",placeholder:"Network Administration, Database Management, etc.",value:M.skills,onChange:v=>X({...M,skills:v.target.value})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Certifications (comma-separated)"}),r.jsx("input",{type:"text",className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none",placeholder:"CompTIA A+, PMP, Security+, etc.",value:M.certifications,onChange:v=>X({...M,certifications:v.target.value})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Notes"}),r.jsx("textarea",{className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none h-24 resize-none",placeholder:"Additional notes about this staff member",value:M.notes,onChange:v=>X({...M,notes:v.target.value})})]})]}),r.jsxs("div",{className:"flex items-center justify-end space-x-4 mt-6",children:[r.jsx("button",{onClick:()=>o(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Cancel"}),r.jsx("button",{onClick:le,className:"px-6 py-2 bg-gradient-to-r from-yellow-400 to-orange-500 text-white font-medium rounded-lg shadow-md hover:shadow-lg transition-all duration-200",disabled:!M.fullName.trim()||!M.email.trim()||!M.role.trim()||!M.department.trim(),children:"Create Staff Member"})]})]})}),j&&u&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Staff Details"}),r.jsx("button",{onClick:()=>C(!1),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:r.jsx(mt,{className:"h-5 w-5"})})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full flex items-center justify-center text-white font-bold text-xl",children:u.fullName.split(" ").map(v=>v[0]).join("").toUpperCase()}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-2xl font-semibold text-gray-800",children:u.fullName}),r.jsx("p",{className:"text-gray-600 text-lg",children:u.role}),r.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[r.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${ye(u.status)}`,children:u.status.replace("_"," ").toUpperCase()}),r.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${je(u.department)}`,children:u.department})]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Contact Information"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Ei,{className:"h-4 w-4 text-gray-500"}),r.jsx("span",{className:"text-gray-800",children:u.email})]}),u.phone&&r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx(Ti,{className:"h-4 w-4 text-gray-500"}),r.jsx("span",{className:"text-gray-800",children:u.phone})]})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Employment Details"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-600 text-sm",children:"Hire Date"}),r.jsx("p",{className:"text-gray-800",children:u.hireDate.toLocaleDateString()})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-600 text-sm",children:"Experience"}),r.jsxs("p",{className:"text-gray-800",children:[Math.floor((new Date().getTime()-u.hireDate.getTime())/(365*24*60*60*1e3))," years"]})]})]})]})]}),(u.skills.length>0||u.certifications.length>0)&&r.jsxs("div",{children:[r.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Skills & Certifications"}),r.jsxs("div",{className:"space-y-4",children:[u.skills.length>0&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Skills:"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:u.skills.map((v,K)=>r.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 text-sm rounded-lg",children:v},K))})]}),u.certifications.length>0&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Certifications:"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:u.certifications.map((v,K)=>r.jsx("span",{className:"px-3 py-1 bg-green-100 text-green-700 text-sm rounded-lg",children:v},K))})]})]})]}),u.notes&&r.jsxs("div",{children:[r.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Notes"}),r.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:r.jsx("p",{className:"text-gray-700",children:u.notes})})]})]}),r.jsxs("div",{className:"flex items-center justify-end space-x-4 mt-6",children:[r.jsx("button",{onClick:()=>C(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Close"}),ne&&r.jsx("button",{onClick:()=>{C(!1),Ne(u)},className:"px-6 py-2 bg-gradient-to-r from-yellow-400 to-orange-500 text-white font-medium rounded-lg shadow-md hover:shadow-lg transition-all duration-200",children:"Edit Staff Member"}),!ne&&r.jsx("div",{className:"px-6 py-2 bg-gray-100 text-gray-500 font-medium rounded-lg cursor-not-allowed",title:"Super Admin access required",children:"Edit Restricted"})]})]})}),p&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Edit Staff Member"}),r.jsx("button",{onClick:()=>g(!1),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:r.jsx(mt,{className:"h-5 w-5"})})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Full Name *"}),r.jsx("input",{type:"text",className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none",placeholder:"Enter full name",value:x.fullName,onChange:v=>y({...x,fullName:v.target.value})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Email *"}),r.jsx("input",{type:"email",className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none",placeholder:"staff@fetspoint.com",value:x.email,onChange:v=>y({...x,email:v.target.value})})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Phone"}),r.jsx("input",{type:"tel",className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none",placeholder:"+1-555-0123",value:x.phone,onChange:v=>y({...x,phone:v.target.value})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Hire Date"}),r.jsx("input",{type:"date",className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none",value:x.hireDate,onChange:v=>y({...x,hireDate:v.target.value})})]})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Role *"}),r.jsx("input",{type:"text",className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none",placeholder:"Test Administrator, IT Specialist, etc.",value:x.role,onChange:v=>y({...x,role:v.target.value})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Department *"}),r.jsx("input",{type:"text",className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none",placeholder:"Operations, IT, Security, etc.",value:x.department,onChange:v=>y({...x,department:v.target.value})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Status"}),r.jsxs("select",{className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none",value:x.status,onChange:v=>y({...x,status:v.target.value}),children:[r.jsx("option",{value:"active",children:"Active"}),r.jsx("option",{value:"inactive",children:"Inactive"}),r.jsx("option",{value:"on_leave",children:"On Leave"})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Skills (comma-separated)"}),r.jsx("input",{type:"text",className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none",placeholder:"Network Administration, Database Management, etc.",value:x.skills,onChange:v=>y({...x,skills:v.target.value})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Certifications (comma-separated)"}),r.jsx("input",{type:"text",className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none",placeholder:"CompTIA A+, PMP, Security+, etc.",value:x.certifications,onChange:v=>y({...x,certifications:v.target.value})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Notes"}),r.jsx("textarea",{className:"w-full px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent outline-none h-24 resize-none",placeholder:"Additional notes about this staff member",value:x.notes,onChange:v=>y({...x,notes:v.target.value})})]})]}),r.jsxs("div",{className:"flex items-center justify-end space-x-4 mt-6",children:[r.jsx("button",{onClick:()=>g(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Cancel"}),r.jsx("button",{onClick:Se,className:"px-6 py-2 bg-gradient-to-r from-yellow-400 to-orange-500 text-white font-medium rounded-lg shadow-md hover:shadow-lg transition-all duration-200",disabled:!x.fullName.trim()||!x.email.trim()||!x.role.trim()||!x.department.trim(),children:"Update Staff Member"})]})]})})]})})}function _i({title:c,value:n,subtitle:a,icon:l,status:o="primary",onClick:u,clickable:f=!1}){const p={positive:"status-positive",warning:"status-warning",neutral:"status-neutral",primary:"status-warning"}[o];return r.jsxs("div",{className:`stats-card ${f?"cursor-pointer":""}`,onClick:f?u:void 0,children:[r.jsx("div",{className:"stats-card-title",children:c}),r.jsx("div",{className:"stats-card-number",children:n}),r.jsx("div",{className:"stats-card-subtitle",children:a}),r.jsx("div",{className:`stats-icon ${p}`,children:r.jsx(l,{})})]})}function G0({isOpen:c,onClose:n,onSuccess:a,itemTitle:l}){const[o,u]=P.useState(""),[f,p]=P.useState(!1),[g,x]=P.useState(""),{user:y}=It(),j=async()=>{if(!(!o.trim()||!y)){p(!0),x("");try{const{error:D}=await re.auth.signInWithPassword({email:y.email||"",password:o});D?x("Incorrect password. Please try again."):(a(),u(""),n())}catch{x("Password verification failed. Please try again.")}finally{p(!1)}}},C=()=>{u(""),x(""),n()};return c?r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"modern-card p-6 w-full max-w-md",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("h3",{className:"text-xl font-bold text-gray-900 flex items-center",children:[r.jsx(sn,{className:"h-6 w-6 mr-2 text-red-600"}),"Confidential Access"]}),r.jsx("button",{onClick:C,className:"text-gray-400 hover:text-gray-600 transition-colors",children:r.jsx(mt,{className:"h-5 w-5"})})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:r.jsxs("p",{className:"text-sm text-amber-800",children:[r.jsxs("strong",{children:['"',l,'"']})," requires password verification for access."]})}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Enter your current password:"}),r.jsxs("div",{className:"relative",children:[r.jsx(Xh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),r.jsx("input",{type:"password",className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent bg-white text-gray-900",placeholder:"",value:o,onChange:D=>u(D.target.value),onKeyPress:D=>D.key==="Enter"&&j(),disabled:f})]})]}),g&&r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 flex items-center space-x-2",children:[r.jsx(Go,{className:"h-4 w-4 text-red-600"}),r.jsx("span",{className:"text-sm text-red-700",children:g})]})]}),r.jsxs("div",{className:"flex items-center justify-end space-x-4 mt-6",children:[r.jsx("button",{onClick:C,className:"btn-tertiary-modern",disabled:f,children:"Cancel"}),r.jsx("button",{onClick:j,className:"btn-primary-modern flex items-center",disabled:!o.trim()||f,children:f?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Verifying..."]}):r.jsxs(r.Fragment,{children:[r.jsx(sn,{className:"h-4 w-4 mr-2"}),"Verify & Access"]})})]})]})}):null}function Y0(){var Wt;const{user:c}=It(),[n,a]=P.useState([]),[l,o]=P.useState([]),[u,f]=P.useState(!0),[p,g]=P.useState(!1),[x,y]=P.useState(!1),[j,C]=P.useState(!1),[D,U]=P.useState(null),[V,q]=P.useState(null),[I,ie]=P.useState(null),[M,X]=P.useState(""),[B,se]=P.useState("all"),[pe,F]=P.useState("all"),[ne,oe]=P.useState(null),[Ne,Se]=P.useState(!1),[te,ae]=P.useState({title:"",description:"",content:"",category_id:"",type:"document",is_confidential:!1,tags:""}),[le,ye]=P.useState({name:"",description:"",color:"#6B7280",icon:"folder",display_order:0}),[je,W]=P.useState(!1),[$,O]=P.useState(""),[N,v]=P.useState(""),K=["document","procedure","manual","template","policy","training","emergency","knowledge"];P.useEffect(()=>{Z()},[]);const Z=async()=>{try{f(!0),console.log("Loading vault data...");const{data:z,error:me}=await re.from("vault_categories").select("*").order("display_order",{ascending:!0});me?console.error("Error loading categories:",me):o(z||[]);const{data:Te,error:he}=await re.from("vault").select(`
          *,
          profiles:author_id (
            full_name
          )
        `).eq("is_deleted",!1).order("created_at",{ascending:!1});if(he)console.error("Error loading vault items:",he),S();else{const qe=(Te||[]).map(Je=>({...Je,author:Je.profiles}));a(qe),console.log(`Loaded ${qe.length} vault items`)}}catch(z){console.error("Error loading vault data:",z),S()}finally{f(!1)}},S=()=>{const z=[{id:"1",title:"Emergency Evacuation Procedures",description:"Complete guide for emergency evacuation protocols",content:`In case of emergency evacuation:

1. Remain calm and follow designated evacuation routes
2. Assist candidates and staff to safety
3. Report to designated assembly point
4. Wait for further instructions from emergency coordinators

Detailed procedures follow...`,category:"Emergency",category_id:"",type:"emergency",file_size:"2.3 MB",is_confidential:!0,tags:["emergency","safety","evacuation"],author_id:(c==null?void 0:c.id)||"system",created_at:"2025-01-15T08:00:00Z",updated_at:"2025-08-15T10:00:00Z",is_deleted:!1,author:{full_name:"Safety Officer"}},{id:"2",title:"System Backup Procedures",description:"Step-by-step backup and recovery procedures",content:`Daily backup procedures:

1. Automated backups run at 2:00 AM daily
2. Verify backup completion in system logs
3. Test restore procedures monthly
4. Document any issues or failures

Recovery procedures:
1. Assess data loss extent
2. Identify most recent clean backup
3. Follow restore checklist
4. Verify data integrity post-restore`,category:"IT Operations",category_id:"",type:"procedure",file_size:"1.8 MB",is_confidential:!1,tags:["backup","IT","procedure"],author_id:(c==null?void 0:c.id)||"system",created_at:"2025-02-01T09:00:00Z",updated_at:"2025-08-10T14:00:00Z",is_deleted:!1,author:{full_name:"IT Administrator"}},{id:"3",title:"Test Administrator Training Manual",description:"Comprehensive training guide for new test administrators",content:`Welcome to FETS Point Training:

Module 1: System Overview
- Understanding the testing environment
- Navigation and basic functions

Module 2: Candidate Management
- Check-in procedures
- Accommodation handling
- Incident reporting

Module 3: Security Protocols
- Maintaining test integrity
- Handling security breaches
- Documentation requirements`,category:"Training",category_id:"",type:"training",file_size:"5.2 MB",is_confidential:!1,tags:["training","manual","administrator"],author_id:(c==null?void 0:c.id)||"system",created_at:"2025-03-10T11:00:00Z",updated_at:"2025-07-20T16:00:00Z",is_deleted:!1,author:{full_name:"Training Department"}}];a(z)},H=async z=>{if(z.preventDefault(),!!c){W(!0),O(""),v("");try{const me={title:te.title,description:te.description||null,content:te.content||null,category_id:te.category_id,type:te.type,is_confidential:te.is_confidential,tags:te.tags?te.tags.split(",").map(Te=>Te.trim()).filter(Boolean):null,author_id:c.id};if(D){const{data:Te,error:he}=await re.from("vault").update(me).eq("id",D.id).select(`
            *,
            profiles:author_id (
              full_name
            )
          `).single();if(he)throw he;a(n.map(qe=>qe.id===D.id?{...Te,author:Te.profiles}:qe)),v("Item updated successfully!")}else{const{data:Te,error:he}=await re.from("vault").insert(me).select(`
            *,
            profiles:author_id (
              full_name
            )
          `).single();if(he)throw he;a([{...Te,author:Te.profiles},...n]),v("Item created successfully!")}ae({title:"",description:"",content:"",category_id:"",type:"document",is_confidential:!1,tags:""}),U(null),g(!1)}catch(me){console.error("Error saving vault item:",me),O(me.message||"An error occurred while saving the item")}finally{W(!1)}}},ce=async z=>{if(z.preventDefault(),!!c){W(!0),O(""),v("");try{const me={...le,created_by:c.id};if(V){const{data:Te,error:he}=await re.from("vault_categories").update(me).eq("id",V.id).select().single();if(he)throw he;o(l.map(qe=>qe.id===V.id?Te:qe)),v("Category updated successfully!")}else{const{data:Te,error:he}=await re.from("vault_categories").insert(me).select().single();if(he)throw he;o([...l,Te].sort((qe,Je)=>qe.display_order-Je.display_order)),v("Category created successfully!")}ye({name:"",description:"",color:"#6B7280",icon:"folder",display_order:0}),q(null),y(!1)}catch(me){console.error("Error saving category:",me),O(me.message||"An error occurred while saving the category")}finally{W(!1)}}},Ce=async z=>{if(window.confirm("Are you sure you want to delete this item?"))try{const{error:me}=await re.from("vault").update({is_deleted:!0}).eq("id",z);if(me)throw me;a(n.filter(Te=>Te.id!==z)),v("Item deleted successfully!")}catch(me){console.error("Error deleting vault item:",me),O(me.message||"An error occurred while deleting the item")}},Ae=async(z,me)=>{const Te=n.filter(he=>he.category_id===z);if(Te.length>0){O(`Cannot delete category "${me}" because it contains ${Te.length} items. Please move or delete the items first.`);return}if(window.confirm(`Are you sure you want to delete the category "${me}"?`))try{const{error:he}=await re.from("vault_categories").delete().eq("id",z);if(he)throw he;o(l.filter(qe=>qe.id!==z)),v("Category deleted successfully!")}catch(he){console.error("Error deleting category:",he),O(he.message||"An error occurred while deleting the category")}},$e=z=>{var me;U(z),ae({title:z.title,description:z.description||"",content:z.content||"",category_id:z.category_id||"",type:z.type,is_confidential:z.is_confidential,tags:((me=z.tags)==null?void 0:me.join(", "))||""}),g(!0)},L=z=>{q(z),ye({name:z.name,description:z.description,color:z.color,icon:z.icon,display_order:z.display_order}),y(!0)},Ie=z=>{z.is_confidential?(ie(z),C(!0)):(oe(z),Se(!0))},Pe=()=>{I&&(oe(I),Se(!0),ie(null))},Le=z=>{switch(z){case"procedure":return"text-blue-600 bg-blue-50 border border-blue-200";case"manual":return"text-green-600 bg-green-50 border border-green-200";case"template":return"text-purple-600 bg-purple-50 border border-purple-200";case"policy":return"text-red-600 bg-red-50 border border-red-200";case"training":return"text-yellow-600 bg-yellow-50 border border-yellow-200";case"emergency":return"text-red-600 bg-red-50 border border-red-200";case"knowledge":return"text-indigo-600 bg-indigo-50 border border-indigo-200";default:return"text-gray-600 bg-gray-50 border border-gray-200"}},it=n.filter(z=>{var qe,Je;const me=z.title.toLowerCase().includes(M.toLowerCase())||((qe=z.description)==null?void 0:qe.toLowerCase().includes(M.toLowerCase()))||((Je=z.content)==null?void 0:Je.toLowerCase().includes(M.toLowerCase())),Te=B==="all"||z.category_id===B,he=pe==="all"||z.type===pe;return me&&Te&&he}),wt=l.reduce((z,me)=>(z[me.id]=it.filter(Te=>Te.category_id===me.id),z),{}),bt=it.filter(z=>!z.category_id);bt.length>0&&(wt.uncategorized=bt);const lt=z=>new Date(z).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return u?r.jsx("div",{className:"dashboard-modern flex-1 p-4 sm:p-6 overflow-auto",children:r.jsx("div",{className:"flex items-center justify-center min-h-96",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-yellow-500 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"Loading Resource Center..."})]})})}):r.jsxs("div",{className:"dashboard-modern flex-1 p-4 sm:p-6 overflow-auto",children:[r.jsx("div",{className:"dashboard-section",children:r.jsx("div",{className:"modern-card p-6 mb-8",style:{background:"var(--primary-gradient)",color:"white",border:"none"},children:r.jsxs("div",{className:"flex items-center justify-between flex-col sm:flex-row space-y-4 sm:space-y-0",children:[r.jsxs("div",{className:"text-center sm:text-left",children:[r.jsxs("h1",{className:"text-2xl sm:text-3xl font-bold mb-2 flex items-center justify-center sm:justify-start",children:[r.jsx(Fo,{className:"h-8 w-8 mr-3"}),"Resource Center"]}),r.jsx("p",{className:"text-white/90 text-lg",children:"Secure document repository and knowledge base for organizational resources"}),r.jsxs("div",{className:"flex items-center justify-center sm:justify-start mt-3 text-sm",children:[r.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full mr-2 animate-pulse"}),r.jsxs("span",{className:"text-white/80",children:[n.length," resources available"]})]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[r.jsxs("button",{onClick:()=>{U(null),ae({title:"",description:"",content:"",category_id:"",type:"document",is_confidential:!1,tags:""}),g(!0)},className:"btn-tertiary-modern bg-white text-gray-900 hover:bg-white/90 flex items-center justify-center",children:[r.jsx(vt,{className:"h-4 w-4 mr-2"}),"Add Resource"]}),r.jsxs("button",{onClick:()=>{q(null),ye({name:"",description:"",color:"#6B7280",icon:"folder",display_order:l.length}),y(!0)},className:"btn-tertiary-modern bg-white/20 text-white border-white/30 hover:bg-white/30 flex items-center justify-center",children:[r.jsx(yh,{className:"h-4 w-4 mr-2"}),"Manage Categories"]})]})]})})}),r.jsxs("div",{className:"dashboard-section",children:[r.jsx("h2",{className:"section-title",children:"Resource Overview"}),r.jsxs("div",{className:"grid-responsive grid-4",children:[r.jsx(_i,{title:"Total Resources",value:n.length,subtitle:n.length>0?`${n.length} resources available`:"No resources yet",icon:Ci,status:"primary"}),r.jsx(_i,{title:"Categories",value:l.length,subtitle:`${l.length} different categories`,icon:O0,status:"warning"}),r.jsx(_i,{title:"Confidential",value:n.filter(z=>z.is_confidential).length,subtitle:`${n.filter(z=>z.is_confidential).length} restricted access`,icon:yi,status:"neutral"}),r.jsx(_i,{title:"Recent Updates",value:n.filter(z=>{const me=new Date;return me.setDate(me.getDate()-7),new Date(z.updated_at)>me}).length,subtitle:"Updated this week",icon:Ht,status:"positive"})]})]}),r.jsxs("div",{className:"dashboard-section",children:[r.jsx("h2",{className:"section-title",children:"Search & Filter"}),r.jsx("div",{className:"modern-card p-6",children:r.jsxs("div",{className:"grid-responsive grid-4 gap-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx(ra,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),r.jsx("input",{type:"text",placeholder:"Search resources...",className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent bg-white text-gray-900 placeholder-gray-500",value:M,onChange:z=>X(z.target.value)})]}),r.jsxs("select",{className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent bg-white text-gray-900",value:B,onChange:z=>se(z.target.value),children:[r.jsx("option",{value:"all",children:"All Categories"}),l.map(z=>r.jsx("option",{value:z.id,children:z.name},z.id))]}),r.jsxs("select",{className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent bg-white text-gray-900",value:pe,onChange:z=>F(z.target.value),children:[r.jsx("option",{value:"all",children:"All Types"}),K.map(z=>r.jsx("option",{value:z,children:z.charAt(0).toUpperCase()+z.slice(1)},z))]}),r.jsxs("div",{className:"flex items-center justify-center bg-gray-50 rounded-lg px-4 py-3",children:[r.jsx(Ci,{className:"h-4 w-4 mr-2 text-gray-500"}),r.jsxs("span",{className:"text-sm text-gray-600",children:[it.length," of ",n.length," resources"]})]})]})})]}),N&&r.jsxs("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-lg flex items-center space-x-2",children:[r.jsx(St,{className:"h-5 w-5 text-green-600"}),r.jsx("span",{className:"text-green-700",children:N}),r.jsx("button",{onClick:()=>v(""),className:"ml-auto text-green-600 hover:text-green-800",children:r.jsx(mt,{className:"h-4 w-4"})})]}),$&&r.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg flex items-center space-x-2",children:[r.jsx(Go,{className:"h-5 w-5 text-red-600"}),r.jsx("span",{className:"text-red-700",children:$}),r.jsx("button",{onClick:()=>O(""),className:"ml-auto text-red-600 hover:text-red-800",children:r.jsx(mt,{className:"h-4 w-4"})})]}),r.jsx("div",{className:"dashboard-section",children:r.jsxs("div",{className:"space-y-8",children:[Object.entries(wt).map(([z,me])=>{if(me.length===0)return null;const Te=z==="uncategorized"?{name:"Uncategorized",color:"#6B7280"}:l.find(he=>he.id===z);return Te?r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:Te.color}}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:Te.name}),r.jsxs("span",{className:"text-sm text-gray-500",children:["(",me.length," resources)"]})]}),z!=="uncategorized"&&r.jsx("button",{onClick:()=>L(Te),className:"text-gray-400 hover:text-gray-600 transition-colors p-2",title:"Edit category",children:r.jsx(sa,{className:"h-4 w-4"})})]}),r.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:me.map(he=>{var qe;return r.jsxs("div",{className:"modern-card p-6",children:[r.jsx("div",{className:"flex items-start justify-between mb-4",children:r.jsxs("div",{className:"flex-1",children:[r.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-2 flex items-center",children:[he.title,he.is_confidential&&r.jsx(yi,{className:"h-4 w-4 text-red-600 ml-2"})]}),r.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:he.description})]})}),r.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[r.jsx("span",{className:`px-3 py-1 text-xs font-medium rounded-full ${Le(he.type)}`,children:he.type.charAt(0).toUpperCase()+he.type.slice(1)}),he.is_confidential&&r.jsx("span",{className:"px-3 py-1 text-xs font-medium rounded-full text-red-600 bg-red-50 border border-red-200",children:"Confidential"})]}),r.jsxs("div",{className:"text-xs text-gray-500 space-y-1 mb-4",children:[r.jsxs("p",{children:["Created: ",lt(he.created_at)]}),r.jsxs("p",{children:["Author: ",((qe=he.author)==null?void 0:qe.full_name)||"Unknown"]}),he.file_size&&r.jsxs("p",{children:["Size: ",he.file_size]})]}),he.tags&&he.tags.length>0&&r.jsxs("div",{className:"flex flex-wrap gap-1 mb-4",children:[he.tags.slice(0,3).map((Je,w)=>r.jsx("span",{className:"px-2 py-1 text-xs bg-gray-100 text-gray-600 rounded",children:Je},w)),he.tags.length>3&&r.jsxs("span",{className:"px-2 py-1 text-xs bg-gray-100 text-gray-600 rounded",children:["+",he.tags.length-3," more"]})]}),r.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100",children:[r.jsx("button",{onClick:()=>Ie(he),className:"flex items-center space-x-1 px-3 py-2 text-blue-600 bg-blue-50 hover:bg-blue-100 rounded-lg text-sm font-medium transition-colors",children:he.is_confidential?r.jsxs(r.Fragment,{children:[r.jsx(sn,{className:"h-4 w-4"}),r.jsx("span",{children:"Secure View"})]}):r.jsxs(r.Fragment,{children:[r.jsx(ps,{className:"h-4 w-4"}),r.jsx("span",{children:"View"})]})}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("button",{onClick:()=>$e(he),className:"flex items-center space-x-1 px-3 py-2 text-gray-600 bg-gray-50 hover:bg-gray-100 rounded-lg text-sm font-medium transition-colors",children:r.jsx(gs,{className:"h-4 w-4"})}),r.jsx("button",{onClick:()=>Ce(he.id),className:"flex items-center space-x-1 px-3 py-2 text-red-600 bg-red-50 hover:bg-red-100 rounded-lg text-sm font-medium transition-colors",children:r.jsx(hr,{className:"h-4 w-4"})})]})]})]},he.id)})})]},z):null}),it.length===0&&r.jsxs("div",{className:"modern-card p-12 text-center",children:[r.jsx(Fo,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No resources found"}),r.jsx("p",{className:"text-gray-500 mb-6",children:n.length===0?"Start building your knowledge base by adding your first resource.":"Try adjusting your search or filter criteria."}),n.length===0&&r.jsxs("div",{className:"flex justify-center space-x-4",children:[r.jsxs("button",{onClick:()=>{U(null),ae({title:"",description:"",content:"",category_id:"",type:"document",is_confidential:!1,tags:""}),g(!0)},className:"btn-primary-modern",children:[r.jsx(vt,{className:"h-4 w-4 mr-2"}),"Add First Resource"]}),r.jsxs("button",{onClick:()=>{q(null),ye({name:"",description:"",color:"#6B7280",icon:"folder",display_order:0}),y(!0)},className:"btn-secondary-modern",children:[r.jsx(yh,{className:"h-4 w-4 mr-2"}),"Create Category"]})]})]})]})}),r.jsx(G0,{isOpen:j,onClose:()=>{C(!1),ie(null)},onSuccess:Pe,itemTitle:(I==null?void 0:I.title)||""}),p&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"modern-card p-6 w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:D?"Edit Resource":"Add New Resource"}),r.jsxs("form",{onSubmit:H,className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title *"}),r.jsx("input",{type:"text",className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent bg-white text-gray-900",value:te.title,onChange:z=>ae({...te,title:z.target.value}),required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category *"}),r.jsxs("select",{className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent bg-white text-gray-900",value:te.category_id,onChange:z=>ae({...te,category_id:z.target.value}),required:!0,children:[r.jsx("option",{value:"",children:"Select Category"}),l.map(z=>r.jsx("option",{value:z.id,children:z.name},z.id))]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type"}),r.jsx("select",{className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent bg-white text-gray-900",value:te.type,onChange:z=>ae({...te,type:z.target.value}),children:K.map(z=>r.jsx("option",{value:z,children:z.charAt(0).toUpperCase()+z.slice(1)},z))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tags"}),r.jsx("input",{type:"text",className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent bg-white text-gray-900",placeholder:"tag1, tag2, tag3",value:te.tags,onChange:z=>ae({...te,tags:z.target.value})})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),r.jsx("input",{type:"text",className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent bg-white text-gray-900",value:te.description,onChange:z=>ae({...te,description:z.target.value})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Content"}),r.jsx("textarea",{className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent bg-white text-gray-900 h-32 resize-none",value:te.content,onChange:z=>ae({...te,content:z.target.value})})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("input",{type:"checkbox",id:"confidential",checked:te.is_confidential,onChange:z=>ae({...te,is_confidential:z.target.checked}),className:"w-4 h-4 text-red-600 bg-gray-100 border-gray-300 rounded focus:ring-red-500"}),r.jsxs("label",{htmlFor:"confidential",className:"text-sm font-medium text-gray-700 flex items-center",children:[r.jsx(yi,{className:"h-4 w-4 mr-1 text-red-600"}),"Confidential (requires password verification)"]})]})]}),r.jsxs("div",{className:"flex items-center justify-end space-x-4 mt-6",children:[r.jsx("button",{onClick:()=>g(!1),className:"btn-tertiary-modern",disabled:je,children:"Cancel"}),r.jsx("button",{onClick:H,className:"btn-primary-modern",disabled:!te.title.trim()||!te.category_id||je,children:je?"Saving...":D?"Update Resource":"Add Resource"})]})]})}),x&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"modern-card p-6 w-full max-w-2xl",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:V?"Edit Category":"Add New Category"}),r.jsxs("form",{onSubmit:ce,className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category Name *"}),r.jsx("input",{type:"text",className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent bg-white text-gray-900",value:le.name,onChange:z=>ye({...le,name:z.target.value}),required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Display Order"}),r.jsx("input",{type:"number",className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent bg-white text-gray-900",value:le.display_order,onChange:z=>ye({...le,display_order:parseInt(z.target.value)||0}),min:0})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),r.jsx("input",{type:"text",className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent bg-white text-gray-900",value:le.description,onChange:z=>ye({...le,description:z.target.value})})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Color"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"color",className:"w-12 h-12 border border-gray-200 rounded-lg",value:le.color,onChange:z=>ye({...le,color:z.target.value})}),r.jsx("input",{type:"text",className:"flex-1 px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent bg-white text-gray-900",value:le.color,onChange:z=>ye({...le,color:z.target.value})})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Icon"}),r.jsx("input",{type:"text",className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent bg-white text-gray-900",placeholder:"folder",value:le.icon,onChange:z=>ye({...le,icon:z.target.value})})]})]})]}),r.jsxs("div",{className:"flex items-center justify-between mt-6",children:[r.jsx("div",{children:V&&r.jsxs("button",{onClick:()=>Ae(V.id,V.name),className:"flex items-center space-x-1 px-3 py-2 text-red-600 bg-red-50 hover:bg-red-100 rounded-lg text-sm font-medium transition-colors",disabled:je,children:[r.jsx(hr,{className:"h-4 w-4"}),r.jsx("span",{children:"Delete Category"})]})}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("button",{onClick:()=>y(!1),className:"btn-tertiary-modern",disabled:je,children:"Cancel"}),r.jsx("button",{onClick:ce,className:"btn-primary-modern",disabled:!le.name.trim()||je,children:je?"Saving...":V?"Update Category":"Add Category"})]})]})]})}),Ne&&ne&&r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"modern-card p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[ne.title,ne.is_confidential&&r.jsx(yi,{className:"h-6 w-6 text-red-600 ml-3"})]}),r.jsx("button",{onClick:()=>Se(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:r.jsx(mt,{className:"h-6 w-6"})})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[r.jsx("span",{className:`px-3 py-1 rounded-full ${Le(ne.type)}`,children:ne.type.charAt(0).toUpperCase()+ne.type.slice(1)}),r.jsxs("span",{children:["Created: ",lt(ne.created_at)]}),r.jsxs("span",{children:["Author: ",((Wt=ne.author)==null?void 0:Wt.full_name)||"Unknown"]})]}),ne.description&&r.jsx("div",{className:"p-4 bg-gray-50 rounded-lg border-l-4 border-yellow-400",children:r.jsx("p",{className:"text-gray-700",children:ne.description})}),ne.content&&r.jsx("div",{className:"prose max-w-none",children:r.jsx("div",{className:"whitespace-pre-wrap text-gray-700 leading-relaxed",children:ne.content})}),ne.tags&&ne.tags.length>0&&r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Tags:"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:ne.tags.map((z,me)=>r.jsx("span",{className:"px-3 py-1 text-sm bg-gray-100 text-gray-600 rounded-full",children:z},me))})]})]}),r.jsxs("div",{className:"flex items-center justify-end space-x-4 mt-6",children:[r.jsx("button",{onClick:()=>Se(!1),className:"btn-tertiary-modern",children:"Close"}),r.jsx("button",{onClick:()=>{Se(!1),$e(ne)},className:"btn-primary-modern",children:"Edit Resource"})]})]})})]})}function J0(){const[c,n]=P.useState(null),[a,l]=P.useState([]),[o,u]=P.useState([]),[f,p]=P.useState("7d"),[g,x]=P.useState("overview"),[y,j]=P.useState(!0);P.useEffect(()=>{C()},[f]);const C=async()=>{try{j(!0),await D(),await U(),await V()}catch(B){console.error("Error loading intelligence data:",B),I()}finally{j(!1)}},D=async()=>{try{const{data:B}=await re.from("sessions").select("*").order("created_at",{ascending:!1}).limit(100);if(B&&B.length>0){const se=B.length,pe=85,F="2h 15m",ne="10:00 - 14:00",oe=B.reduce((ae,le)=>{const ye=le.exam_name||"Unknown";return ae[ye]=(ae[ye]||0)+1,ae},{}),Ne=Object.entries(oe).sort(([,ae],[,le])=>le-ae).slice(0,5).map(([ae,le])=>({name:ae,count:le}));n({totalSessions:se,successRate:pe,avgDuration:F,peakHours:ne,topExams:Ne,monthlyTrend:[{month:"Jan",sessions:45},{month:"Feb",sessions:52},{month:"Mar",sessions:48},{month:"Apr",sessions:61},{month:"May",sessions:55},{month:"Jun",sessions:67},{month:"Jul",sessions:73},{month:"Aug",sessions:68}],issueReports:[{type:"Technical Issues",count:3,trend:"down"},{type:"No Shows",count:8,trend:"stable"},{type:"Late Arrivals",count:12,trend:"up"},{type:"Equipment Problems",count:2,trend:"down"}]})}else q()}catch(B){console.error("Error loading analytics:",B),q()}},U=async()=>{try{l([{id:"1",title:"Peak Usage Hours Identified",description:"Sessions are most frequent between 10 AM and 2 PM. Consider scheduling maintenance outside these hours.",type:"optimization",priority:"medium",actionable:!0,createdAt:new Date("2025-08-18T09:00:00")},{id:"2",title:"Late Arrival Trend Increasing",description:"Late arrivals have increased by 15% this month. Review check-in procedures and candidate communication.",type:"alert",priority:"high",actionable:!0,createdAt:new Date("2025-08-18T08:30:00")},{id:"3",title:"TOEFL Sessions Show High Success Rate",description:"TOEFL sessions maintain a 92% completion rate, 7% above average. Current procedures are working well.",type:"performance",priority:"low",actionable:!1,createdAt:new Date("2025-08-17T16:45:00")},{id:"4",title:"System Performance Optimization Opportunity",description:"Database queries during peak hours are 20% slower. Consider implementing caching or load balancing.",type:"optimization",priority:"medium",actionable:!0,createdAt:new Date("2025-08-17T14:20:00")}])}catch(B){console.error("Error loading insights:",B)}},V=async()=>{try{u([{id:"1",title:"Weekly Operations Summary",description:"Comprehensive report covering all operational metrics for the week",type:"weekly",generatedAt:new Date("2025-08-18T06:00:00")},{id:"2",title:"Monthly Performance Analysis",description:"Detailed analysis of performance trends and key metrics",type:"monthly",generatedAt:new Date("2025-08-15T23:59:00")},{id:"3",title:"Daily Activity Report",description:"Summary of today's sessions, incidents, and key events",type:"daily",generatedAt:new Date("2025-08-18T23:45:00")}])}catch(B){console.error("Error loading reports:",B)}},q=()=>{n({totalSessions:147,successRate:87,avgDuration:"2h 18m",peakHours:"10:00 - 14:00",topExams:[{name:"TOEFL iBT",count:42},{name:"GRE General Test",count:28},{name:"AWS Solutions Architect",count:21},{name:"CISSP",count:18},{name:"CompTIA Security+",count:15}],monthlyTrend:[{month:"Jan",sessions:45},{month:"Feb",sessions:52},{month:"Mar",sessions:48},{month:"Apr",sessions:61},{month:"May",sessions:55},{month:"Jun",sessions:67},{month:"Jul",sessions:73},{month:"Aug",sessions:68}],issueReports:[{type:"Technical Issues",count:3,trend:"down"},{type:"No Shows",count:8,trend:"stable"},{type:"Late Arrivals",count:12,trend:"up"},{type:"Equipment Problems",count:2,trend:"down"}]})},I=()=>{q(),U(),V()},ie=B=>{switch(B){case"performance":return r.jsx(vi,{className:"h-5 w-5"});case"optimization":return r.jsx(ph,{className:"h-5 w-5"});case"alert":return r.jsx(ur,{className:"h-5 w-5"});case"trend":return r.jsx(vi,{className:"h-5 w-5"});default:return r.jsx(xi,{className:"h-5 w-5"})}},M=(B,se)=>{if(se==="high")return"text-red-400 bg-red-500/20 border-red-500/50";if(se==="medium")return"text-yellow-400 bg-yellow-500/20 border-yellow-500/50";switch(B){case"performance":return"text-green-400 bg-green-500/20 border-green-500/50";case"optimization":return"text-blue-400 bg-blue-500/20 border-blue-500/50";case"alert":return"text-red-400 bg-red-500/20 border-red-500/50";case"trend":return"text-purple-400 bg-purple-500/20 border-purple-500/50";default:return"text-gray-400 bg-gray-500/20 border-gray-500/50"}},X=B=>{switch(B){case"up":return"";case"down":return"";case"stable":return"";default:return""}};return y?r.jsx("div",{className:"flex-1 p-6",children:r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-yellow-400"})})}):r.jsxs("div",{className:"flex-1 p-6",children:[r.jsxs("div",{className:"mb-8",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(xi,{className:"h-8 w-8 text-yellow-400 mr-3"}),r.jsx("h1",{className:"text-3xl font-bold text-white",children:"FETS Intelligence"})]}),r.jsx("div",{className:"flex items-center space-x-4",children:r.jsxs("select",{className:"golden-input",value:f,onChange:B=>p(B.target.value),children:[r.jsx("option",{value:"1d",children:"Last 24 Hours"}),r.jsx("option",{value:"7d",children:"Last 7 Days"}),r.jsx("option",{value:"30d",children:"Last 30 Days"}),r.jsx("option",{value:"90d",children:"Last 90 Days"})]})})]}),r.jsx("p",{className:"text-gray-300",children:"Advanced analytics, insights, and intelligence reporting for data-driven decisions"})]}),c&&r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[r.jsx("div",{className:"golden-stats-card p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-black/70 text-sm",children:"Total Sessions"}),r.jsx("p",{className:"text-3xl font-bold text-black",children:c.totalSessions}),r.jsx("p",{className:"text-black/70 text-sm",children:"+12% from last period"})]}),r.jsx(Ht,{className:"h-8 w-8 text-black/70"})]})}),r.jsx("div",{className:"golden-card p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-400 text-sm",children:"Success Rate"}),r.jsxs("p",{className:"text-3xl font-bold text-white",children:[c.successRate,"%"]}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Above target"})]}),r.jsx(St,{className:"h-8 w-8 text-green-400"})]})}),r.jsx("div",{className:"golden-card p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-400 text-sm",children:"Avg Duration"}),r.jsx("p",{className:"text-3xl font-bold text-white",children:c.avgDuration}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Within range"})]}),r.jsx(Sr,{className:"h-8 w-8 text-blue-400"})]})}),r.jsx("div",{className:"golden-card p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-400 text-sm",children:"Peak Hours"}),r.jsx("p",{className:"text-xl font-bold text-white",children:c.peakHours}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Daily pattern"})]}),r.jsx(vi,{className:"h-8 w-8 text-yellow-400"})]})})]}),r.jsxs("div",{className:"golden-card p-6",children:[r.jsx("div",{className:"flex space-x-6 mb-6 border-b border-gray-700",children:[{id:"overview",name:"Overview",icon:ph},{id:"insights",name:"Smart Insights",icon:xi},{id:"reports",name:"Reports",icon:St}].map(B=>{const se=B.icon;return r.jsxs("button",{onClick:()=>x(B.id),className:`flex items-center space-x-2 px-4 py-2 rounded-t-lg font-medium transition-colors ${g===B.id?"text-yellow-400 border-b-2 border-yellow-400":"text-gray-400 hover:text-white"}`,children:[r.jsx(se,{className:"h-4 w-4"}),r.jsx("span",{children:B.name})]},B.id)})}),g==="overview"&&c&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Top Exams"}),r.jsx("div",{className:"space-y-3",children:c.topExams.map((B,se)=>r.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-white/5",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsxs("span",{className:"text-yellow-400 font-bold",children:["#",se+1]}),r.jsx("span",{className:"text-white",children:B.name})]}),r.jsxs("span",{className:"text-gray-400",children:[B.count," sessions"]})]},se))})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Issue Analysis"}),r.jsx("div",{className:"space-y-3",children:c.issueReports.map((B,se)=>r.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-white/5",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("span",{className:"text-gray-400",children:B.type}),r.jsx("span",{className:"text-2xl",children:X(B.trend)})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("span",{className:"text-white font-semibold",children:B.count}),r.jsxs("p",{className:"text-xs text-gray-400",children:[B.trend," trend"]})]})]},se))})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Monthly Session Trends"}),r.jsx("div",{className:"grid grid-cols-8 gap-2 p-4 bg-white/5 rounded-lg",children:c.monthlyTrend.map((B,se)=>{const pe=Math.max(...c.monthlyTrend.map(ne=>ne.sessions)),F=B.sessions/pe*100;return r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx("div",{className:"w-8 bg-gradient-to-t from-yellow-600 to-yellow-400 rounded-t",style:{height:`${F}px`,minHeight:"20px"}}),r.jsx("span",{className:"text-xs text-gray-400 mt-2",children:B.month}),r.jsx("span",{className:"text-xs text-white font-medium",children:B.sessions})]},se)})})]})]}),g==="insights"&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-white",children:"AI-Powered Insights"}),r.jsxs("span",{className:"text-sm text-gray-400",children:[a.length," insights generated"]})]}),a.map(B=>r.jsx("div",{className:`p-4 rounded-lg border transition-colors ${M(B.type,B.priority)}`,children:r.jsxs("div",{className:"flex items-start space-x-4",children:[r.jsx("div",{className:"flex-shrink-0 p-2 rounded-lg bg-current/20",children:ie(B.type)}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("h4",{className:"font-semibold text-current",children:B.title}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"px-2 py-1 bg-current/20 text-current text-xs rounded",children:B.priority.toUpperCase()}),B.actionable&&r.jsx("span",{className:"px-2 py-1 bg-green-500/20 text-green-400 text-xs rounded",children:"ACTIONABLE"})]})]}),r.jsx("p",{className:"text-current/80 mb-3",children:B.description}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-xs text-current/60",children:B.createdAt.toLocaleString()}),B.actionable&&r.jsx("button",{className:"text-xs bg-current/20 hover:bg-current/30 px-3 py-1 rounded transition-colors",children:"Take Action"})]})]})]})},B.id))]}),g==="reports"&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-white",children:"Generated Reports"}),r.jsx("button",{className:"golden-button text-sm px-4 py-2",children:"Generate New Report"})]}),o.map(B=>r.jsxs("div",{className:"p-4 rounded-lg bg-white/5 hover:bg-white/10 transition-colors",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("h4",{className:"font-semibold text-white",children:B.title}),r.jsx("div",{className:"flex items-center space-x-2",children:r.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${B.type==="daily"?"bg-blue-500/20 text-blue-400":B.type==="weekly"?"bg-green-500/20 text-green-400":B.type==="monthly"?"bg-yellow-500/20 text-yellow-400":"bg-gray-500/20 text-gray-400"}`,children:B.type.toUpperCase()})})]}),r.jsx("p",{className:"text-gray-300 mb-3",children:B.description}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("span",{className:"text-sm text-gray-400",children:["Generated: ",B.generatedAt.toLocaleString()]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs("button",{className:"flex items-center space-x-1 px-3 py-1 text-blue-400 hover:bg-blue-500/20 rounded",children:[r.jsx(xi,{className:"h-4 w-4"}),r.jsx("span",{children:"View"})]}),r.jsxs("button",{className:"flex items-center space-x-1 px-3 py-1 text-green-400 hover:bg-green-500/20 rounded",children:[r.jsx(vi,{className:"h-4 w-4"}),r.jsx("span",{children:"Download"})]})]})]})]},B.id))]})]})]})}function X0(){const{user:c,profile:n}=It(),[a,l]=P.useState([]),[o,u]=P.useState(!0),[f,p]=P.useState(!1),[g,x]=P.useState(null),[y,j]=P.useState(""),[C,D]=P.useState("all"),[U,V]=P.useState("all"),[q,I]=P.useState("all"),[ie,M]=P.useState(!1),[X,B]=P.useState(""),[se,pe]=P.useState(""),[F,ne]=P.useState({title:"",description:"",category:"other",severity:"medium",status:"open",assigned_to:"",is_todo_task:!1,todo_type:"",due_date:""}),oe=[{value:"computer_malfunction",label:"Computer Malfunction",icon:sa},{value:"equipment_issues",label:"Equipment Issues",icon:ur},{value:"client_communication",label:"Client Communication",icon:E0},{value:"facility_issues",label:"Facility Issues",icon:Jh},{value:"staff_issues",label:"Staff Issues",icon:rr},{value:"todo_task",label:"Todo Task",icon:St},{value:"other",label:"Other",icon:gh}],Ne=[{value:"open",label:"Open/New",color:"bg-red-500"},{value:"in_progress",label:"In Progress",color:"bg-yellow-500"},{value:"rectified",label:"Rectified/Resolved",color:"bg-green-500"},{value:"reported_to_it",label:"Reported to IT",color:"bg-blue-500"},{value:"reported_to_management",label:"Reported to Management",color:"bg-purple-500"},{value:"closed",label:"Closed",color:"bg-gray-500"}],Se=[{value:"low",label:"Low",color:"bg-gray-500"},{value:"medium",label:"Medium",color:"bg-yellow-500"},{value:"high",label:"High",color:"bg-orange-500"},{value:"critical",label:"Critical",color:"bg-red-500"}],te=["Drinking water finished","Office supplies to buy","Computer malfunction to report to IT","Call Prometric client","Facility maintenance requests","Other internal tasks"];P.useEffect(()=>{ae()},[]);const ae=async()=>{try{u(!0);const{data:S,error:H}=await re.from("incidents").select("*").order("created_at",{ascending:!1});if(H)throw H;l(S||[])}catch(S){console.error("Error loading incidents:",S),B("Failed to load incidents")}finally{u(!1)}},le=async S=>{if(S.preventDefault(),!!c){M(!0),B("");try{const H={...F,reporter:(n==null?void 0:n.full_name)||c.email||"Unknown",user_id:c.id,due_date:F.due_date||null,category:F.is_todo_task?"todo_task":F.category};if(g){const{error:ce}=await re.from("incidents").update(H).eq("id",g.id);if(ce)throw ce;pe("Incident updated successfully!")}else{const{error:ce}=await re.from("incidents").insert([H]);if(ce)throw ce;pe("Incident created successfully!")}W(),ae()}catch(H){console.error("Error saving incident:",H),B(H.message||"Failed to save incident")}finally{M(!1)}}},ye=S=>{x(S),ne({title:S.title,description:S.description,category:S.category,severity:S.severity,status:S.status,assigned_to:S.assigned_to||"",is_todo_task:S.is_todo_task,todo_type:S.todo_type||"",due_date:S.due_date||""}),p(!0)},je=async S=>{if(confirm("Are you sure you want to delete this incident?"))try{const{error:H}=await re.from("incidents").delete().eq("id",S.id);if(H)throw H;pe("Incident deleted successfully!"),ae()}catch(H){console.error("Error deleting incident:",H),B(H.message||"Failed to delete incident")}},W=()=>{ne({title:"",description:"",category:"other",severity:"medium",status:"open",assigned_to:"",is_todo_task:!1,todo_type:"",due_date:""}),x(null),p(!1)},$=a.filter(S=>{const H=S.title.toLowerCase().includes(y.toLowerCase())||S.description.toLowerCase().includes(y.toLowerCase()),ce=C==="all"||S.category===C,Ce=U==="all"||S.status===U,Ae=q==="all"||q==="incidents"&&!S.is_todo_task||q==="todos"&&S.is_todo_task;return H&&ce&&Ce&&Ae}),O=S=>{const H=Ne.find(ce=>ce.value===S);return r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium text-white ${(H==null?void 0:H.color)||"bg-gray-500"}`,children:(H==null?void 0:H.label)||S})},N=S=>{const H=Se.find(ce=>ce.value===S);return r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium text-white ${(H==null?void 0:H.color)||"bg-gray-500"}`,children:(H==null?void 0:H.label)||S})},v=S=>{const H=oe.find(Ce=>Ce.value===S),ce=(H==null?void 0:H.icon)||gh;return r.jsx(ce,{className:"h-4 w-4"})},Z=(()=>{const S=a.length,H=a.filter($e=>$e.status==="open").length,ce=a.filter($e=>$e.status==="in_progress").length,Ce=a.filter($e=>$e.is_todo_task).length,Ae=a.filter($e=>$e.status==="rectified"||$e.status==="closed").length;return{total:S,open:H,inProgress:ce,todos:Ce,resolved:Ae}})();return r.jsxs("div",{className:"flex-1 p-4 sm:p-6 overflow-auto",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[r.jsx(ur,{className:"mr-3 h-6 w-6 text-orange-500"}),"Log Incident Management"]}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Track incidents, issues, and daily tasks"})]}),r.jsxs("button",{onClick:()=>p(!0),className:"fets-orange-card px-4 py-2 rounded-lg font-medium transition-all duration-200 flex items-center",children:[r.jsx(vt,{className:"mr-2 h-4 w-4"}),"Add New"]})]}),r.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-5 gap-4 mb-6",children:[r.jsxs("div",{className:"fets-orange-card p-4 rounded-lg",children:[r.jsx("div",{className:"text-2xl font-bold",children:Z.total}),r.jsx("div",{className:"text-sm opacity-90",children:"Total"})]}),r.jsxs("div",{className:"fets-sage-card p-4 rounded-lg",children:[r.jsx("div",{className:"text-2xl font-bold",children:Z.open}),r.jsx("div",{className:"text-sm opacity-90",children:"Open"})]}),r.jsxs("div",{className:"fets-teal-card p-4 rounded-lg",children:[r.jsx("div",{className:"text-2xl font-bold",children:Z.inProgress}),r.jsx("div",{className:"text-sm opacity-90",children:"In Progress"})]}),r.jsxs("div",{className:"golden-card p-4 rounded-lg",children:[r.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:Z.todos}),r.jsx("div",{className:"text-sm text-gray-600",children:"Todo Tasks"})]}),r.jsxs("div",{className:"golden-card p-4 rounded-lg",children:[r.jsx("div",{className:"text-2xl font-bold text-green-600",children:Z.resolved}),r.jsx("div",{className:"text-sm text-gray-600",children:"Resolved"})]})]}),r.jsx("div",{className:"golden-card p-4 mb-6",children:r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search"}),r.jsxs("div",{className:"relative",children:[r.jsx(ra,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),r.jsx("input",{type:"text",value:y,onChange:S=>j(S.target.value),placeholder:"Search incidents...",className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg w-full focus:ring-2 focus:ring-orange-500 focus:border-orange-500"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type"}),r.jsxs("select",{value:q,onChange:S=>I(S.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 w-full focus:ring-2 focus:ring-orange-500 focus:border-orange-500",children:[r.jsx("option",{value:"all",children:"All Types"}),r.jsx("option",{value:"incidents",children:"Incidents Only"}),r.jsx("option",{value:"todos",children:"Todo Tasks Only"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),r.jsxs("select",{value:C,onChange:S=>D(S.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 w-full focus:ring-2 focus:ring-orange-500 focus:border-orange-500",children:[r.jsx("option",{value:"all",children:"All Categories"}),oe.map(S=>r.jsx("option",{value:S.value,children:S.label},S.value))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),r.jsxs("select",{value:U,onChange:S=>V(S.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 w-full focus:ring-2 focus:ring-orange-500 focus:border-orange-500",children:[r.jsx("option",{value:"all",children:"All Statuses"}),Ne.map(S=>r.jsx("option",{value:S.value,children:S.label},S.value))]})]})]})}),se&&r.jsx("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg mb-4",children:se}),X&&r.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-4",children:X}),r.jsx("div",{className:"space-y-4",children:o?r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-500 mx-auto"}),r.jsx("p",{className:"mt-2 text-gray-600",children:"Loading incidents..."})]}):$.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(ur,{className:"mx-auto h-12 w-12 text-gray-400"}),r.jsx("p",{className:"mt-2 text-gray-600",children:"No incidents found"})]}):$.map(S=>r.jsx("div",{className:"golden-card p-4 hover:shadow-lg transition-all duration-200",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center mb-2",children:[v(S.category),r.jsx("h3",{className:"ml-2 font-semibold text-gray-900",children:S.title}),S.is_todo_task&&r.jsx("span",{className:"ml-2 px-2 py-1 bg-blue-100 text-blue-700 text-xs rounded-full",children:"TODO"})]}),r.jsx("p",{className:"text-gray-600 text-sm mb-3",children:S.description}),r.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-2",children:[O(S.status),N(S.severity),r.jsxs("span",{className:"text-xs text-gray-500 flex items-center",children:[r.jsx(kr,{className:"h-3 w-3 mr-1"}),S.reporter]}),r.jsxs("span",{className:"text-xs text-gray-500 flex items-center",children:[r.jsx(Ht,{className:"h-3 w-3 mr-1"}),new Date(S.created_at).toLocaleDateString()]})]}),S.due_date&&r.jsxs("div",{className:"text-xs text-amber-600 flex items-center mt-1",children:[r.jsx(Sr,{className:"h-3 w-3 mr-1"}),"Due: ",new Date(S.due_date).toLocaleDateString()]})]}),r.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[r.jsx("button",{onClick:()=>ye(S),className:"p-2 text-gray-600 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:r.jsx(gs,{className:"h-4 w-4"})}),r.jsx("button",{onClick:()=>je(S),className:"p-2 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:r.jsx(hr,{className:"h-4 w-4"})})]})]})},S.id))}),f&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:r.jsx("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-auto",children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:g?"Edit Incident":"Create New Incident"}),r.jsx("button",{onClick:W,className:"text-gray-400 hover:text-gray-600 transition-colors",children:r.jsx(mt,{className:"h-6 w-6"})})]}),r.jsxs("form",{onSubmit:le,className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",id:"is_todo_task",checked:F.is_todo_task,onChange:S=>ne({...F,is_todo_task:S.target.checked}),className:"mr-2"}),r.jsx("label",{htmlFor:"is_todo_task",className:"text-sm font-medium text-gray-700",children:"This is a Todo Task"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title *"}),r.jsx("input",{type:"text",value:F.title,onChange:S=>ne({...F,title:S.target.value}),required:!0,className:"border border-gray-300 rounded-lg px-3 py-2 w-full focus:ring-2 focus:ring-orange-500 focus:border-orange-500",placeholder:"Enter incident title..."})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description *"}),r.jsx("textarea",{value:F.description,onChange:S=>ne({...F,description:S.target.value}),required:!0,rows:3,className:"border border-gray-300 rounded-lg px-3 py-2 w-full focus:ring-2 focus:ring-orange-500 focus:border-orange-500",placeholder:"Describe the incident in detail..."})]}),F.is_todo_task?r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Todo Type"}),r.jsxs("select",{value:F.todo_type,onChange:S=>ne({...F,todo_type:S.target.value}),className:"border border-gray-300 rounded-lg px-3 py-2 w-full focus:ring-2 focus:ring-orange-500 focus:border-orange-500",children:[r.jsx("option",{value:"",children:"Select todo type..."}),te.map(S=>r.jsx("option",{value:S,children:S},S))]})]}):r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category *"}),r.jsx("select",{value:F.category,onChange:S=>ne({...F,category:S.target.value}),required:!0,className:"border border-gray-300 rounded-lg px-3 py-2 w-full focus:ring-2 focus:ring-orange-500 focus:border-orange-500",children:oe.filter(S=>S.value!=="todo_task").map(S=>r.jsx("option",{value:S.value,children:S.label},S.value))})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Severity"}),r.jsx("select",{value:F.severity,onChange:S=>ne({...F,severity:S.target.value}),className:"border border-gray-300 rounded-lg px-3 py-2 w-full focus:ring-2 focus:ring-orange-500 focus:border-orange-500",children:Se.map(S=>r.jsx("option",{value:S.value,children:S.label},S.value))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),r.jsx("select",{value:F.status,onChange:S=>ne({...F,status:S.target.value}),className:"border border-gray-300 rounded-lg px-3 py-2 w-full focus:ring-2 focus:ring-orange-500 focus:border-orange-500",children:Ne.map(S=>r.jsx("option",{value:S.value,children:S.label},S.value))})]})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Assigned To"}),r.jsx("input",{type:"text",value:F.assigned_to,onChange:S=>ne({...F,assigned_to:S.target.value}),className:"border border-gray-300 rounded-lg px-3 py-2 w-full focus:ring-2 focus:ring-orange-500 focus:border-orange-500",placeholder:"Assign to staff member..."})]}),F.is_todo_task&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Due Date"}),r.jsx("input",{type:"date",value:F.due_date,onChange:S=>ne({...F,due_date:S.target.value}),className:"border border-gray-300 rounded-lg px-3 py-2 w-full focus:ring-2 focus:ring-orange-500 focus:border-orange-500"})]})]}),r.jsxs("div",{className:"flex justify-end space-x-4 mt-6",children:[r.jsx("button",{type:"button",onClick:W,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:ie,className:"fets-orange-card px-4 py-2 rounded-lg font-medium transition-all duration-200 disabled:opacity-50",children:ie?"Saving...":g?"Update":"Create"})]})]})]})})})]})}function Z0(){const{user:c,profile:n}=It(),[a,l]=P.useState("templates"),[o,u]=P.useState([]),[f,p]=P.useState([]),[g,x]=P.useState(!0),[y,j]=P.useState(!1),[C,D]=P.useState(!1),[U,V]=P.useState(null),[q,I]=P.useState(null),[ie,M]=P.useState(null),[X,B]=P.useState(null),[se,pe]=P.useState(""),[F,ne]=P.useState("all"),[oe,Ne]=P.useState(!1),[Se,te]=P.useState(""),[ae,le]=P.useState(""),[ye,je]=P.useState({name:"",description:"",category:"pre-exam"}),[W,$]=P.useState({title:"",description:"",priority:"medium",estimated_time_minutes:5,responsible_role:"any",notes:""}),O=(n==null?void 0:n.role)==="super_admin",N=(n==null?void 0:n.role)==="admin"||O,v=O,K=N,Z=N,S=[{value:"low",label:"Low",color:"bg-gray-500"},{value:"medium",label:"Medium",color:"bg-yellow-500"},{value:"high",label:"High",color:"bg-red-500"}],H=["any","tca","super_admin","tech_support","manager","staff"];P.useEffect(()=>{ce()},[]);const ce=async()=>{try{x(!0),await Promise.all([Ce(),Ae()])}catch(w){console.error("Error loading data:",w),te("Failed to load checklist data")}finally{x(!1)}},Ce=async()=>{const{data:w,error:E}=await re.from("checklist_templates").select(`
        *,
        items:checklist_template_items(*)
      `).order("created_at",{ascending:!1});if(E)throw E;u(w||[])},Ae=async()=>{const{data:w,error:E}=await re.from("checklist_instances").select(`
        *,
        items:checklist_instance_items(*)
      `).order("exam_date",{ascending:!1});if(E)throw E;p(w||[])},$e=async w=>{if(w.preventDefault(),!!c){Ne(!0),te("");try{if(U){const{error:E}=await re.from("checklist_templates").update(ye).eq("id",U.id);if(E)throw E;le("Template updated successfully!")}else{const{error:E}=await re.from("checklist_templates").insert([{...ye,created_by:c.id}]);if(E)throw E;le("Template created successfully!")}wt(),Ce()}catch(E){console.error("Error saving template:",E),te(E.message||"Failed to save template")}finally{Ne(!1)}}},L=async w=>{if(c)try{Ne(!0);const E=new Date().toISOString().split("T")[0],{data:Q,error:de}=await re.from("checklist_instances").insert([{template_id:w.id,name:`${w.name} - ${E}`,category:w.category,exam_date:E,created_by:c.id}]).select().single();if(de)throw de;if(w.items&&w.items.length>0){const ue=w.items.map(ze=>({instance_id:Q.id,template_item_id:ze.id,title:ze.title,description:ze.description,priority:ze.priority,estimated_time_minutes:ze.estimated_time_minutes,responsible_role:ze.responsible_role,notes:ze.notes,sort_order:ze.sort_order})),{error:Oe}=await re.from("checklist_instance_items").insert(ue);if(Oe)throw Oe}le("Checklist instance created successfully!"),Ae()}catch(E){console.error("Error creating instance:",E),te(E.message||"Failed to create checklist instance")}finally{Ne(!1)}},Ie=async w=>{var E;if(w.preventDefault(),!!ie){Ne(!0),te("");try{const Q={...W,template_id:ie.id,sort_order:(((E=ie.items)==null?void 0:E.length)||0)+1};if(q){const{error:de}=await re.from("checklist_template_items").update(Q).eq("id",q.id);if(de)throw de;le("Item updated successfully!")}else{const{error:de}=await re.from("checklist_template_items").insert([Q]);if(de)throw de;le("Item added successfully!")}bt(),Ce()}catch(Q){console.error("Error saving item:",Q),te(Q.message||"Failed to save item")}finally{Ne(!1)}}},Pe=async w=>{if(c)try{const E={is_completed:!w.is_completed,completed_by:w.is_completed?null:c.id,completed_at:w.is_completed?null:new Date().toISOString()},{error:Q}=await re.from("checklist_instance_items").update(E).eq("id",w.id);if(Q)throw Q;Ae()}catch(E){console.error("Error updating item:",E),te("Failed to update item")}},Le=async w=>{if(confirm("Are you sure you want to delete this template? This will also delete all associated items."))try{const{error:E}=await re.from("checklist_templates").delete().eq("id",w.id);if(E)throw E;le("Template deleted successfully!"),Ce()}catch(E){console.error("Error deleting template:",E),te(E.message||"Failed to delete template")}},it=async w=>{if(confirm("Are you sure you want to delete this checklist instance?"))try{const{error:E}=await re.from("checklist_instances").delete().eq("id",w.id);if(E)throw E;le("Checklist instance deleted successfully!"),Ae()}catch(E){console.error("Error deleting instance:",E),te(E.message||"Failed to delete instance")}},wt=()=>{je({name:"",description:"",category:"pre-exam"}),V(null),j(!1)},bt=()=>{$({title:"",description:"",priority:"medium",estimated_time_minutes:5,responsible_role:"any",notes:""}),I(null),D(!1)},lt=w=>{const E=S.find(Q=>Q.value===w);return r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium text-white ${(E==null?void 0:E.color)||"bg-gray-500"}`,children:(E==null?void 0:E.label)||w})},Wt=w=>{if(!w.items||w.items.length===0)return 0;const E=w.items.filter(Q=>Q.is_completed).length;return Math.round(E/w.items.length*100)},z=()=>{const w=o.filter(ue=>ue.category==="pre-exam").length,E=o.filter(ue=>ue.category==="post-exam").length,Q=o.filter(ue=>ue.is_active).length,de=o.reduce((ue,Oe)=>{var ze;return ue+(((ze=Oe.items)==null?void 0:ze.length)||0)},0);return{preExamTemplates:w,postExamTemplates:E,activeTemplates:Q,totalItems:de}},me=()=>{const w=new Date().toISOString().split("T")[0],E=f.filter(Oe=>Oe.exam_date===w).length,Q=f.filter(Oe=>Oe.completed_at).length,de=f.filter(Oe=>Oe.category==="pre-exam").length,ue=f.filter(Oe=>Oe.category==="post-exam").length;return{todayInstances:E,completedInstances:Q,preExamInstances:de,postExamInstances:ue}},Te=z(),he=me(),qe=o.filter(w=>{var de;const E=w.name.toLowerCase().includes(se.toLowerCase())||((de=w.description)==null?void 0:de.toLowerCase().includes(se.toLowerCase())),Q=F==="all"||w.category===F;return E&&Q}),Je=f.filter(w=>{const E=w.name.toLowerCase().includes(se.toLowerCase()),Q=F==="all"||w.category===F;return E&&Q});return r.jsxs("div",{className:"flex-1 p-4 sm:p-6 overflow-auto",children:[r.jsx("div",{className:"flex items-center justify-between mb-6",children:r.jsxs("div",{children:[r.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[r.jsx(St,{className:"mr-3 h-6 w-6 text-green-500"}),"Checklist Management",n&&r.jsx("span",{className:`ml-4 px-3 py-1 text-xs font-semibold rounded-full ${O?"bg-red-100 text-red-800 ring-2 ring-red-200":N?"bg-blue-100 text-blue-800 ring-2 ring-blue-200":"bg-gray-100 text-gray-800 ring-2 ring-gray-200"}`,children:n.role==="super_admin"?"SUPER ADMIN":n.role==="admin"?"ADMIN":"USER"})]}),r.jsxs("p",{className:"text-gray-600 mt-1",children:["Manage exam checklists and track completion",!v&&r.jsx("span",{className:"text-amber-600 ml-2 text-sm",children:" View-only access"})]})]})}),r.jsxs("div",{className:"flex space-x-4 mb-6",children:[r.jsxs("button",{onClick:()=>l("templates"),className:`px-4 py-2 rounded-lg font-medium transition-all duration-200 ${a==="templates"?"fets-orange-card":"golden-card text-gray-700 hover:bg-gray-50"}`,children:["Templates (",o.length,")"]}),r.jsxs("button",{onClick:()=>l("instances"),className:`px-4 py-2 rounded-lg font-medium transition-all duration-200 ${a==="instances"?"fets-sage-card":"golden-card text-gray-700 hover:bg-gray-50"}`,children:["Daily Checklists (",f.length,")"]})]}),r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mb-6",children:a==="templates"?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"fets-orange-card p-4 rounded-lg",children:[r.jsx("div",{className:"text-2xl font-bold",children:Te.activeTemplates}),r.jsx("div",{className:"text-sm opacity-90",children:"Active Templates"})]}),r.jsxs("div",{className:"fets-sage-card p-4 rounded-lg",children:[r.jsx("div",{className:"text-2xl font-bold",children:Te.preExamTemplates}),r.jsx("div",{className:"text-sm opacity-90",children:"Pre-Exam"})]}),r.jsxs("div",{className:"fets-teal-card p-4 rounded-lg",children:[r.jsx("div",{className:"text-2xl font-bold",children:Te.postExamTemplates}),r.jsx("div",{className:"text-sm opacity-90",children:"Post-Exam"})]}),r.jsxs("div",{className:"golden-card p-4 rounded-lg",children:[r.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:Te.totalItems}),r.jsx("div",{className:"text-sm text-gray-600",children:"Total Items"})]})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"fets-sage-card p-4 rounded-lg",children:[r.jsx("div",{className:"text-2xl font-bold",children:he.todayInstances}),r.jsx("div",{className:"text-sm opacity-90",children:"Today's Lists"})]}),r.jsxs("div",{className:"fets-orange-card p-4 rounded-lg",children:[r.jsx("div",{className:"text-2xl font-bold",children:he.preExamInstances}),r.jsx("div",{className:"text-sm opacity-90",children:"Pre-Exam"})]}),r.jsxs("div",{className:"fets-teal-card p-4 rounded-lg",children:[r.jsx("div",{className:"text-2xl font-bold",children:he.postExamInstances}),r.jsx("div",{className:"text-sm opacity-90",children:"Post-Exam"})]}),r.jsxs("div",{className:"golden-card p-4 rounded-lg",children:[r.jsx("div",{className:"text-2xl font-bold text-green-600",children:he.completedInstances}),r.jsx("div",{className:"text-sm text-gray-600",children:"Completed"})]})]})}),r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 space-y-4 sm:space-y-0",children:[r.jsxs("button",{onClick:()=>a==="templates"&&v?j(!0):null,disabled:a!=="templates"||!v,className:`px-4 py-2 rounded-lg font-medium transition-all duration-200 flex items-center ${a==="templates"&&v?"fets-orange-card":"golden-card text-gray-500 cursor-not-allowed opacity-50"}`,children:[r.jsx(vt,{className:"mr-2 h-4 w-4"}),a==="templates"?v?"Create Template":"Super Admin Required":"Select Templates Tab"]}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx(ra,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),r.jsx("input",{type:"text",value:se,onChange:w=>pe(w.target.value),placeholder:"Search...",className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500"})]}),r.jsxs("select",{value:F,onChange:w=>ne(w.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-orange-500",children:[r.jsx("option",{value:"all",children:"All Categories"}),r.jsx("option",{value:"pre-exam",children:"Pre-Exam"}),r.jsx("option",{value:"post-exam",children:"Post-Exam"})]})]})]}),ae&&r.jsxs("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg mb-4 flex items-center",children:[r.jsx(St,{className:"h-4 w-4 mr-2"}),ae,r.jsx("button",{onClick:()=>le(""),className:"ml-auto text-green-600 hover:text-green-800",children:r.jsx(mt,{className:"h-4 w-4"})})]}),Se&&r.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-4 flex items-center",children:[r.jsx(ur,{className:"h-4 w-4 mr-2"}),Se,r.jsx("button",{onClick:()=>te(""),className:"ml-auto text-red-600 hover:text-red-800",children:r.jsx(mt,{className:"h-4 w-4"})})]}),g?r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-orange-500 mx-auto"}),r.jsx("p",{className:"mt-2 text-gray-600",children:"Loading checklists..."})]}):a==="templates"?r.jsx("div",{className:"space-y-4",children:qe.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsxs("div",{className:"relative",children:[r.jsx(Ci,{className:"mx-auto h-16 w-16 text-gray-400 mb-4"}),r.jsx("div",{className:"absolute -top-2 -right-2 w-6 h-6 bg-orange-100 rounded-full flex items-center justify-center",children:r.jsx(vt,{className:"w-4 h-4 text-orange-600"})})]}),r.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"No Templates Found"}),r.jsx("p",{className:"text-gray-500 mb-6",children:v?"Create your first checklist template to get started":"No templates are available yet. Contact a Super Admin to create templates."}),v&&r.jsxs("button",{onClick:()=>j(!0),className:"fets-orange-card px-6 py-3 rounded-lg font-medium transition-all duration-200 hover:scale-105 shadow-lg",children:[r.jsx(vt,{className:"inline mr-2 h-5 w-5"}),"Create Your First Template"]}),!v&&r.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4 max-w-md mx-auto",children:r.jsxs("p",{className:"text-amber-800 text-sm flex items-center",children:[r.jsx(ur,{className:"h-4 w-4 mr-2"}),"Super Admin access required to create templates"]})})]}):qe.map(w=>{var E;return r.jsxs("div",{className:`relative overflow-hidden transition-all duration-300 hover:scale-[1.02] hover:shadow-xl ${w.is_active?"golden-card p-6 border-l-4 border-orange-400 shadow-lg":"bg-gray-50 p-6 border-l-4 border-gray-300 opacity-75"}`,children:[w.is_active&&r.jsx("div",{className:"absolute top-4 right-4",children:r.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"})}),r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center mb-2",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:w.name}),r.jsx("span",{className:`ml-3 px-2 py-1 text-xs rounded-full ${w.category==="pre-exam"?"bg-blue-100 text-blue-700":"bg-purple-100 text-purple-700"}`,children:w.category.replace("-"," ").toUpperCase()}),!w.is_active&&r.jsx("span",{className:"ml-2 px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded-full",children:"INACTIVE"})]}),w.description&&r.jsx("p",{className:"text-gray-600 text-sm mb-3",children:w.description}),r.jsxs("div",{className:"flex items-center text-sm text-gray-500 space-x-4",children:[r.jsxs("span",{children:[((E=w.items)==null?void 0:E.length)||0," items"]}),r.jsxs("span",{children:["Created ",new Date(w.created_at).toLocaleDateString()]})]})]}),r.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[r.jsxs("button",{onClick:()=>L(w),disabled:!w.is_active||oe||!Z,className:`px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 flex items-center ${w.is_active&&Z?"fets-sage-card":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,title:Z?"Create daily checklist":"Admin access required",children:[r.jsx(xh,{className:"mr-1 h-4 w-4"}),"Use Today"]}),v&&r.jsx("button",{onClick:()=>{M(w),D(!0)},className:"p-2 text-gray-600 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Add Item",children:r.jsx(vt,{className:"h-4 w-4"})}),v&&r.jsx("button",{onClick:()=>{V(w),je({name:w.name,description:w.description||"",category:w.category}),j(!0)},className:"p-2 text-gray-600 hover:text-orange-600 hover:bg-orange-50 rounded-lg transition-colors",title:"Edit Template",children:r.jsx(gs,{className:"h-4 w-4"})}),v&&r.jsx("button",{onClick:()=>Le(w),className:"p-2 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete Template",children:r.jsx(hr,{className:"h-4 w-4"})}),!v&&r.jsx("span",{className:"text-xs text-gray-500 px-2 py-1 bg-gray-100 rounded",children:"View Only"})]})]}),w.items&&w.items.length>0&&r.jsxs("div",{className:"border-t pt-4",children:[r.jsxs("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:["Checklist Items (",w.items.length,")"]}),r.jsx("div",{className:"space-y-2",children:w.items.map((Q,de)=>r.jsxs("div",{className:"flex items-center p-3 bg-gray-50 rounded-lg",children:[r.jsx("div",{className:"flex items-center text-gray-400 mr-3",children:r.jsxs("span",{className:"text-xs font-medium w-6",children:[de+1,"."]})}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center mb-1",children:[r.jsx("span",{className:"font-medium text-gray-900",children:Q.title}),lt(Q.priority),r.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["~",Q.estimated_time_minutes,"min"]})]}),Q.description&&r.jsx("p",{className:"text-sm text-gray-600",children:Q.description})]})]},Q.id))})]})]},w.id)})}):r.jsx("div",{className:"space-y-4",children:Je.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsxs("div",{className:"relative",children:[r.jsx(wh,{className:"mx-auto h-16 w-16 text-gray-400 mb-4"}),r.jsx("div",{className:"absolute -top-2 -right-2 w-6 h-6 bg-teal-100 rounded-full flex items-center justify-center",children:r.jsx(xh,{className:"w-4 h-4 text-teal-600"})})]}),r.jsx("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"No Daily Checklists Found"}),r.jsx("p",{className:"text-gray-500 mb-6",children:Z?"Create checklist instances from templates to start tracking daily tasks":"No checklist instances are available. Contact an Admin to create daily checklists."}),Z&&o.length>0&&r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 max-w-lg mx-auto",children:[r.jsxs("p",{className:"text-blue-800 text-sm mb-4 flex items-center justify-center",children:[r.jsx(St,{className:"h-4 w-4 mr-2"}),'Switch to Templates tab and click \\"Use Today\\" to create your first daily checklist']}),r.jsx("button",{onClick:()=>l("templates"),className:"fets-sage-card px-4 py-2 rounded-lg text-sm font-medium",children:"Go to Templates"})]}),!Z&&r.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4 max-w-md mx-auto",children:r.jsxs("p",{className:"text-amber-800 text-sm flex items-center",children:[r.jsx(ur,{className:"h-4 w-4 mr-2"}),"Admin access required to create daily checklists"]})})]}):Je.map(w=>{var de;const E=Wt(w),Q=E===100;return r.jsxs("div",{className:`relative overflow-hidden transition-all duration-300 hover:scale-[1.02] hover:shadow-xl ${Q?"bg-gradient-to-r from-green-50 to-emerald-50 p-6 border-l-4 border-green-500 shadow-lg":E>50?"golden-card p-6 border-l-4 border-orange-400 shadow-lg":"bg-white p-6 border-l-4 border-gray-300 shadow-md"}`,children:[Q&&r.jsx("div",{className:"absolute top-4 right-4",children:r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(St,{className:"h-5 w-5 text-green-600"}),r.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"})]})}),!Q&&E>0&&r.jsx("div",{className:"absolute top-4 right-4",children:r.jsxs("div",{className:"relative w-8 h-8",children:[r.jsxs("svg",{className:"w-8 h-8 transform -rotate-90",viewBox:"0 0 32 32",children:[r.jsx("circle",{cx:"16",cy:"16",r:"14",stroke:"currentColor",strokeWidth:"4",fill:"none",className:"text-gray-200"}),r.jsx("circle",{cx:"16",cy:"16",r:"14",stroke:"currentColor",strokeWidth:"4",fill:"none",strokeDasharray:`${2*Math.PI*14}`,strokeDashoffset:`${2*Math.PI*14*(1-E/100)}`,className:"text-orange-500 transition-all duration-500"})]}),r.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:r.jsxs("span",{className:"text-xs font-medium text-gray-600",children:[E,"%"]})})]})}),r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center mb-2",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:w.name}),r.jsx("span",{className:`ml-3 px-2 py-1 text-xs rounded-full ${w.category==="pre-exam"?"bg-blue-100 text-blue-700":"bg-purple-100 text-purple-700"}`,children:w.category.replace("-"," ").toUpperCase()}),Q&&r.jsxs("span",{className:"ml-2 px-2 py-1 bg-green-100 text-green-700 text-xs rounded-full flex items-center",children:[r.jsx(St,{className:"h-3 w-3 mr-1"}),"COMPLETED"]})]}),r.jsxs("div",{className:"flex items-center text-sm text-gray-500 space-x-4 mb-3",children:[r.jsxs("span",{children:["Exam Date: ",new Date(w.exam_date).toLocaleDateString()]}),r.jsxs("span",{children:[((de=w.items)==null?void 0:de.length)||0," items"]}),r.jsxs("span",{children:[E,"% complete"]})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 mb-3 overflow-hidden shadow-inner",children:r.jsx("div",{className:"relative h-full",children:r.jsx("div",{className:`h-full rounded-full transition-all duration-700 ease-out ${E===100?"bg-gradient-to-r from-green-400 to-emerald-500 shadow-lg":E>75?"bg-gradient-to-r from-blue-400 to-blue-500":E>50?"bg-gradient-to-r from-yellow-400 to-orange-500":E>25?"bg-gradient-to-r from-orange-400 to-red-400":"bg-gradient-to-r from-red-400 to-red-500"}`,style:{width:`${E}%`},children:E>0&&r.jsx("div",{className:"absolute right-0 top-0 h-full w-2 bg-white/30 rounded-full animate-pulse"})})})})]}),r.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[r.jsxs("button",{onClick:()=>B(w),className:"fets-teal-card px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 flex items-center",children:[r.jsx(ps,{className:"mr-1 h-4 w-4"}),(X==null?void 0:X.id)===w.id?"Hide":"View"]}),K&&r.jsx("button",{onClick:()=>it(w),className:"p-2 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete Instance",children:r.jsx(hr,{className:"h-4 w-4"})}),!K&&r.jsx("span",{className:"text-xs text-gray-500 px-2 py-1 bg-gray-100 rounded",children:"Admin Required"})]})]}),(X==null?void 0:X.id)===w.id&&w.items&&w.items.length>0&&r.jsxs("div",{className:"border-t pt-4",children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Checklist Items"}),r.jsx("div",{className:"space-y-2",children:w.items.map(ue=>r.jsxs("div",{className:`group flex items-center p-4 rounded-xl border-2 transition-all duration-300 hover:scale-[1.02] ${ue.is_completed?"bg-gradient-to-r from-green-50 to-emerald-50 border-green-200 shadow-md transform":"bg-white border-gray-200 hover:border-orange-300 hover:shadow-md"}`,children:[r.jsx("button",{onClick:()=>Pe(ue),className:`mr-4 p-2 rounded-lg transition-all duration-200 transform hover:scale-110 ${ue.is_completed?"text-green-600 bg-green-100 hover:bg-green-200 shadow-sm":"text-gray-400 hover:text-orange-600 hover:bg-orange-50"}`,children:ue.is_completed?r.jsx(wh,{className:"h-6 w-6"}):r.jsx(A0,{className:"h-6 w-6"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center mb-2",children:[r.jsx("span",{className:`font-semibold text-lg transition-all duration-300 ${ue.is_completed?"text-green-800 line-through opacity-75":"text-gray-900 group-hover:text-orange-700"}`,children:ue.title}),r.jsxs("div",{className:"flex items-center ml-3 space-x-2",children:[lt(ue.priority),r.jsxs("span",{className:`text-sm px-2 py-1 rounded-full ${ue.is_completed?"text-green-600 bg-green-100":"text-gray-600 bg-gray-100"}`,children:["~",ue.estimated_time_minutes,"min"]})]})]}),ue.description&&r.jsx("p",{className:`text-sm transition-all duration-300 ${ue.is_completed?"text-green-600 italic":"text-gray-600 group-hover:text-gray-800"}`,children:ue.description}),ue.completed_at&&r.jsxs("div",{className:"mt-2 flex items-center",children:[r.jsx(St,{className:"h-4 w-4 text-green-500 mr-1"}),r.jsxs("p",{className:"text-xs text-green-600 font-medium",children:["Completed: ",new Date(ue.completed_at).toLocaleString()]})]})]}),r.jsx("div",{className:`w-3 h-3 rounded-full ml-4 transition-all duration-300 ${ue.is_completed?"bg-green-500 shadow-lg animate-pulse":"bg-gray-300 group-hover:bg-orange-400"}`})]},ue.id))})]})]},w.id)})}),y&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:r.jsx("div",{className:"bg-white rounded-lg max-w-lg w-full max-h-[90vh] overflow-auto",children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:U?"Edit Template":"Create New Template"}),r.jsx("button",{onClick:wt,className:"text-gray-400 hover:text-gray-600 transition-colors",children:r.jsx(mt,{className:"h-6 w-6"})})]}),r.jsxs("form",{onSubmit:$e,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Template Name *"}),r.jsx("input",{type:"text",value:ye.name,onChange:w=>je({...ye,name:w.target.value}),required:!0,className:"border border-gray-300 rounded-lg px-3 py-2 w-full focus:ring-2 focus:ring-orange-500 focus:border-orange-500",placeholder:"Enter template name..."})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),r.jsx("textarea",{value:ye.description,onChange:w=>je({...ye,description:w.target.value}),rows:3,className:"border border-gray-300 rounded-lg px-3 py-2 w-full focus:ring-2 focus:ring-orange-500 focus:border-orange-500",placeholder:"Describe the template purpose..."})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category *"}),r.jsxs("select",{value:ye.category,onChange:w=>je({...ye,category:w.target.value}),required:!0,className:"border border-gray-300 rounded-lg px-3 py-2 w-full focus:ring-2 focus:ring-orange-500 focus:border-orange-500",children:[r.jsx("option",{value:"pre-exam",children:"Pre-Exam"}),r.jsx("option",{value:"post-exam",children:"Post-Exam"})]})]}),r.jsxs("div",{className:"flex justify-end space-x-4 mt-6",children:[r.jsx("button",{type:"button",onClick:wt,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:oe,className:"fets-orange-card px-4 py-2 rounded-lg font-medium transition-all duration-200 disabled:opacity-50",children:oe?"Saving...":U?"Update":"Create"})]})]})]})})}),C&&ie&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:r.jsx("div",{className:"bg-white rounded-lg max-w-lg w-full max-h-[90vh] overflow-auto",children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:q?"Edit Item":"Add Item to Template"}),r.jsx("button",{onClick:bt,className:"text-gray-400 hover:text-gray-600 transition-colors",children:r.jsx(mt,{className:"h-6 w-6"})})]}),r.jsx("div",{className:"mb-4 p-3 bg-blue-50 rounded-lg",children:r.jsxs("p",{className:"text-sm text-blue-700",children:["Adding to: ",r.jsx("strong",{children:ie.name})," (",ie.category,")"]})}),r.jsxs("form",{onSubmit:Ie,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Item Title *"}),r.jsx("input",{type:"text",value:W.title,onChange:w=>$({...W,title:w.target.value}),required:!0,className:"border border-gray-300 rounded-lg px-3 py-2 w-full focus:ring-2 focus:ring-orange-500 focus:border-orange-500",placeholder:"Enter item title..."})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),r.jsx("textarea",{value:W.description,onChange:w=>$({...W,description:w.target.value}),rows:2,className:"border border-gray-300 rounded-lg px-3 py-2 w-full focus:ring-2 focus:ring-orange-500 focus:border-orange-500",placeholder:"Describe what needs to be done..."})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),r.jsx("select",{value:W.priority,onChange:w=>$({...W,priority:w.target.value}),className:"border border-gray-300 rounded-lg px-3 py-2 w-full focus:ring-2 focus:ring-orange-500 focus:border-orange-500",children:S.map(w=>r.jsx("option",{value:w.value,children:w.label},w.value))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Time (minutes)"}),r.jsx("input",{type:"number",value:W.estimated_time_minutes,onChange:w=>$({...W,estimated_time_minutes:parseInt(w.target.value)||5}),min:1,max:120,className:"border border-gray-300 rounded-lg px-3 py-2 w-full focus:ring-2 focus:ring-orange-500 focus:border-orange-500"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Responsible Role"}),r.jsx("select",{value:W.responsible_role,onChange:w=>$({...W,responsible_role:w.target.value}),className:"border border-gray-300 rounded-lg px-3 py-2 w-full focus:ring-2 focus:ring-orange-500 focus:border-orange-500",children:H.map(w=>r.jsx("option",{value:w,children:w},w))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),r.jsx("textarea",{value:W.notes,onChange:w=>$({...W,notes:w.target.value}),rows:2,className:"border border-gray-300 rounded-lg px-3 py-2 w-full focus:ring-2 focus:ring-orange-500 focus:border-orange-500",placeholder:"Additional instructions or notes..."})]}),r.jsxs("div",{className:"flex justify-end space-x-4 mt-6",children:[r.jsx("button",{type:"button",onClick:bt,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:oe,className:"fets-orange-card px-4 py-2 rounded-lg font-medium transition-all duration-200 disabled:opacity-50",children:oe?"Saving...":q?"Update":"Add Item"})]})]})]})})})]})}function ex(){const{profile:c,signOut:n}=It(),[a,l]=P.useState("profile"),[o,u]=P.useState({notifications:{email:!0,push:!0,desktop:!1,security:!0,updates:!0},display:{theme:"dark",language:"en",timezone:"UTC",dateFormat:"MM/DD/YYYY"},security:{twoFactor:!1,sessionTimeout:30,loginAlerts:!0},system:{autoBackup:!0,maintenanceMode:!1,debugMode:!1}}),[f,p]=P.useState({fullName:(c==null?void 0:c.full_name)||"",email:(c==null?void 0:c.email)||"",phone:"",role:(c==null?void 0:c.role)||"",department:"",bio:""}),[g,x]=P.useState(!1),[y,j]=P.useState("");P.useEffect(()=>{C()},[]);const C=async()=>{try{const I=localStorage.getItem("fets-point-settings");I&&u(JSON.parse(I))}catch(I){console.error("Error loading settings:",I)}},D=async()=>{try{x(!0),localStorage.setItem("fets-point-settings",JSON.stringify(o)),j("Settings saved successfully!"),setTimeout(()=>j(""),3e3)}catch(I){console.error("Error saving settings:",I),j("Error saving settings"),setTimeout(()=>j(""),3e3)}finally{x(!1)}},U=async()=>{try{x(!0);const{error:I}=await re.from("profiles").update({full_name:f.fullName}).eq("user_id",c==null?void 0:c.user_id);I?(console.error("Error updating profile:",I),j("Error updating profile")):j("Profile updated successfully!"),setTimeout(()=>j(""),3e3)}catch(I){console.error("Error updating profile:",I),j("Error updating profile"),setTimeout(()=>j(""),3e3)}finally{x(!1)}},V=async()=>{try{await n()}catch(I){console.error("Error signing out:",I)}},q=[{id:"profile",name:"Profile",icon:kr},{id:"notifications",name:"Notifications",icon:Xn},{id:"display",name:"Display",icon:T0},{id:"security",name:"Security",icon:sn},{id:"system",name:"System",icon:w0}];return r.jsxs("div",{className:"flex-1 p-6",children:[r.jsxs("div",{className:"mb-8",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(sa,{className:"h-8 w-8 text-yellow-400 mr-3"}),r.jsx("h1",{className:"text-3xl font-bold text-white",children:"Settings"})]}),y&&r.jsx("div",{className:`px-4 py-2 rounded-lg ${y.includes("Error")?"bg-red-500/20 text-red-400":"bg-green-500/20 text-green-400"}`,children:y})]}),r.jsx("p",{className:"text-gray-300",children:"Customize your FETS POINT experience and manage system preferences"})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[r.jsx("div",{className:"lg:col-span-1",children:r.jsx("div",{className:"golden-card p-4",children:r.jsx("nav",{className:"space-y-2",children:q.map(I=>{const ie=I.icon;return r.jsxs("button",{onClick:()=>l(I.id),className:`w-full flex items-center space-x-3 px-4 py-3 rounded-lg text-left transition-colors ${a===I.id?"bg-yellow-500/20 text-yellow-400 border border-yellow-500/50":"text-gray-400 hover:text-white hover:bg-white/5"}`,children:[r.jsx(ie,{className:"h-5 w-5"}),r.jsx("span",{children:I.name})]},I.id)})})})}),r.jsx("div",{className:"lg:col-span-3",children:r.jsxs("div",{className:"golden-card p-6",children:[a==="profile"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"text-2xl font-bold text-white",children:"Profile Settings"}),r.jsxs("button",{onClick:U,disabled:g,className:"golden-button flex items-center space-x-2",children:[g?r.jsx(Wn,{className:"h-4 w-4 animate-spin"}):r.jsx(Kn,{className:"h-4 w-4"}),r.jsx("span",{children:"Save Changes"})]})]}),r.jsxs("div",{className:"flex items-center space-x-6",children:[r.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-yellow-400 to-yellow-600 rounded-full flex items-center justify-center text-black font-bold text-2xl",children:f.fullName.split(" ").map(I=>I[0]).join("").toUpperCase()||"U"}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-xl font-semibold text-white",children:f.fullName||"User"}),r.jsx("p",{className:"text-gray-400",children:f.role||"Staff Member"}),r.jsx("button",{className:"text-yellow-400 hover:text-yellow-300 text-sm mt-1",children:"Change Avatar"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Full Name"}),r.jsx("input",{type:"text",className:"golden-input w-full",value:f.fullName,onChange:I=>p({...f,fullName:I.target.value})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Email"}),r.jsx("input",{type:"email",className:"golden-input w-full",value:f.email,onChange:I=>p({...f,email:I.target.value})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Phone"}),r.jsx("input",{type:"tel",className:"golden-input w-full",value:f.phone,onChange:I=>p({...f,phone:I.target.value})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Role"}),r.jsx("input",{type:"text",className:"golden-input w-full",value:f.role,onChange:I=>p({...f,role:I.target.value})})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Bio"}),r.jsx("textarea",{className:"golden-input w-full h-24",value:f.bio,onChange:I=>p({...f,bio:I.target.value}),placeholder:"Tell us about yourself..."})]}),r.jsxs("div",{className:"pt-6 border-t border-gray-700",children:[r.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Account Actions"}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Change Password"}),r.jsx("button",{onClick:V,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Sign Out"})]})]})]}),a==="notifications"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"text-2xl font-bold text-white",children:"Notification Preferences"}),r.jsxs("button",{onClick:D,disabled:g,className:"golden-button flex items-center space-x-2",children:[g?r.jsx(Wn,{className:"h-4 w-4 animate-spin"}):r.jsx(Kn,{className:"h-4 w-4"}),r.jsx("span",{children:"Save Changes"})]})]}),r.jsx("div",{className:"space-y-4",children:[{key:"email",label:"Email Notifications",description:"Receive notifications via email"},{key:"push",label:"Push Notifications",description:"Browser push notifications"},{key:"desktop",label:"Desktop Notifications",description:"System desktop notifications"},{key:"security",label:"Security Alerts",description:"Important security notifications"},{key:"updates",label:"System Updates",description:"Notifications about system updates"}].map(I=>r.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg bg-white/5",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-white",children:I.label}),r.jsx("p",{className:"text-sm text-gray-400",children:I.description})]}),r.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[r.jsx("input",{type:"checkbox",className:"sr-only peer",checked:o.notifications[I.key],onChange:ie=>u({...o,notifications:{...o.notifications,[I.key]:ie.target.checked}})}),r.jsx("div",{className:"w-11 h-6 bg-gray-600 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-yellow-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-yellow-400"})]})]},I.key))})]}),a==="display"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"text-2xl font-bold text-white",children:"Display Settings"}),r.jsxs("button",{onClick:D,disabled:g,className:"golden-button flex items-center space-x-2",children:[g?r.jsx(Wn,{className:"h-4 w-4 animate-spin"}):r.jsx(Kn,{className:"h-4 w-4"}),r.jsx("span",{children:"Save Changes"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Theme"}),r.jsxs("select",{className:"golden-input w-full",value:o.display.theme,onChange:I=>u({...o,display:{...o.display,theme:I.target.value}}),children:[r.jsx("option",{value:"dark",children:"Dark"}),r.jsx("option",{value:"light",children:"Light"}),r.jsx("option",{value:"auto",children:"Auto"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Language"}),r.jsxs("select",{className:"golden-input w-full",value:o.display.language,onChange:I=>u({...o,display:{...o.display,language:I.target.value}}),children:[r.jsx("option",{value:"en",children:"English"}),r.jsx("option",{value:"es",children:"Espaol"}),r.jsx("option",{value:"fr",children:"Franais"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Timezone"}),r.jsxs("select",{className:"golden-input w-full",value:o.display.timezone,onChange:I=>u({...o,display:{...o.display,timezone:I.target.value}}),children:[r.jsx("option",{value:"UTC",children:"UTC"}),r.jsx("option",{value:"America/New_York",children:"Eastern Time"}),r.jsx("option",{value:"America/Chicago",children:"Central Time"}),r.jsx("option",{value:"America/Denver",children:"Mountain Time"}),r.jsx("option",{value:"America/Los_Angeles",children:"Pacific Time"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Date Format"}),r.jsxs("select",{className:"golden-input w-full",value:o.display.dateFormat,onChange:I=>u({...o,display:{...o.display,dateFormat:I.target.value}}),children:[r.jsx("option",{value:"MM/DD/YYYY",children:"MM/DD/YYYY"}),r.jsx("option",{value:"DD/MM/YYYY",children:"DD/MM/YYYY"}),r.jsx("option",{value:"YYYY-MM-DD",children:"YYYY-MM-DD"})]})]})]})]}),a==="security"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"text-2xl font-bold text-white",children:"Security Settings"}),r.jsxs("button",{onClick:D,disabled:g,className:"golden-button flex items-center space-x-2",children:[g?r.jsx(Wn,{className:"h-4 w-4 animate-spin"}):r.jsx(Kn,{className:"h-4 w-4"}),r.jsx("span",{children:"Save Changes"})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"p-4 rounded-lg bg-white/5",children:r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-white",children:"Two-Factor Authentication"}),r.jsx("p",{className:"text-sm text-gray-400",children:"Add an extra layer of security to your account"})]}),r.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[r.jsx("input",{type:"checkbox",className:"sr-only peer",checked:o.security.twoFactor,onChange:I=>u({...o,security:{...o.security,twoFactor:I.target.checked}})}),r.jsx("div",{className:"w-11 h-6 bg-gray-600 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-yellow-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-yellow-400"})]})]})}),r.jsxs("div",{className:"p-4 rounded-lg bg-white/5",children:[r.jsxs("div",{className:"mb-2",children:[r.jsx("h4",{className:"font-medium text-white",children:"Session Timeout"}),r.jsx("p",{className:"text-sm text-gray-400",children:"Automatic logout after inactivity"})]}),r.jsxs("select",{className:"golden-input w-full max-w-xs",value:o.security.sessionTimeout,onChange:I=>u({...o,security:{...o.security,sessionTimeout:parseInt(I.target.value)}}),children:[r.jsx("option",{value:15,children:"15 minutes"}),r.jsx("option",{value:30,children:"30 minutes"}),r.jsx("option",{value:60,children:"1 hour"}),r.jsx("option",{value:120,children:"2 hours"}),r.jsx("option",{value:240,children:"4 hours"})]})]}),r.jsx("div",{className:"p-4 rounded-lg bg-white/5",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-white",children:"Login Alerts"}),r.jsx("p",{className:"text-sm text-gray-400",children:"Get notified of new login attempts"})]}),r.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[r.jsx("input",{type:"checkbox",className:"sr-only peer",checked:o.security.loginAlerts,onChange:I=>u({...o,security:{...o.security,loginAlerts:I.target.checked}})}),r.jsx("div",{className:"w-11 h-6 bg-gray-600 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-yellow-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-yellow-400"})]})]})})]})]}),a==="system"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"text-2xl font-bold text-white",children:"System Settings"}),r.jsxs("button",{onClick:D,disabled:g,className:"golden-button flex items-center space-x-2",children:[g?r.jsx(Wn,{className:"h-4 w-4 animate-spin"}):r.jsx(Kn,{className:"h-4 w-4"}),r.jsx("span",{children:"Save Changes"})]})]}),r.jsx("div",{className:"space-y-4",children:[{key:"autoBackup",label:"Automatic Backup",description:"Automatically backup system data daily",restricted:!1},{key:"maintenanceMode",label:"Maintenance Mode",description:"Enable system maintenance mode",restricted:!0},{key:"debugMode",label:"Debug Mode",description:"Enable detailed system logging",restricted:!0}].map(I=>r.jsx("div",{className:"p-4 rounded-lg bg-white/5",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("h4",{className:"font-medium text-white",children:I.label}),I.restricted&&r.jsx(Xh,{className:"h-4 w-4 text-yellow-400"})]}),r.jsx("p",{className:"text-sm text-gray-400",children:I.description})]}),r.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[r.jsx("input",{type:"checkbox",className:"sr-only peer",checked:o.system[I.key],disabled:I.restricted&&(c==null?void 0:c.role)!=="super_admin",onChange:ie=>u({...o,system:{...o.system,[I.key]:ie.target.checked}})}),r.jsx("div",{className:`w-11 h-6 ${I.restricted&&(c==null?void 0:c.role)!=="super_admin"?"bg-gray-700":"bg-gray-600"} peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-yellow-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-yellow-400 peer-disabled:opacity-50`})]})]})},I.key))}),r.jsxs("div",{className:"pt-6 border-t border-gray-700",children:[r.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"System Information"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[r.jsxs("div",{className:"p-3 rounded-lg bg-white/5",children:[r.jsx("p",{className:"text-gray-400",children:"Version"}),r.jsx("p",{className:"text-white font-medium",children:"FETS POINT v2.0.1"})]}),r.jsxs("div",{className:"p-3 rounded-lg bg-white/5",children:[r.jsx("p",{className:"text-gray-400",children:"Last Updated"}),r.jsx("p",{className:"text-white font-medium",children:"August 18, 2025"})]}),r.jsxs("div",{className:"p-3 rounded-lg bg-white/5",children:[r.jsx("p",{className:"text-gray-400",children:"Database"}),r.jsx("p",{className:"text-white font-medium",children:"PostgreSQL 15.3"})]}),r.jsxs("div",{className:"p-3 rounded-lg bg-white/5",children:[r.jsx("p",{className:"text-gray-400",children:"Uptime"}),r.jsx("p",{className:"text-white font-medium",children:"15 days, 8 hours"})]})]})]})]})]})})]})]})}function Co(){const[c,n]=P.useState("untested");return null}function tx(){const{user:c,loading:n}=It(),[a,l]=P.useState("command-center"),[o,u]=P.useState(!1),[f,p]=P.useState(!1),g=Zh(),x=U0();if(console.log(" FETS POINT App initialized"),console.log(" App state:",{userAuthenticated:!!c,loading:n,isMobile:g,screenSize:x}),n)return r.jsxs("div",{className:"golden-theme flex items-center justify-center relative min-h-screen",children:[r.jsxs("div",{className:"text-center relative z-10 px-4",children:[r.jsx("div",{className:"golden-logo inline-block mb-8 golden-pulse",children:r.jsx("img",{src:"/fets-point-logo.png",alt:"FETS POINT",className:"h-16 w-16 sm:h-20 sm:w-20"})}),r.jsx("h1",{className:"golden-title mb-4 text-2xl sm:text-3xl",children:"FETS POINT"}),r.jsx("p",{className:"golden-subtitle mb-8 text-sm sm:text-base",children:"Loading Operational Platform Management Console..."}),r.jsx("div",{className:"flex justify-center",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-yellow-400"})})]}),r.jsx(Co,{})]});if(!c)return r.jsxs(r.Fragment,{children:[r.jsx(M0,{}),r.jsx(Co,{})]});const y=()=>{switch(a){case"command-center":return r.jsx(bh,{onNavigate:l});case"candidate-tracker":return r.jsx(F0,{});case"fets-roster":return r.jsx(tf,{});case"fets-calendar":return r.jsx(rf,{});case"my-desk":return r.jsx(K0,{});case"staff-management":return r.jsx(Q0,{});case"fets-vault":return r.jsx(Y0,{});case"fets-intelligence":return r.jsx(J0,{});case"log-incident":return r.jsx(X0,{});case"checklist-management":return r.jsx(Z0,{});case"settings":return r.jsx(ex,{});default:return r.jsx(bh,{onNavigate:l})}};return r.jsxs("div",{className:"golden-theme min-h-screen relative",children:[r.jsx(L0,{isMobile:g,sidebarOpen:o,setSidebarOpen:u}),!g&&r.jsx(jh,{activeTab:a,setActiveTab:l,isMobile:!1,isCollapsed:f,setIsCollapsed:p}),g&&o&&r.jsx(jh,{activeTab:a,setActiveTab:j=>{l(j),u(!1)},isMobile:!0,onClose:()=>u(!1)}),r.jsx("div",{className:"content-with-single-banner",children:r.jsx("div",{className:"dashboard-centered",children:y()})}),g&&r.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 z-30",children:r.jsx(rx,{activeTab:a,setActiveTab:l})}),r.jsx(Co,{})]})}function rx({activeTab:c,setActiveTab:n}){const a=[{id:"command-center",name:"Dashboard",icon:""},{id:"fets-roster",name:"Roster",icon:""},{id:"fets-calendar",name:"Calendar",icon:""},{id:"staff-management",name:"Staff",icon:""}];return r.jsx("div",{className:"flex items-center justify-around py-2 px-1 bg-white border-t border-gray-200",children:a.map(l=>r.jsxs("button",{onClick:()=>n(l.id),className:`flex flex-col items-center justify-center p-2 rounded-lg min-h-[44px] flex-1 transition-colors ${c===l.id?"text-yellow-600 bg-yellow-50":"text-gray-400 hover:text-gray-600"}`,children:[r.jsx("span",{className:"text-lg mb-1",children:l.icon}),r.jsx("span",{className:"text-xs font-medium",children:l.name})]},l.id))})}function sx(){return r.jsx(f0,{children:r.jsx(m0,{children:r.jsx(tx,{})})})}op.createRoot(document.getElementById("root")).render(r.jsx(P.StrictMode,{children:r.jsx(sx,{})}));
